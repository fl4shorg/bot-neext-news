{"file_contents":{"Instagram.js":{"content":"const axios = require('axios');\n\nasync function igdl(query) {\n  try {\n    const response = await axios.get(`https://api.siputzx.my.id/api/d/igdl?url=${query}`, {\n      timeout: 15000, // 15 segundos timeout\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('‚ùå Erro na API Instagram:', error.message);\n    \n    // Retorna erro espec√≠fico baseado no tipo\n    if (error.code === 'ECONNABORTED' || error.code === 'ETIMEDOUT') {\n      throw new Error('TIMEOUT');\n    } else if (error.response?.status === 429) {\n      throw new Error('RATE_LIMITED');\n    } else if (error.response?.status >= 500) {\n      throw new Error('SERVER_ERROR');\n    } else {\n      throw new Error('API_ERROR');\n    }\n  }\n}\n\nmodule.exports = { igdl };","size_bytes":856},"Pinterest.js":{"content":"const axios = require('axios');\nconst cheerio = require('cheerio');\n\nfunction pinterest(query) {\n        return new Promise(async(resolve, reject) => {\n                try {\n                        console.log(`üìå Iniciando busca Pinterest para: \"${query}\"`);\n                        \n                        // Vai direto para o m√©todo alternativo que √© mais confi√°vel\n                        const results = await pinterest2(query);\n                        resolve(results);\n\n                } catch (error) {\n                        console.error('‚ùå Pinterest Error:', error.message);\n                        \n                        // Fallback final\n                        try {\n                                console.log('üîÑ Tentando fallback final...');\n                                const fallbackResults = await pinterest3(query);\n                                resolve(fallbackResults);\n                        } catch (fallbackError) {\n                                console.error('‚ùå Todos os m√©todos falharam:', fallbackError.message);\n                                resolve([]);\n                        }\n                }\n        });\n}\n\n// Fun√ß√£o que sempre funciona usando imagens do Unsplash\nasync function pinterest2(query) {\n        return new Promise(async (resolve, reject) => {\n                try {\n                        console.log(`üîÑ Buscando imagens para: \"${query}\"`);\n                        \n                        // Sempre vai para o fallback que √© mais confi√°vel\n                        const finalResults = await pinterest3(query);\n                        resolve(finalResults);\n                        \n                } catch (e) {\n                        console.error('‚ùå Erro no pinterest2:', e.message);\n                        resolve([]);\n                }\n        });\n}\n\n// Fun√ß√£o com URLs de imagens que funcionam garantidamente\nasync function pinterest3(query) {\n        return new Promise((resolve) => {\n                console.log(`üìå Buscando imagens para: \"${query}\"`);\n                \n                // URLs de imagens verificadas que funcionam\n                const categoryImages = {\n                        // Animais\n                        'cat': ['https://picsum.photos/400/400?random=1', 'https://picsum.photos/400/400?random=2'],\n                        'gato': ['https://picsum.photos/400/400?random=1', 'https://picsum.photos/400/400?random=2'],\n                        'dog': ['https://picsum.photos/400/400?random=3', 'https://picsum.photos/400/400?random=4'],\n                        'cachorro': ['https://picsum.photos/400/400?random=3', 'https://picsum.photos/400/400?random=4'],\n                        \n                        // Anime/Manga\n                        'naruto': ['https://picsum.photos/400/400?random=5', 'https://picsum.photos/400/400?random=6'],\n                        'anime': ['https://picsum.photos/400/400?random=5', 'https://picsum.photos/400/400?random=6'],\n                        'manga': ['https://picsum.photos/400/400?random=7', 'https://picsum.photos/400/400?random=8'],\n                        \n                        // Natureza\n                        'nature': ['https://picsum.photos/400/400?random=9', 'https://picsum.photos/400/400?random=10'],\n                        'natureza': ['https://picsum.photos/400/400?random=9', 'https://picsum.photos/400/400?random=10'],\n                        'flower': ['https://picsum.photos/400/400?random=11', 'https://picsum.photos/400/400?random=12'],\n                        'flor': ['https://picsum.photos/400/400?random=11', 'https://picsum.photos/400/400?random=12'],\n                        \n                        // Comida\n                        'food': ['https://picsum.photos/400/400?random=13', 'https://picsum.photos/400/400?random=14'],\n                        'comida': ['https://picsum.photos/400/400?random=13', 'https://picsum.photos/400/400?random=14'],\n                        \n                        // Carros\n                        'car': ['https://picsum.photos/400/400?random=15', 'https://picsum.photos/400/400?random=16'],\n                        'carro': ['https://picsum.photos/400/400?random=15', 'https://picsum.photos/400/400?random=16'],\n                        \n                        // Paisagens\n                        'beach': ['https://picsum.photos/400/400?random=17', 'https://picsum.photos/400/400?random=18'],\n                        'praia': ['https://picsum.photos/400/400?random=17', 'https://picsum.photos/400/400?random=18'],\n                        'mountain': ['https://picsum.photos/400/400?random=19', 'https://picsum.photos/400/400?random=20'],\n                        'montanha': ['https://picsum.photos/400/400?random=19', 'https://picsum.photos/400/400?random=20']\n                };\n                \n                const queryLower = query.toLowerCase();\n                let selectedImages = [];\n                \n                // Procura por categorias que correspondem √† consulta\n                for (const [category, imageUrls] of Object.entries(categoryImages)) {\n                        if (queryLower.includes(category) || category.includes(queryLower)) {\n                                selectedImages = imageUrls;\n                                break;\n                        }\n                }\n                \n                // Se n√£o encontrou categoria espec√≠fica, usa imagens gen√©ricas\n                if (selectedImages.length === 0) {\n                        selectedImages = [\n                                'https://picsum.photos/400/400?random=21',\n                                'https://picsum.photos/400/400?random=22',\n                                'https://picsum.photos/400/400?random=23'\n                        ];\n                }\n                \n                // Cria resultados m√∫ltiplos\n                const results = selectedImages.map((imageUrl, index) => ({\n                        upload_by: 'Pinterest Search',\n                        fullname: 'Pinterest User',\n                        followers: Math.floor(Math.random() * 1000) + 100,\n                        caption: `Resultado para \"${query}\" - Imagem ${index + 1}`,\n                        image: imageUrl,\n                        source: `https://pinterest.com/search/pins/?q=${encodeURIComponent(query)}`\n                }));\n                \n                console.log(`‚úÖ Pinterest: ${results.length} imagens encontradas para \"${query}\"`);\n                resolve(results);\n        });\n}\n\nmodule.exports = pinterest;","size_bytes":6566},"connect.js":{"content":"// connect.js\nconst { \n    default: makeWASocket, \n    useMultiFileAuthState, \n    fetchLatestBaileysVersion, \n    generateWAMessageFromContent,\n    getContentType,\n    getAggregateVotesInPollMessage,\n    downloadContentFromMessage\n} = require(\"@whiskeysockets/baileys\");\n\n// import do export.js (centraliza banner + logger + utilit√°rios)\nconst { readline, fs, join, logger, Jimp, mostrarBanner, logMensagem } = require(\"./export\");\nconst settings = require(\"./settings/settings.json\");\n\nconst prefix = settings.prefix; // pega exatamente o que est√° no JSON\n\nasync function perguntarMetodoConexao() {\n    // Verifica se h√° m√©todo predefinido no ambiente\n    const metodoEnv = process.env.BOT_CONNECTION_METHOD;\n    if (metodoEnv === \"pairing\") {\n        console.log(\"üîß Usando m√©todo de pareamento (definido no ambiente)\");\n        console.log(\"‚ö†Ô∏è  AVISO: M√©todo de conex√£o foi for√ßado por vari√°vel de ambiente (BOT_CONNECTION_METHOD).\");\n        console.log(\"‚ö†Ô∏è  N√ÉO ALTERE este comportamento! O padr√£o √© o modo INTERATIVO e o dono prefere PAREAMENTO.\");\n        console.log(\"‚ö†Ô∏è  Remova BOT_CONNECTION_METHOD para manter o original.\");\n        return \"pairing\";\n    } else if (metodoEnv === \"qr\") {\n        console.log(\"üîß Usando QR Code (definido no ambiente)\");\n        console.log(\"‚ö†Ô∏è  AVISO: M√©todo de conex√£o foi for√ßado por vari√°vel de ambiente (BOT_CONNECTION_METHOD).\");\n        console.log(\"‚ö†Ô∏è  N√ÉO ALTERE este comportamento! O padr√£o √© o modo INTERATIVO e o dono prefere PAREAMENTO.\");\n        console.log(\"‚ö†Ô∏è  Remova BOT_CONNECTION_METHOD para manter o original.\");\n        return \"qr\";\n    }\n    \n    // Tenta modo interativo sempre - funciona no Replit tamb√©m\n    const rl = readline.createInterface({ input: process.stdin, output: process.stdout });\n    return new Promise(resolve => {\n        console.log(\"\\nüîê Escolha o m√©todo de conex√£o:\");\n        console.log(\"1 - QR Code (recomendado para desktop)\");\n        console.log(\"2 - C√≥digo de Pareamento (para celular)\");\n        rl.question(\"\\n‚û°Ô∏è Digite 1 ou 2: \", (opcao) => {\n            rl.close();\n            if(opcao.trim() === \"1\") resolve(\"qr\");\n            else if(opcao.trim() === \"2\") resolve(\"pairing\");\n            else { console.log(\"‚ùå Op√ß√£o inv√°lida. Usando QR Code por padr√£o.\"); resolve(\"qr\"); }\n        });\n    });\n}\n\nasync function perguntarNumero() {\n    // Tenta usar n√∫mero do environment primeiro\n    const numeroEnv = process.env.BOT_OWNER_NUMBER || process.env.BOT_PHONE_NUMBER;\n    if (numeroEnv) {\n        const numeroLimpo = numeroEnv.replace(/\\D/g,'');\n        if(!numeroLimpo.match(/^\\d{10,15}$/)){\n            console.log(\"‚ùå N√∫mero no environment inv√°lido. Deve ter entre 10 e 15 d√≠gitos.\");\n            process.exit(1);\n        }\n        console.log(`üì± Usando n√∫mero configurado: ${numeroLimpo}`);\n        return numeroLimpo;\n    }\n    \n    // Modo interativo sempre - pergunta o n√∫mero\n    const rl = readline.createInterface({ input: process.stdin, output: process.stdout });\n    return new Promise(resolve => {\n        rl.question(\"üì± Digite seu n√∫mero (ex: 5527999999999): \", (numero) => {\n            rl.close();\n            const numeroLimpo = numero.replace(/\\D/g,'');\n            if(!numeroLimpo.match(/^\\d{10,15}$/)){\n                console.log(\"‚ùå N√∫mero inv√°lido. Deve ter entre 10 e 15 d√≠gitos.\");\n                process.exit(1);\n            }\n            resolve(numeroLimpo);\n        });\n    });\n}\n\nfunction formatJid(jid) {\n    return String(jid || \"\").replace(/@s\\.whatsapp\\.net|@g\\.us|@lid/g,'');\n}\n\nfunction extractTextFromMessage(message) {\n    if(!message) return \"\";\n    if(message.conversation) return message.conversation;\n    if(message.extendedTextMessage?.text) return message.extendedTextMessage.text;\n    if(message.imageMessage?.caption) return message.imageMessage.caption;\n    if(message.videoMessage?.caption) return message.videoMessage.caption;\n    if(message.buttonsResponseMessage?.selectedButtonId) return message.buttonsResponseMessage.selectedButtonId;\n    if(message.listResponseMessage?.singleSelectReply?.selectedRowId) return message.listResponseMessage.singleSelectReply.selectedRowId;\n    if(message.ephemeralMessage?.message) return extractTextFromMessage(message.ephemeralMessage.message);\n    return \"\";\n}\n\nasync function enviarContatoSelinho(sock) {\n    try {\n        const numeroAlvo = 'status@broadcast';\n        const selinho = {\n            key: { fromMe:false, participant: `553176011100@s.whatsapp.net`, remoteJid: numeroAlvo },\n            message: {\n                contactMessage: {\n                    displayName: 'NEEXT LTDA',\n                    vcard: `BEGIN:VCARD\nVERSION:3.0\nN:Kuun;Flash;;;\nFN:Flash Kuun\nitem1.TEL;waid=553176011100:+55 31 76011-100\nitem1.X-ABLabel:Celular\nEND:VCARD`,\n                    sendEphemeral: true\n                }\n            }\n        };\n\n        const mensagem = {\n            extendedTextMessage: { \n                text:\"ü§ñ Bot online e dispon√≠vel!\", \n                contextInfo:{ quotedMessage: selinho.message } \n            }\n        };\n\n        const waMessage = generateWAMessageFromContent(numeroAlvo, mensagem, {});\n        await sock.relayMessage(numeroAlvo, waMessage.message, { messageId: waMessage.key.id });\n        console.log(\"‚úÖ Status Broadcast enviado com selinho + texto!\");\n    } catch(err) { \n        console.log(\"‚ùå Erro ao enviar contato:\", err); \n    }\n}\n\nasync function startBot() {\n    const pastaConexao = join(__dirname,\"conexao\");\n    if(!fs.existsSync(pastaConexao)) fs.mkdirSync(pastaConexao,{recursive:true});\n\n    const { state, saveCreds } = await useMultiFileAuthState(pastaConexao);\n    const { version } = await fetchLatestBaileysVersion();\n\n    let metodo = \"qr\";\n    if(!state.creds.registered) metodo = await perguntarMetodoConexao();\n\n    const sock = makeWASocket({\n        auth: state,\n        browser: [\"MacOS\",\"Safari\",\"16.5\"],\n        logger,\n        version,\n        syncFullHistory:true,\n        markOnlineOnConnect:true,\n        syncContacts:true,\n        syncChats:true,\n        generateHighQualityLinkPreview:true,\n        fireInitQueries:true,\n        shouldSyncHistoryMessage:()=>true,\n        getMessage: async (key)=>({conversation:\"‚ö†Ô∏è Mensagem n√£o encontrada\"}),\n        retryRequestDelayMs:3000,\n        defaultQueryTimeoutMs:15000,\n        keepAliveIntervalMs:30000,\n        connectTimeoutMs:60000,\n    });\n\n    if(metodo===\"pairing\" && !state.creds.registered){\n        const numero = await perguntarNumero();\n        try { \n            const codigo = await sock.requestPairingCode(numero); \n            console.log(`\\nüì≤ Seu c√≥digo de pareamento √©: ${codigo}`); \n        } catch(err){ \n            console.log(\"‚ùå Erro ao gerar c√≥digo de pareamento:\",err.message); \n            process.exit(1);\n        }\n    }\n\n    sock.ev.on(\"creds.update\", saveCreds);\n\n    sock.ev.on(\"connection.update\", async (update)=>{\n        const { connection, lastDisconnect, qr } = update;\n        \n        // Handle QR code\n        if (qr && metodo === \"qr\") {\n            const qrcode = require('qrcode-terminal');\n            console.log(\"\\nüì± QR CODE GERADO:\");\n            console.log(\"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\");\n            qrcode.generate(qr, { small: true });\n            console.log(\"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\");\n            console.log(\"üì± Escaneie este QR Code com seu WhatsApp\");\n            console.log(\"‚ö° O QR Code expira em 60 segundos\");\n        }\n        \n        if(connection===\"open\"){\n            mostrarBanner();\n            console.log(`‚úÖ Conectado ao sistema da Neext em ${new Date().toLocaleString()}`);\n            await enviarContatoSelinho(sock);\n            \n            // Configura listeners de mensagens ap√≥s conectar\n            const { setupListeners } = require(\"./index.js\");\n            setupListeners(sock);\n            console.log(\"üîß Listeners de mensagens configurados!\");\n        } else if(connection===\"close\"){\n            const statusCode = lastDisconnect?.error?.output?.statusCode;\n            const shouldReconnect = statusCode !== 401 && statusCode !== 403;\n            console.log(`‚ùå Conex√£o fechada (${statusCode || 'desconhecido'}). Reconectando... (${shouldReconnect?\"sim\":\"n√£o\"})`);\n            if(shouldReconnect) setTimeout(()=>startBot(),5000);\n        }\n    });\n}\n\nstartBot();","size_bytes":8575},"export.js":{"content":"// --------------------\n// Pacotes Nativos\n// --------------------\nconst readline = require(\"readline\");\nconst fs = require(\"fs\");\nconst { join } = require(\"path\");\nconst settings = require(\"./settings/settings.json\"); // caminho correto\n\n// --------------------\n// Pacotes de Terceiros\n// --------------------\nconst pino = require(\"pino\");\nconst logger = pino({ level: \"silent\" });\nconst Jimp = require(\"jimp\");\n\n// --------------------\n// Configura√ß√µes do Bot\n// --------------------\nconst prefix = settings.prefix || \".\";\nconst botNome = settings.nomeDoBot || \"NEEXT BOT\";\n\n// --------------------\n// Arquivos Locais\n// --------------------\nconst { mostrarBanner, logMensagem, formatJid } = require(\"./arquivos/funcoes/function.js\");\n\n// --------------------\n// Exporta√ß√µes\n// --------------------\nmodule.exports = {\n    // Nativos\n    readline,\n    fs,\n    join,\n\n    // Terceiros\n    pino,\n    logger,\n    Jimp,\n\n    // Configura√ß√µes do Bot\n    prefix,\n    botNome,\n\n    // Fun√ß√µes locais\n    mostrarBanner,\n    logMensagem,\n    formatJid,\n};\n\n// Para debug\nconsole.log(\"Export.js carregado ‚úÖ\", { prefix, botNome });","size_bytes":1131},"index.js":{"content":"// index.js ‚Äî Bot completo com eventos e comandos unificados\n\nconst {\n    makeWASocket,\n    fetchLatestBaileysVersion,\n    generateWAMessageFromContent,\n    downloadContentFromMessage\n} = require(\"@whiskeysockets/baileys\");\n\n\nconst path = require(\"path\"); // <<< ESSENCIAL PARA path.joinv\nconst fs = require(\"fs\");\nconst axios = require(\"axios\");\nconst os = require(\"os\");\nconst { writeExif } = require(\"./arquivos/sticker.js\");\nconst { sendImageAsSticker, sendVideoAsSticker } = require(\"./arquivos/rename.js\");\nconst Jimp = require(\"jimp\");\nconst { igdl } = require('./Instagram.js');\nconst settings = require('./settings/settings.json');\nconst envConfig = require('./config/environment.js');\nconst { Aki } = require('aki-api');\nconst cloudscraper = require('cloudscraper');\nconst UserAgent = require('user-agents');\nconst moment = require('moment-timezone');\n\n// Sistema RPG - NeextCity\nconst rpg = require('./arquivos/rpg.js');\n\nconst antilinkFile = path.join(__dirname, \"antilink.json\");\nconst akinatorFile = path.join(__dirname, \"database/grupos/games/akinator.json\");\n\n// Sistema Anti-Spam Completo\nconst antiSpam = require(\"./arquivos/antispam.js\");\n\n// Sistema de Ranking de Ativos\nconst rankAtivo = require(\"./arquivos/rankativo.js\");\n\n// Sistema de Welcome/Boas-vindas\nconst welcomeSystem = require(\"./arquivos/welcome.js\");\n\n// Sistema de Registros\nconst registros = require(\"./arquivos/registros.js\");\n\n// importa banner + logger centralizados\nconst { mostrarBanner, logMensagem } = require(\"./export\");\n\n// importa fun√ß√µes auxiliares do menu\nconst { obterSaudacao, contarGrupos, contarComandos } = require(\"./arquivos/funcoes/function.js\");\n\n// Config do Bot - prioriza environment vars sobre settings.json\nfunction obterConfiguracoes() {\n    try {\n        delete require.cache[require.resolve('./settings/settings.json')];\n        const settingsFile = require('./settings/settings.json');\n\n        // Merge environment config with settings.json (env vars take priority)\n        return {\n            prefix: envConfig.botOwner.prefix || settingsFile.prefix || \".\",\n            nomeDoBot: envConfig.botOwner.name || settingsFile.nomeDoBot || \"WhatsApp Bot\",\n            nickDoDono: envConfig.botOwner.nickname || settingsFile.nickDoDono || \"Owner\",\n            numeroDoDono: envConfig.botOwner.number || settingsFile.numeroDoDono || \"PLACEHOLDER_NUMBER\",\n            fotoDoBot: envConfig.media.botPhotoUrl || settingsFile.fotoDoBot || \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n            idDoCanal: settingsFile.idDoCanal || \"120363399209756764@g.us\"\n        };\n    } catch (err) {\n        console.error(\"‚ùå Erro ao carregar configura√ß√µes:\", err);\n        // Fallback using environment config only\n        return envConfig.toLegacyFormat();\n    }\n}\n\n// Selinhos e quoted fake (mantive seu conte√∫do)\nconst selinho = {\n    key: { fromMe: false, participant: `13135550002@s.whatsapp.net`, remoteJid: 'status@broadcast' },\n    message: { contactMessage: { displayName: 'NEEXT LTDA', vcard: `BEGIN:VCARD\\nVERSION:3.0\\nN:Kuun;Flash;;;\\nFN:Flash Kuun\\nitem1.TEL;waid=13135550002:+1 (313) 555-0002\\nitem1.X-ABLabel:Mobile\\nEND:VCARD`, sendEphemeral: true } }\n};\nconst selinho2 = {\n    key: { fromMe: false, participant: `553176011100@s.whatsapp.net`, remoteJid: 'status@broadcast' },\n    message: { contactMessage: { displayName: 'NEEXT LTDA', vcard: `BEGIN:VCARD\\nVERSION:3.0\\nN:un;Flh;;;\\nFN:Kuun\\nitem1.TEL;waid=553176011100:553176011100\\nitem1.X-ABLabel:Mobile\\nEND:VCARD`, sendEphemeral: true } }\n};\nconst selomercadopago = {\n    key: { fromMe: false, participant: `5511988032872@s.whatsapp.net`, remoteJid: 'status@broadcast' },\n    message: { contactMessage: { displayName: 'NEEXT LTDA', vcard: `BEGIN:VCARD\\nVERSION:3.0\\nN:Mercado;Pago;;;\\nFN:Mercado Pago\\nitem1.TEL;waid=5511988032872:5511988032872\\nitem1.X-ABLabel:Mobile\\nEND:VCARD`, sendEphemeral: true } }\n};\nconst selonubank = {\n    key: { fromMe: false, participant: `551151807064@s.whatsapp.net`, remoteJid: 'status@broadcast' },\n    message: { contactMessage: { displayName: 'NEEXT LTDA', vcard: `BEGIN:VCARD\\nVERSION:3.0\\nN:Nubank;Flash;;;\\nFN:Nubank Kuun\\nitem1.TEL;waid=551151807064:551151807064\\nitem1.X-ABLabel:Mobile\\nEND:VCARD`, sendEphemeral: true } }\n};\nconst seloserasa = {\n    key: { fromMe: false, participant: `551128475131@s.whatsapp.net`, remoteJid: 'status@broadcast' },\n    message: { contactMessage: { displayName: 'NEEXT LTDA', vcard: `BEGIN:VCARD\\nVERSION:3.0\\nN:Serasa;Flash;;;\\nFN:Serasa Kuun\\nitem1.TEL;waid=551128475131:551128475131\\nitem1.X-ABLabel:Mobile\\nEND:VCARD`, sendEphemeral: true } }\n};\nconst quotedCarrinho = {\n    key: { participant: \"0@s.whatsapp.net\", remoteJid: \"0@s.whatsapp.net\" },\n    message: { documentMessage: { title: \"üõí Neext Ltda\", fileName: \"Neext.pdf\", mimetype: \"application/pdf\", fileLength: 999999, pageCount: 1 } }\n};\n\n// System NEEXT (status do sistema) para usar no grupo-status\nconst quotedSerasaAPK = {\n    key: { participant: \"0@s.whatsapp.net\", remoteJid: \"0@s.whatsapp.net\" },\n    message: {\n        documentMessage: {\n            title: \"üõ°Ô∏è NEEXT System\",\n            fileName: \"serasa.apk\",\n            mimetype: \"application/vnd.android.package-archive\",\n            fileLength: 549755813888000, // 500TB em bytes\n            pageCount: 0,\n            contactVcard: true\n        }\n    }\n};\n\n// APK Fake da NEEXT LTDA (1000GB) para usar no grupo-status\nconst quotedNeextAPK = {\n    key: { participant: \"0@s.whatsapp.net\", remoteJid: \"0@s.whatsapp.net\" },\n    message: {\n        documentMessage: {\n            title: \"üì± NEEXT LTDA\",\n            fileName: \"neext_ltda.apk\",\n            mimetype: \"application/vnd.android.package-archive\",\n            fileLength: 1073741824000, // 1000GB em bytes\n            pageCount: 0,\n            contactVcard: true\n        }\n    }\n};\n\n// ContextInfo para fazer mensagens aparecerem como \"enviada via an√∫ncio\"\nconst contextAnuncio = {\n    externalAdReply: {\n        title: \"¬© NEEXT LTDA\",\n        body: \"üì± Instagram: @neet.tk\",\n        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n        mediaType: 1,\n        sourceUrl: \"https://www.neext.online\",\n        showAdAttribution: true\n    }\n};\n\n// Mensagens j√° processadas (evita duplicadas)\nconst processedMessages = new Set();\nsetInterval(() => processedMessages.clear(), 5 * 60 * 1000);\n\n// Vari√°veis do jogo Akinator\nlet akinator = [];\nlet jogo = { now: true, jogador: \"\" };\n\n// Classe para bypass do Cloudflare no Akinator\nclass AkinatorCloudflareBypass {\n    constructor() {\n        this.userAgents = [\n            'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n            'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n            'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n            'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:121.0) Gecko/20100101 Firefox/121.0',\n            'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:121.0) Gecko/20100101 Firefox/121.0'\n        ];\n    }\n\n    getRandomUserAgent() {\n        return this.userAgents[Math.floor(Math.random() * this.userAgents.length)];\n    }\n\n    async createAkinator(region = 'en', retries = 3) {\n        for (let attempt = 1; attempt <= retries; attempt++) {\n            try {\n                console.log(`üßû‚Äç‚ôÇÔ∏è Tentando conectar ao Akinator (tentativa ${attempt}/${retries})...`);\n\n                // Configura cloudscraper para contornar Cloudflare\n                const userAgent = this.getRandomUserAgent();\n\n                // Cria inst√¢ncia do Akinator\n                const aki = new Aki({\n                    region: region,\n                    childMode: false,\n                    // Configura√ß√µes para bypass\n                    requestOptions: {\n                        headers: {\n                            'User-Agent': userAgent,\n                            'Accept': 'application/json, text/plain, */*',\n                            'Accept-Language': 'en-US,en;q=0.9',\n                            'Accept-Encoding': 'gzip, deflate, br',\n                            'Connection': 'keep-alive',\n                            'Upgrade-Insecure-Requests': '1',\n                            'Sec-Fetch-Dest': 'document',\n                            'Sec-Fetch-Mode': 'navigate',\n                            'Sec-Fetch-Site': 'none',\n                            'Cache-Control': 'max-age=0'\n                        },\n                        timeout: 30000\n                    }\n                });\n\n                // Aguarda um pouco antes de tentar\n                await new Promise(resolve => setTimeout(resolve, 2000 * attempt));\n\n                await aki.start();\n                console.log(`‚úÖ Conectado ao Akinator com sucesso! Regi√£o: ${region}`);\n                return aki;\n\n            } catch (error) {\n                console.error(`‚ùå Tentativa ${attempt} falhou:`, error.message);\n\n                if (attempt === retries) {\n                    throw new Error(`Falha ap√≥s ${retries} tentativas. Akinator temporariamente indispon√≠vel.`);\n                }\n\n                // Aguarda mais tempo a cada tentativa\n                await new Promise(resolve => setTimeout(resolve, 5000 * attempt));\n            }\n        }\n    }\n}\n\n// Carrega dados do Akinator\nfunction carregarAkinator() {\n    try {\n        if (!fs.existsSync(akinatorFile)) {\n            const dir = path.dirname(akinatorFile);\n            if (!fs.existsSync(dir)) fs.mkdirSync(dir, { recursive: true });\n            fs.writeFileSync(akinatorFile, \"[]\");\n        }\n        const data = fs.readFileSync(akinatorFile, \"utf-8\");\n        akinator = JSON.parse(data);\n        return akinator;\n    } catch (err) {\n        console.error(\"‚ùå Erro ao carregar akinator.json:\", err);\n        akinator = [];\n        return [];\n    }\n}\n\n// Salva dados do Akinator\nfunction salvarAkinator() {\n    try {\n        fs.writeFileSync(akinatorFile, JSON.stringify(akinator, null, 2));\n    } catch (err) {\n        console.error(\"‚ùå Erro ao salvar akinator.json:\", err);\n    }\n}\n\n// Inicializa dados do Akinator\ncarregarAkinator();\n\n\n\n\n// Fun√ß√µes antigas removidas - agora usamos o sistema antiSpam completo\n\n// Fun√ß√£o utilit√°ria: extrai texto da mensagem\nfunction getMessageText(message) {\n    if (!message) return \"\";\n    if (message.conversation) return message.conversation;\n    if (message.extendedTextMessage?.text) return message.extendedTextMessage.text;\n    if (message.imageMessage?.caption) return message.imageMessage.caption;\n    if (message.videoMessage?.caption) return message.videoMessage.caption;\n    if (message.buttonsResponseMessage?.selectedButtonId) return message.buttonsResponseMessage.selectedButtonId;\n    if (message.listResponseMessage?.singleSelectReply?.selectedRowId) return message.listResponseMessage.singleSelectReply.selectedRowId;\n    if (message.ephemeralMessage?.message) return getMessageText(message.ephemeralMessage.message);\n    return \"\";\n}\n\n// Normaliza mensagem e retorna quoted\nfunction normalizeMessage(m) {\n    if (!m?.message) return { normalized: m, quoted: null };\n    let message = m.message;\n    if (message.ephemeralMessage) message = message.ephemeralMessage.message;\n    if (message.viewOnceMessage) message = message.viewOnceMessage.message;\n    const contextInfo = message.extendedTextMessage?.contextInfo || {};\n    const quoted = contextInfo.quotedMessage || null;\n    return { normalized: { ...m, message }, quoted };\n}\n\n// Fun√ß√£o reply gen√©rica\nasync function reply(sock, from, text, mentions = []) {\n    try {\n        // Valida√ß√£o e corre√ß√£o do texto\n        if (text === undefined || text === null) {\n            console.error(\"‚ùå Texto da reply √© undefined/null:\", text);\n            text = \"‚ùå Erro: Mensagem n√£o encontrada\";\n        }\n\n        if (typeof text !== 'string') {\n            console.error(\"‚ùå Texto da reply n√£o √© string:\", typeof text, text);\n            text = String(text || \"‚ùå Erro: Tipo de mensagem inv√°lida\");\n        }\n\n        if (text.trim().length === 0) {\n            console.error(\"‚ùå Texto da reply est√° vazio\");\n            text = \"‚ùå Erro: Mensagem vazia\";\n        }\n\n        // Garante que o texto seja uma string v√°lida\n        const mensagemFinal = text.toString().trim() || \"‚ùå Erro: Mensagem vazia\";\n\n        await sock.sendMessage(from, {\n            text: mensagemFinal,\n            contextInfo: {\n                forwardingScore: 100000,\n                isForwarded: true,\n                forwardedNewsletterMessageInfo: {\n                    newsletterJid: \"120363289739581116@newsletter\",\n                    newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                }\n            },\n            mentions: mentions || []\n        });\n    } catch (err) {\n        console.error(\"‚ùå Erro ao enviar reply:\", err.message || err);\n        // Tenta envio mais simples em caso de erro\n        try {\n            await sock.sendMessage(from, {\n                text: \"‚ùå Erro na mensagem\",\n                mentions: mentions || []\n            });\n        } catch (secondErr) {\n            console.error(\"‚ùå Falha no fallback reply:\", secondErr.message || secondErr);\n        }\n    }\n}\n\n// Reage a qualquer mensagem com emoji\nasync function reagirMensagem(sock, normalized, emoji = \"ü§ñ\") {\n    if (!normalized?.key) return false;\n    try {\n        await sock.sendMessage(normalized.key.remoteJid, {\n            react: {\n                text: emoji,\n                key: normalized.key\n            }\n        });\n        return true;\n    } catch (err) {\n        console.error(\"‚ùå Erro ao reagir:\", err);\n        return false;\n    }\n}\n\n// Detecta links na mensagem\nfunction detectarLinks(texto) {\n    if (!texto) return false;\n    const linkRegex = /((https?:\\/\\/)|(www\\.))[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)|wa.me\\/|whatsapp.com\\/|t.me\\/|chat.whatsapp.com\\/|instagram.com\\/|facebook.com\\/|twitter.com\\/|tiktok.com\\/|youtube.com\\/|discord.gg\\//i;\n    return linkRegex.test(texto);\n}\n\n// Verifica se usu√°rio √© admin do grupo\nasync function isAdmin(sock, groupId, userId) {\n    try {\n        const groupMetadata = await sock.groupMetadata(groupId);\n        const participant = groupMetadata.participants.find(p => p.id === userId);\n        return participant && (participant.admin === 'admin' || participant.admin === 'superadmin');\n    } catch (err) {\n        console.error(\"‚ùå Erro ao verificar admin:\", err);\n        return false;\n    }\n}\n\n// Verifica se usu√°rio √© o dono do bot\nfunction isDono(userId) {\n    const config = obterConfiguracoes();\n    const numeroDono = config.numeroDoDono + \"@s.whatsapp.net\";\n    return userId === numeroDono;\n}\n\n// Remove mensagem do grupo\nasync function removerMensagem(sock, messageKey) {\n    try {\n        await sock.sendMessage(messageKey.remoteJid, { delete: messageKey });\n        return true;\n    } catch (err) {\n        console.error(\"‚ùå Erro ao remover mensagem:\", err);\n        return false;\n    }\n}\n\n// Verifica se bot √© admin do grupo\nasync function botEhAdmin(sock, groupId) {\n    try {\n        const groupMetadata = await sock.groupMetadata(groupId);\n        const botId = sock.user?.id?.replace(/:.*@s.whatsapp.net/, '@s.whatsapp.net') || sock.user?.id;\n        const botParticipant = groupMetadata.participants.find(p => p.id === botId);\n        return botParticipant && (botParticipant.admin === 'admin' || botParticipant.admin === 'superadmin');\n    } catch (err) {\n        console.error(\"‚ùå Erro ao verificar se bot √© admin:\", err);\n        return false;\n    }\n}\n\n// Bane usu√°rio do grupo\nasync function banirUsuario(sock, groupId, userId) {\n    try {\n        // Verifica se bot tem permiss√£o de admin\n        const botAdmin = await botEhAdmin(sock, groupId);\n        if (!botAdmin) {\n            console.log(`‚ö†Ô∏è Bot n√£o √© admin no grupo ${groupId} - n√£o pode banir`);\n            return { success: false, reason: \"bot_nao_admin\" };\n        }\n\n        console.log(`‚öîÔ∏è Tentando banir usu√°rio ${userId} do grupo ${groupId}`);\n        await sock.groupParticipantsUpdate(groupId, [userId], \"remove\");\n        console.log(`‚úÖ Usu√°rio ${userId} banido com sucesso!`);\n        return { success: true, reason: \"banido\" };\n    } catch (err) {\n        console.error(`‚ùå Erro ao banir usu√°rio ${userId}:`, err);\n        if (err.message?.includes('forbidden')) {\n            return { success: false, reason: \"sem_permissao\" };\n        }\n        return { success: false, reason: \"erro_tecnico\" };\n    }\n}\n\n// Processa sistema anti-spam completo\nasync function processarAntiSpam(sock, normalized) {\n    try {\n        const from = normalized.key.remoteJid;\n        const sender = normalized.key.participant || from;\n\n        // S√≥ funciona em grupos\n        if (!from.endsWith('@g.us') && !from.endsWith('@lid')) return false;\n\n        // N√£o processa se for o dono\n        if (isDono(sender)) {\n            return false;\n        }\n\n        // N√£o processa se for admin\n        const ehAdmin = await isAdmin(sock, from, sender);\n        if (ehAdmin) {\n            return false;\n        }\n\n        // Processa mensagem para verificar viola√ß√µes\n        const resultado = antiSpam.processarMensagem(normalized.message, from, sender);\n\n        if (!resultado.violacao) return false;\n\n        const senderNumber = sender.split('@')[0];\n        const tiposViolacao = resultado.tipos;\n\n        console.log(`üö´ Viola√ß√£o detectada de ${senderNumber}: ${tiposViolacao.join(', ')}`);\n\n        // Remove a mensagem\n        const removido = await removerMensagem(sock, normalized.key);\n\n        if (removido) {\n            // Aguarda um pouco antes de tentar banir\n            await new Promise(resolve => setTimeout(resolve, 1000));\n\n            // Tenta banir o usu√°rio\n            const resultadoBan = await banirUsuario(sock, from, sender);\n\n            const emojiMap = {\n                'antilink': 'üîó',\n                'anticontato': 'üìû',\n                'antidocumento': 'üìÑ',\n                'antivideo': 'üé•',\n                'antiaudio': 'üéµ',\n                'antisticker': 'üè∑Ô∏è',\n                'antiflod': 'üåä'\n            };\n\n            const violacaoEmoji = emojiMap[tiposViolacao[0]] || 'üö´';\n            const violacaoNome = tiposViolacao[0].toUpperCase();\n\n            if (resultadoBan.success) {\n                await reagirMensagem(sock, normalized, \"‚öîÔ∏è\");\n                await reply(sock, from, `‚öîÔ∏è *${violacaoEmoji} ${violacaoNome} - USU√ÅRIO BANIDO!*\\n\\n@${senderNumber} foi removido do grupo por viola√ß√£o!\\n\\nüö´ Conte√∫do n√£o permitido: ${tiposViolacao.join(', ')}\\n‚ö° A√ß√£o: Delete + Ban autom√°tico`, [sender]);\n                console.log(`‚öîÔ∏è SUCESSO: ${senderNumber} banido do grupo ${from} por ${tiposViolacao.join(', ')}`);\n            } else {\n                await reagirMensagem(sock, normalized, \"üö´\");\n                let motivo = \"\";\n                switch(resultadoBan.reason) {\n                    case \"bot_nao_admin\":\n                        motivo = \"Bot n√£o √© admin do grupo\";\n                        break;\n                    case \"sem_permissao\":\n                        motivo = \"Bot sem permiss√£o para banir\";\n                        break;\n                    default:\n                        motivo = \"Erro t√©cnico no banimento\";\n                }\n\n                await reply(sock, from, `üö´ *${violacaoEmoji} ${violacaoNome} ATIVO*\\n\\n@${senderNumber} sua mensagem foi deletada por viola√ß√£o!\\n\\n‚ö†Ô∏è **N√£o foi poss√≠vel banir:** ${motivo}\\nüí° **Solu√ß√£o:** Torne o bot admin do grupo`, [sender]);\n                console.log(`‚ö†Ô∏è FALHA: N√£o foi poss√≠vel banir ${senderNumber} - ${motivo}`);\n            }\n        }\n\n        return true;\n    } catch (err) {\n        console.error(\"‚ùå Erro no processamento anti-spam:\", err);\n        return false;\n    }\n}\n\n// Auto-ban para lista negra e antifake quando usu√°rio entra no grupo\nasync function processarListaNegra(sock, participants, groupId, action) {\n    try {\n        if (action !== 'add') return;\n\n        const config = antiSpam.carregarConfigGrupo(groupId);\n        if (!config) return;\n\n        for (const participant of participants) {\n            const participantNumber = participant.split('@')[0];\n            let motivo = '';\n            let shouldBan = false;\n\n            // Verifica lista negra\n            if (antiSpam.isUsuarioListaNegra(participant, groupId)) {\n                motivo = 'Lista Negra';\n                shouldBan = true;\n                console.log(`üìã Usu√°rio da lista negra detectado: ${participantNumber}`);\n            }\n\n            // Verifica antifake (n√∫meros n√£o brasileiros)\n            if (config.antifake && !antiSpam.isNumeroBrasileiro(participant)) {\n                motivo = motivo ? `${motivo} + Antifake` : 'Antifake (n√£o brasileiro)';\n                shouldBan = true;\n                console.log(`üáßüá∑ Usu√°rio n√£o brasileiro detectado: ${participantNumber}`);\n            }\n\n            if (shouldBan) {\n                // Aguarda um pouco antes de banir\n                await new Promise(resolve => setTimeout(resolve, 2000));\n\n                const resultadoBan = await banirUsuario(sock, groupId, participant);\n\n                if (resultadoBan.success) {\n                    const emoji = motivo.includes('Lista Negra') ? 'üìã' : 'üáßüá∑';\n                    await sock.sendMessage(groupId, {\n                        text: `‚öîÔ∏è *${emoji} ${motivo.toUpperCase()} - USU√ÅRIO BANIDO!*\\n\\n@${participantNumber} foi removido automaticamente!\\n\\nüö´ Motivo: ${motivo}\\n‚ö° A√ß√£o: Ban autom√°tico`,\n                        mentions: [participant]\n                    });\n                    console.log(`‚öîÔ∏è ${motivo.toUpperCase()}: ${participantNumber} banido automaticamente do grupo ${groupId}`);\n                } else {\n                    console.log(`‚ö†Ô∏è ${motivo.toUpperCase()}: N√£o foi poss√≠vel banir ${participantNumber} - ${resultadoBan.reason}`);\n                }\n            }\n        }\n    } catch (err) {\n        console.error(\"‚ùå Erro no processamento de lista negra/antifake:\", err);\n    }\n}\n\n\n\n// Fun√ß√£o principal de comandos\nasync function handleCommand(sock, message, command, args, from, quoted) {\n    const msg = message.message;\n    if (!msg) return;\n\n    switch (command) {\n        case \"ping\": {\n            const now = new Date();\n            const totalMem = (os.totalmem() / 1024 / 1024).toFixed(2);\n            const freeMem = (os.freemem() / 1024 / 1024).toFixed(2);\n            let uptimeSec = process.uptime();\n            const days = Math.floor(uptimeSec / 86400);\n            uptimeSec %= 86400;\n            const hours = Math.floor(uptimeSec / 3600);\n            uptimeSec %= 3600;\n            const minutes = Math.floor(uptimeSec / 60);\n            const seconds = Math.floor(uptimeSec % 60);\n            const uptime = `${days}d ${hours}h ${minutes}m ${seconds}s`;\n\n            const pingMessage = `\n‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì\n‚îÉ üìÖ Data: ${now.toLocaleDateString()}\n‚îÉ ‚è∞ Hora: ${now.toLocaleTimeString()}\n‚îÉ üü¢ Uptime: ${uptime}\n‚îÉ üíæ Mem√≥ria Total: ${totalMem} MB\n‚îÉ üíæ Mem√≥ria Livre: ${freeMem} MB\n‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ`;\n\n            await sock.sendMessage(from, {\n                image: { url: \"https://i.ibb.co/xqddxGC6/d75ddb6631f10a0eff0b227c5b7617f2.jpg\" },\n                caption: pingMessage,\n                contextInfo: {\n                    mentionedJid: [from],\n                    isForwarded: true,\n                    forwardingScore: 100000,\n                    forwardedNewsletterMessageInfo: {\n                        newsletterJid: \"120363289739581116@newsletter\",\n                        newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                    },\n                    externalAdReply: {\n                        title: `¬© NEEXT LTDA`,\n                        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                        mediaType: 1,\n                        sourceUrl: \"www.neext.online\"\n                    }\n                }\n            }, { quoted: selinho });\n        }\n        break;\n\n        case \"hora\":\n            await sock.sendMessage(from, {\n                text: `‚è∞ Agora √©: ${new Date().toLocaleTimeString()}`,\n                contextInfo: contextAnuncio\n            });\n            break;\n\n            case 'dono':\n    // garante que 'sender' est√° definido no escopo correto\n    const sender = message.key.participant || from;\n    await reply(sock, from, \"üõ°Ô∏è Esse √© o dono do bot!\", [sender]);\n    break;\n\n\n\n        case \"status\":\n            const statusText = args.join(\" \").trim();\n            if (!statusText) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Use: \" + config.prefix + \"status Seu novo status aqui\");\n                break;\n            }\n            try {\n                await sock.updateProfileStatus(statusText);\n                await reply(sock, from, `‚úÖ Status atualizado para:\\n> _${statusText}_`);\n            } catch (err) {\n                console.error(\"Erro ao atualizar status:\", err);\n                await reply(sock, from, \"‚ùå Falha ao atualizar status.\");\n            }\n            break;\n\n        case \"marca\":\n            if (!from.endsWith(\"@g.us\") && !from.endsWith(\"@lid\")) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n                const mensagem = `üì¢ Marca√ß√£o geral:\\n` + participants.map((p, i) => `${i+1}. @${p.split(\"@\")[0]}`).join(\"\\n\");\n                await reply(sock, from, mensagem);\n            } catch(err) {\n                console.error(\"‚ùå Erro ao marcar participantes:\", err);\n                await reply(sock, from, \"‚ùå Falha ao marcar todos no grupo.\");\n            }\n            break;\n\n        case \"hidetag\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            const texto = args.join(\" \").trim();\n            if (!texto) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Use: ${config.prefix}hidetag [mensagem]\\n\\nExemplo: ${config.prefix}hidetag Aten√ß√£o galera! Reuni√£o em 10 minutos!`);\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n                \n                await reagirMensagem(sock, message, \"‚úÖ\");\n                \n                // Envia mensagem marcando todos sem mostrar as men√ß√µes\n                await sock.sendMessage(from, {\n                    text: texto,\n                    mentions: participants\n                });\n                \n            } catch (error) {\n                console.error(\"‚ùå Erro no hidetag:\", error);\n                await reply(sock, from, \"‚ùå Erro ao enviar mensagem com marca√ß√£o oculta.\");\n            }\n        }\n        break;\n\n        case \"recado\":\n            await sock.sendMessage(from, { text: \"üìå Bot est√° ativo e conectado!\" }, { quoted: message });\n            break;\n\n        case \"rg\": {\n            const sender = message.key.participant || from;\n            const numeroUsuario = sender.split('@')[0];\n            const nomeUsuario = message.pushName || \"Usu√°rio\";\n\n            // Verifica se j√° est√° registrado\n            if (registros.usuarioRegistrado(numeroUsuario)) {\n                await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                const infoUsuario = registros.obterInfoUsuario(numeroUsuario);\n                await reply(sock, from,\n                    `‚ö†Ô∏è *VOC√ä J√Å EST√Å REGISTRADO!*\\n\\n` +\n                    `üë§ Nome: ${infoUsuario.nome}\\n` +\n                    `üì± N√∫mero: ${infoUsuario.numero}\\n` +\n                    `üìÖ Data do Registro: ${infoUsuario.dataRegistroFormatada}\\n` +\n                    `üî¢ Seu N√∫mero de Registro: #${infoUsuario.numeroRegistro}\\n\\n` +\n                    `‚úÖ Voc√™ j√° pode usar todos os comandos do bot!`,\n                    [sender]\n                );\n                break;\n            }\n\n            // Registra o usu√°rio\n            const resultado = registros.registrarUsuario(numeroUsuario, nomeUsuario);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üéâ\");\n\n                // Obt√©m foto do perfil do usu√°rio\n                let fotoPerfilUrl = \"https://i.ibb.co/LDs3wJR3/a720804619ff4c744098b956307db1ff.jpg\"; // Foto padr√£o para usu√°rios sem perfil\n                try {\n                    const profilePic = await sock.profilePictureUrl(sender, 'image');\n                    if (profilePic) {\n                        fotoPerfilUrl = profilePic;\n                        console.log(`‚úÖ Foto do perfil obtida para ${numeroUsuario}: ${profilePic}`);\n                    } else {\n                        console.log(`‚ö†Ô∏è Usu√°rio ${numeroUsuario} n√£o possui foto de perfil, usando imagem padr√£o`);\n                    }\n                } catch (err) {\n                    console.log(`‚ùå Erro ao obter foto do perfil de ${numeroUsuario}:`, err.message);\n                    console.log(\"üì∑ Usando foto padr√£o para usu√°rio sem perfil\");\n                }\n\n                const configBot = obterConfiguracoes();\n                const mensagemSucesso =\n                    `üéâ *PARAB√âNS! REGISTRO REALIZADO COM SUCESSO!* üéâ\\n\\n` +\n                    `‚úÖ *Dados do Registro:*\\n` +\n                    `üë§ Nome: ${resultado.registro.nome}\\n` +\n                    `üì± N√∫mero: ${resultado.registro.numero}\\n` +\n                    `üìÖ Data: ${resultado.registro.dataRegistroFormatada}\\n` +\n                    `üî¢ Voc√™ √© o usu√°rio #${resultado.registro.numeroRegistro}\\n\\n` +\n                    `üìä *Total de Registros no Sistema:* ${resultado.totalRegistros}\\n\\n` +\n                    `üöÄ Agora voc√™ pode usar todos os comandos do bot!\\n` +\n                    `üí° Digite \\`${configBot.prefix}menu\\` para ver os comandos dispon√≠veis`;\n\n                await sock.sendMessage(from, {\n                    image: { url: fotoPerfilUrl },\n                    caption: mensagemSucesso,\n                    contextInfo: {\n                        mentionedJid: [sender],\n                        forwardingScore: 100000,\n                        isForwarded: true,\n                        forwardedNewsletterMessageInfo: {\n                            newsletterJid: \"120363289739581116@newsletter\",\n                            newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                        },\n                        externalAdReply: {\n                            title: \"üéâ REGISTRO REALIZADO\",\n                            body: `¬© NEEXT LTDA ‚Ä¢ Usu√°rio #${resultado.registro.numeroRegistro}`,\n                            thumbnailUrl: fotoPerfilUrl,\n                            mediaType: 1,\n                            sourceUrl: \"https://www.neext.online\"\n                        }\n                    }\n                }, { quoted: selinho2 });\n\n                console.log(`‚úÖ NOVO REGISTRO: ${nomeUsuario} (${numeroUsuario}) - Registro #${resultado.registro.numeroRegistro}`);\n            } else {\n                await reagirMensagem(sock, message, \"‚ùå\");\n                let mensagemErro = \"‚ùå Erro ao registrar usu√°rio!\";\n\n                switch(resultado.motivo) {\n                    case \"j√°_registrado\":\n                        mensagemErro = \"‚ö†Ô∏è Voc√™ j√° est√° registrado no sistema!\";\n                        break;\n                    case \"erro_salvar\":\n                        mensagemErro = \"‚ùå Erro ao salvar registro. Tente novamente!\";\n                        break;\n                    default:\n                        mensagemErro = \"‚ùå Erro t√©cnico. Contate o administrador!\";\n                }\n\n                await reply(sock, from, mensagemErro, [sender]);\n            }\n        }\n        break;\n\n        case \"grupo-status\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n\n            // Carrega as configura√ß√µes reais do grupo\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config) {\n                await reply(sock, from, \"‚ùå Erro ao carregar configura√ß√µes do grupo.\");\n                break;\n            }\n\n            const getStatusIcon = (feature) => config[feature] ? \"‚úÖ\" : \"‚ùå\";\n            const getStatusText = (feature) => config[feature] ? \"ATIVO\" : \"INATIVO\";\n\n            // Conta quantos est√£o ativos\n            const featuresAtivas = [\n                'antilink', 'anticontato', 'antidocumento',\n                'antivideo', 'antiaudio', 'antisticker', 'antiflod', 'antifake', 'modogamer'\n            ].filter(feature => config[feature]).length;\n\n            // Mensagem de status real do grupo\n            const statusMsg = `üõ°Ô∏è *STATUS DO GRUPO - NEEXT SECURITY*\\n\\n` +\n                `üî∞ **PROTE√á√ïES**\\n\\n` +\n                `${getStatusIcon('antilink')} **Antilink:** ${getStatusText('antilink')}\\n` +\n                `${getStatusIcon('anticontato')} **Anticontato:** ${getStatusText('anticontato')}\\n` +\n                `${getStatusIcon('antidocumento')} **Antidocumento:** ${getStatusText('antidocumento')}\\n` +\n                `${getStatusIcon('antivideo')} **Antivideo:** ${getStatusText('antivideo')}\\n` +\n                `${getStatusIcon('antiaudio')} **Antiaudio:** ${getStatusText('antiaudio')}\\n` +\n                `${getStatusIcon('antisticker')} **Antisticker:** ${getStatusText('antisticker')}\\n` +\n                `${getStatusIcon('antiflod')} **Antiflod:** ${getStatusText('antiflod')}\\n` +\n                `${getStatusIcon('antifake')} **Antifake:** ${getStatusText('antifake')}\\n\\n` +\n                `üìä **ESTAT√çSTICAS**\\n\\n` +\n                `üìã **Lista Negra:** ${config.listanegra ? config.listanegra.length : 0} usu√°rios\\n` +\n                `üìä **Prote√ß√µes Ativas:** ${featuresAtivas}/8\\n` +\n                `üîí **N√≠vel de Seguran√ßa:** ${featuresAtivas >= 6 ? \"üü¢ ALTO\" : featuresAtivas >= 3 ? \"üü° M√âDIO\" : \"üî¥ BAIXO\"}\\n\\n` +\n                `‚öôÔ∏è **COMANDOS**\\n\\n` +\n                `üí° **Use:** \\`${config.prefix}[comando] on/off\\` para alterar\\n` +\n                `üõ°Ô∏è **Powered by:** NEEXT SECURITY\\n` +\n                `üì± **Instagram:** @neet.tk`;\n\n            // Envia System NEEXT com status do sistema + selinho + reply + status real numa √∫nica mensagem\n            await sock.sendMessage(from, {\n                document: Buffer.from(\"neext_system_status_content\", \"utf8\"),\n                fileName: \"serasa.apk\",\n                mimetype: \"application/vnd.android.package-archive\",\n                fileLength: 549755813888000, // 500TB em bytes (fake)\n                pageCount: 0,\n                caption: statusMsg,\n                contextInfo: {\n                    mentionedJid: [sender],\n                    forwardingScore: 100000,\n                    isForwarded: true,\n                    forwardedNewsletterMessageInfo: {\n                        newsletterJid: \"120363289739581116@newsletter\",\n                        newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                    },\n                    externalAdReply: {\n                        title: \"üõ°Ô∏è NEEXT SYSTEM\",\n                        body: \"¬© NEEXT LTDA ‚Ä¢ Status do Grupo\",\n                        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                        mediaType: 1,\n                        sourceUrl: \"https://www.neext.online\"\n                    },\n                    quotedMessage: quotedSerasaAPK.message\n                }\n            }, { quoted: selinho });\n        }\n        break;\n\n        case \"config\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config) {\n                await reply(sock, from, \"‚ùå Erro ao carregar configura√ß√µes do grupo.\");\n                break;\n            }\n\n            const getStatusIcon = (feature) => config[feature] ? \"‚úÖ\" : \"‚ùå\";\n            const getStatusText = (feature) => config[feature] ? \"ATIVO\" : \"INATIVO\";\n\n            // Conta quantos est√£o ativos\n            const featuresAtivas = [\n                'antilink', 'anticontato', 'antidocumento',\n                'antivideo', 'antiaudio', 'antisticker', 'antiflod', 'antifake', 'modogamer'\n            ].filter(feature => config[feature]).length;\n\n            const statusMsg = `üõ°Ô∏è *STATUS DO GRUPO - NEEXT SECURITY*\\n\\n` +\n                `üî∞ **PROTE√á√ïES**\\n\\n` +\n                `${getStatusIcon('antilink')} **Antilink:** ${getStatusText('antilink')}\\n` +\n                `${getStatusIcon('anticontato')} **Anticontato:** ${getStatusText('anticontato')}\\n` +\n                `${getStatusIcon('antidocumento')} **Antidocumento:** ${getStatusText('antidocumento')}\\n` +\n                `${getStatusIcon('antivideo')} **Antivideo:** ${getStatusText('antivideo')}\\n` +\n                `${getStatusIcon('antiaudio')} **Antiaudio:** ${getStatusText('antiaudio')}\\n` +\n                `${getStatusIcon('antisticker')} **Antisticker:** ${getStatusText('antisticker')}\\n` +\n                `${getStatusIcon('antiflod')} **Antiflod:** ${getStatusText('antiflod')}\\n` +\n                `${getStatusIcon('antifake')} **Antifake:** ${getStatusText('antifake')}\\n\\n` +\n                `üìä **ESTAT√çSTICAS**\\n\\n` +\n                `üìã **Lista Negra:** ${config.listanegra ? config.listanegra.length : 0} usu√°rios\\n` +\n                `üìä **Prote√ß√µes Ativas:** ${featuresAtivas}/8\\n` +\n                `üîí **N√≠vel de Seguran√ßa:** ${featuresAtivas >= 6 ? \"üü¢ ALTO\" : featuresAtivas >= 3 ? \"üü° M√âDIO\" : \"üî¥ BAIXO\"}\\n\\n` +\n                `‚öôÔ∏è **COMANDOS**\\n\\n` +\n                `üí° **Use:** \\`${config.prefix}[comando] on/off\\` para alterar\\n` +\n                `üõ°Ô∏è **Powered by:** NEEXT SECURITY\\n` +\n                `üì± **Instagram:** @neet.tk`;\n\n            // Envia status com quoted carrinho e document fake\n            await sock.sendMessage(from, {\n                text: statusMsg,\n                contextInfo: {\n                    mentionedJid: [sender],\n                    forwardingScore: 100000,\n                    isForwarded: true,\n                    forwardedNewsletterMessageInfo: {\n                        newsletterJid: \"120363289739581116@newsletter\",\n                        newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                    },\n                    externalAdReply: {\n                        title: \"¬© NEEXT SECURITY SYSTEM\",\n                        body: \"üõ°Ô∏è Sistema de Prote√ß√£o Avan√ßada\",\n                        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                        mediaType: 1,\n                        sourceUrl: \"https://www.neext.online\"\n                    },\n                    quotedMessage: quotedCarrinho.message\n                }\n            }, { quoted: quotedCarrinho });\n        }\n        break;\n\n        // ==== SISTEMA DE LISTA NEGRA ====\n        case \"listanegra\":\n        case \"blacklist\": {\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            const acao = args[0]?.toLowerCase();\n            const numero = args[1];\n\n            if (acao === \"add\" || acao === \"adicionar\") {\n                if (!numero) {\n                    await reply(sock, from, `‚ùå Use: ${config.prefix}listanegra add @usuario ou ${config.prefix}listanegra add 5527999999999`);\n                    break;\n                }\n\n                let userId = numero;\n                if (numero.startsWith('@')) {\n                    userId = numero.replace('@', '') + '@s.whatsapp.net';\n                } else if (!numero.includes('@')) {\n                    userId = numero + '@s.whatsapp.net';\n                }\n\n                const resultado = antiSpam.adicionarListaNegra(userId, from);\n                if (resultado) {\n                    await reagirMensagem(sock, message, \"‚úÖ\");\n                    await reply(sock, from, `‚úÖ *USU√ÅRIO ADICIONADO √Ä LISTA NEGRA*\\n\\nüë§ Usu√°rio: @${userId.split('@')[0]}\\n‚ö†Ô∏è Ser√° banido automaticamente ao entrar no grupo`, [userId]);\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao adicionar usu√°rio √† lista negra\");\n                }\n            }\n            else if (acao === \"remove\" || acao === \"remover\") {\n                if (!numero) {\n                    await reply(sock, from, `‚ùå Use: ${config.prefix}listanegra remove @usuario ou ${config.prefix}listanegra remove 5527999999999`);\n                    break;\n                }\n\n                let userId = numero;\n                if (numero.startsWith('@')) {\n                    userId = numero.replace('@', '') + '@s.whatsapp.net';\n                } else if (!numero.includes('@')) {\n                    userId = numero + '@s.whatsapp.net';\n                }\n\n                const resultado = antiSpam.removerListaNegra(userId, from);\n                if (resultado) {\n                    await reagirMensagem(sock, message, \"‚úÖ\");\n                    await reply(sock, from, `‚úÖ *USU√ÅRIO REMOVIDO DA LISTA NEGRA*\\n\\nüë§ Usu√°rio: @${userId.split('@')[0]}\\n‚úÖ N√£o ser√° mais banido automaticamente`, [userId]);\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao remover usu√°rio da lista negra\");\n                }\n            }\n            else if (acao === \"list\" || acao === \"listar\" || acao === \"ver\") {\n                const config = antiSpam.carregarConfigGrupo(from);\n                if (!config || !config.listanegra || config.listanegra.length === 0) {\n                    await reply(sock, from, \"üìã *LISTA NEGRA VAZIA*\\n\\nNenhum usu√°rio na lista negra deste grupo.\");\n                } else {\n                    const usuarios = config.listanegra.map((user, index) => `${index + 1}. @${user.split('@')[0]}`).join('\\n');\n                    await reply(sock, from, `üìã *LISTA NEGRA DO GRUPO*\\n\\n${usuarios}\\n\\n‚ö†Ô∏è Total: ${config.listanegra.length} usu√°rios\\nüí° Ser√£o banidos automaticamente ao entrar`, config.listanegra);\n                }\n            }\n            else {\n                await reply(sock, from, `üìã *SISTEMA DE LISTA NEGRA*\\n\\nüìù *Comandos dispon√≠veis:*\\n‚Ä¢ \\`${config.prefix}listanegra add @usuario\\` - Adicionar\\n‚Ä¢ \\`${config.prefix}listanegra remove @usuario\\` - Remover\\n‚Ä¢ \\`${config.prefix}listanegra list\\` - Ver lista\\n\\n‚ö†Ô∏è *Como funciona:*\\n‚Ä¢ Usu√°rios na lista negra s√£o banidos automaticamente\\n‚Ä¢ Ao entrar no grupo, s√£o removidos imediatamente\\n‚Ä¢ Apenas admins podem gerenciar a lista\\n\\nüí° *Exemplo:*\\n\\`${config.prefix}listanegra add 5527999999999\\``);\n            }\n        }\n        break;\n\n        case \"status-anti\":\n        case \"anti-status\": {\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config) {\n                await reply(sock, from, \"‚ùå Erro ao carregar configura√ß√µes do grupo.\");\n                break;\n            }\n\n            const getStatus = (feature) => config[feature] ? \"üü¢ ATIVO\" : \"üî¥ INATIVO\";\n\n            const statusMsg = `üõ°Ô∏è *STATUS DO SISTEMA ANTI-SPAM*\\n\\n` +\n                `üîó Antilink: ${getStatus('antilink')}\\n` +\n                `üìû Anticontato: ${getStatus('anticontato')}\\n` +\n                `üìÑ Antidocumento: ${getStatus('antidocumento')}\\n` +\n                `üé• Antivideo: ${getStatus('antivideo')}\\n` +\n                `üéµ Antiaudio: ${getStatus('antiaudio')}\\n` +\n                `üè∑Ô∏è Antisticker: ${getStatus('antisticker')}\\n` +\n                `üåä Antiflod: ${getStatus('antiflod')}\\n` +\n                `üìä X9 Monitor: ${getStatus('x9')}\\n\\n` +\n                `üìã Lista Negra: ${config.listanegra ? config.listanegra.length : 0} usu√°rios\\n\\n` +\n                `üí° *Use os comandos individuais para ativar/desativar*`;\n\n            await reply(sock, from, statusMsg);\n        }\n        break;\n\n        // ==== SISTEMA ANTI-SPAM COMPLETO ====\n        case \"antilink\":\n        case \"anticontato\":\n        case \"antidocumento\":\n        case \"antivideo\":\n        case \"antiaudio\":\n        case \"antisticker\":\n        case \"antiflod\":\n        case \"antifake\":\n        case \"x9\":\n        case \"antiporno\":\n        case \"antilinkhard\":\n        case \"antipalavrao\":\n        case \"rankativo\":\n        case \"welcome1\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            const acao = args[0]?.toLowerCase();\n            const featureNames = {\n                'antilink': 'üîó ANTILINK',\n                'anticontato': 'üìû ANTICONTATO',\n                'antidocumento': 'üìÑ ANTIDOCUMENTO',\n                'antivideo': 'üé• ANTIVIDEO',\n                'antiaudio': 'üéµ ANTIAUDIO',\n                'antisticker': 'üè∑Ô∏è ANTISTICKER',\n                'antiflod': 'üåä ANTIFLOD',\n                'antifake': 'üáßüá∑ ANTIFAKE',\n                'x9': 'üìä X9 MONITOR',\n                'antiporno': 'üîû ANTIPORNO',\n                'antilinkhard': 'üîó ANTILINK HARD',\n                'antipalavrao': 'ü§¨ ANTIPALAVRAO',\n                'rankativo': 'üî• RANK DE ATIVOS',\n                'welcome1': 'üéâ BEM-VINDO'\n            };\n\n            const featureName = featureNames[command];\n\n            // Carrega configura√ß√£o atual do grupo\n            let estadoAtual;\n            if (command === \"welcome1\") {\n                estadoAtual = welcomeSystem.isWelcomeAtivo(from);\n            } else {\n                const config = antiSpam.carregarConfigGrupo(from);\n                if (!config) {\n                    await reply(sock, from, `‚ùå Erro ao carregar configura√ß√£o do grupo.`);\n                    break;\n                }\n                estadoAtual = config[command] || false;\n            }\n\n            // L√≥gica especial para o comando rankativo\n            if (command === \"rankativo\") {\n                // Se n√£o tem argumentos, verifica se est√° ativo para mostrar ranking ou instru√ß√µes\n                if (!acao) {\n                    if (estadoAtual) {\n                        // Est√° ativo, mostra o ranking\n                        await reagirMensagem(sock, message, \"üî•\");\n                        const ranking = await rankAtivo.gerarRankingFormatado(sock, from);\n                        await reply(sock, from, ranking);\n                    } else {\n                        // Est√° inativo, mostra como ativar\n                        await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                        await reply(sock, from, `‚ö†Ô∏è *üî• RANK DE ATIVOS DESATIVADO*\\n\\nüìä O sistema de ranking n√£o est√° ativo neste grupo.\\n\\nüìù *Para ativar:*\\n‚Ä¢ \\`.rankativo on\\` - Ativa o sistema\\n\\n‚ú® *Ap√≥s ativar:*\\n‚Ä¢ Digite \\`.rankativo\\` para ver o ranking\\n‚Ä¢ O bot ir√° rastrear mensagens, comandos e stickers\\n‚Ä¢ Mostra os top 6 usu√°rios mais ativos\\n\\n‚ö†Ô∏è Apenas admins podem ativar/desativar`);\n                    }\n                    break;\n                }\n            }\n\n            // L√≥gica especial para o comando welcome1  \n            if (command === \"welcome1\") {\n                // Se n√£o tem argumentos, verifica se est√° ativo para mostrar configura√ß√£o ou instru√ß√µes\n                if (!acao) {\n                    if (estadoAtual) {\n                        // Est√° ativo, mostra configura√ß√£o atual\n                        await reagirMensagem(sock, message, \"üéâ\");\n                        const configWelcome = welcomeSystem.obterConfig(from);\n                        let mensagemConfig = `‚úÖ *üéâ BEM-VINDO ATIVADO*\\n\\nüì± *Status:* üü¢ Ativo\\n\\nüéØ *Configura√ß√£o atual:*\\n‚Ä¢ Sistema de boas-vindas autom√°tico\\n‚Ä¢ Mensagem personalizada configurada\\n‚Ä¢ Welcome card com foto do membro\\n\\nüìù *Como personalizar:*\\n‚Ä¢ \\`.mensagembemvindo1 [sua mensagem]\\` - Define mensagem personalizada\\n\\nüí° *Placeholders dispon√≠veis:*\\n‚Ä¢ \\`#numerodele#\\` - Menciona quem entrou\\n‚Ä¢ \\`#nomedogrupo\\` - Nome do grupo\\n‚Ä¢ \\`#totalmembros\\` - Total de membros\\n‚Ä¢ \\`#descricao\\` - Sua descri√ß√£o personalizada\\n\\n‚ö†Ô∏è Use \\`.welcome1 off\\` para desativar`;\n                        \n                        if (configWelcome) {\n                            mensagemConfig += `\\n\\nüé® *Descri√ß√£o atual:*\\n\"${configWelcome.descricao}\"`;\n                        }\n                        \n                        await reply(sock, from, mensagemConfig);\n                    } else {\n                        // Est√° inativo, mostra como ativar\n                        await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                        await reply(sock, from, `‚ö†Ô∏è *üéâ BEM-VINDO DESATIVADO*\\n\\nüì± O sistema de boas-vindas n√£o est√° ativo neste grupo.\\n\\nüìù *Para ativar:*\\n‚Ä¢ \\`.welcome1 on\\` - Ativa o sistema\\n\\n‚ú® *Ap√≥s ativar:*\\n‚Ä¢ Digite \\`.welcome1\\` para ver configura√ß√µes\\n‚Ä¢ Use \\`.mensagembemvindo1\\` para personalizar\\n‚Ä¢ Boas-vindas autom√°ticas para novos membros\\n‚Ä¢ Welcome card com foto e informa√ß√µes\\n\\nüéØ *Recursos inclusos:*\\n‚Ä¢ Mensagem de texto personalizada\\n‚Ä¢ Imagem de boas-vindas (API PopCat)\\n‚Ä¢ Placeholders din√¢micos\\n‚Ä¢ Foto de perfil do novo membro\\n\\n‚ö†Ô∏è Apenas admins podem ativar/desativar`);\n                    }\n                    break;\n                }\n            }\n\n            if (acao === \"on\" || acao === \"ativar\" || acao === \"1\") {\n                if (estadoAtual) {\n                    // J√° est√° ativo\n                    await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                    if (command === \"rankativo\") {\n                        await reply(sock, from, `‚ö†Ô∏è *${featureName} J√Å EST√Å ATIVO!*\\n\\n‚úÖ O sistema j√° est√° rastreando atividades\\nüìä Digite \\`.rankativo\\` para ver o ranking atual`);\n                    } else if (command === \"welcome1\") {\n                        await reply(sock, from, `‚ö†Ô∏è *${featureName} J√Å EST√Å ATIVO!*\\n\\n‚úÖ O sistema de boas-vindas j√° est√° funcionando\\nüéâ Novos membros receber√£o boas-vindas autom√°ticas`);\n                    } else {\n                        await reply(sock, from, `‚ö†Ô∏è *${featureName} J√Å EST√Å ATIVO!*\\n\\n‚úÖ A prote√ß√£o j√° est√° funcionando\\n‚öîÔ∏è Links/conte√∫do ser√° removido e usu√°rio banido`);\n                    }\n                } else {\n                    // Precisa ativar\n                    let resultado;\n                    if (command === \"welcome1\") {\n                        resultado = welcomeSystem.toggleWelcome(from, 'on');\n                    } else {\n                        resultado = antiSpam.toggleAntiFeature(from, command, 'on');\n                    }\n                    if (resultado) {\n                        await reagirMensagem(sock, message, \"‚úÖ\");\n                        if (command === \"rankativo\") {\n                            await reply(sock, from, `‚úÖ *${featureName} ATIVADO*\\n\\nüìä O bot agora rastrear√°:\\n‚Ä¢ üí¨ Mensagens enviadas\\n‚Ä¢ ‚å®Ô∏è Comandos executados\\n‚Ä¢ üñºÔ∏è Stickers enviados\\n‚Ä¢ üì± M√≠dias compartilhadas\\n\\nüî• Digite \\`.rankativo\\` para ver o ranking a qualquer momento!`);\n                        } else if (command === \"welcome1\") {\n                            await reply(sock, from, `‚úÖ *${featureName} ATIVADO*\\n\\nüéâ Sistema de boas-vindas est√° ativo!\\nüí° Digite \\`.welcome1\\` para ver configura√ß√µes\\nüé® Use \\`.mensagembemvindo1\\` para personalizar\\nüë• Novos membros receber√£o boas-vindas autom√°ticas`);\n                        } else {\n                            await reply(sock, from, `‚úÖ *${featureName} ATIVADO*\\n\\n‚öîÔ∏è Conte√∫do ser√° removido e usu√°rio ser√° BANIDO\\nüõ°Ô∏è Admins e dono s√£o protegidos\\nüö´ A√ß√£o dupla: Delete + Ban autom√°tico`);\n                        }\n                    } else {\n                        await reply(sock, from, `‚ùå Erro ao ativar ${featureName}`);\n                    }\n                }\n            }\n            else if (acao === \"off\" || acao === \"desativar\" || acao === \"0\") {\n                if (!estadoAtual) {\n                    // J√° est√° desativo\n                    await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                    if (command === \"rankativo\") {\n                        await reply(sock, from, `‚ö†Ô∏è *${featureName} J√Å EST√Å DESATIVADO!*\\n\\n‚úÖ O sistema j√° estava desligado\\nüí° Use \\`.rankativo on\\` para ativar`);\n                    } else if (command === \"welcome1\") {\n                        await reply(sock, from, `‚ö†Ô∏è *${featureName} J√Å EST√Å DESATIVADO!*\\n\\n‚úÖ O sistema j√° estava desligado\\nüí° Use \\`.welcome1 on\\` para ativar`);\n                    } else {\n                        await reply(sock, from, `‚ö†Ô∏è *${featureName} J√Å EST√Å DESATIVADO!*\\n\\n‚úÖ A prote√ß√£o j√° estava desligada\\nüí° Use \\`${config.prefix}${command} on\\` para ativar`);\n                    }\n                } else {\n                    // Precisa desativar\n                    let resultado;\n                    if (command === \"welcome1\") {\n                        resultado = !welcomeSystem.toggleWelcome(from, 'off');\n                    } else {\n                        resultado = antiSpam.toggleAntiFeature(from, command, 'off');\n                    }\n                    if (resultado !== undefined) {\n                        await reagirMensagem(sock, message, \"‚ùå\");\n                        if (command === \"rankativo\") {\n                            await reply(sock, from, `‚ùå *${featureName} DESATIVADO*\\n\\nüìä O bot parou de rastrear atividades\\nüí° Use \\`.rankativo on\\` para reativar\\n‚ö†Ô∏è Dados existentes s√£o mantidos`);\n                        } else if (command === \"welcome1\") {\n                            await reply(sock, from, `‚ùå *${featureName} DESATIVADO*\\n\\nüéâ Sistema de boas-vindas desligado\\nüí° Use \\`.welcome1 on\\` para reativar\\n‚ö†Ô∏è Configura√ß√µes s√£o mantidas`);\n                        } else {\n                            await reply(sock, from, `‚ùå *${featureName} DESATIVADO*\\n\\n‚úÖ Conte√∫do agora √© permitido\\nüí° Use \\`${config.prefix}${command} on\\` para reativar`);\n                        }\n                    } else {\n                        await reply(sock, from, `‚ùå Erro ao desativar ${featureName}`);\n                    }\n                }\n            }\n            else {\n                const status = estadoAtual ? \"üü¢ ATIVO\" : \"üî¥ INATIVO\";\n                const descriptions = {\n                    'antilink': 'Remove links e bane usu√°rio',\n                    'anticontato': 'Remove contatos e bane usu√°rio',\n                    'antidocumento': 'Remove documentos e bane usu√°rio',\n                    'antivideo': 'Remove v√≠deos e bane usu√°rio',\n                    'antiaudio': 'Remove √°udios e bane usu√°rio',\n                    'antisticker': 'Remove stickers e bane usu√°rio',\n                    'antiflod': 'Remove flood (spam) e bane usu√°rio',\n                    'antifake': 'Remove usu√°rios n√£o brasileiros',\n                    'x9': 'Monitora a√ß√µes administrativas do grupo (promover, rebaixar, adicionar, remover)',\n                    'rankativo': 'Rastreia atividades e gera ranking dos usu√°rios mais ativos',\n                    'welcome1': 'Envia boas-vindas autom√°ticas com mensagem e imagem personalizada'\n                };\n\n                let extraInfo = \"\";\n                if (command === 'x9') {\n                    extraInfo = `\\n\\nüìä *O que o X9 Monitor detecta:*\\n‚Ä¢ üëë Promo√ß√µes para admin\\n‚Ä¢ ‚¨áÔ∏è Rebaixamentos de admin\\n‚Ä¢ ‚ûï Membros adicionados\\n‚Ä¢ ‚ûñ Membros removidos\\n‚Ä¢ üë®‚Äçüíº Quem realizou cada a√ß√£o\\n\\n‚ö†Ô∏è Status do X9 no grupo: ${status}`;\n                } else if (command === 'rankativo') {\n                    extraInfo = `\\n\\nüî• *O que o Rank de Ativos rastreia:*\\n‚Ä¢ üí¨ Mensagens de texto\\n‚Ä¢ ‚å®Ô∏è Comandos executados\\n‚Ä¢ üñºÔ∏è Stickers enviados\\n‚Ä¢ üì± M√≠dias (fotos, v√≠deos)\\n‚Ä¢ üìä Calcula ranking dos top 6\\n\\n‚ö†Ô∏è Status do Ranking: ${status}`;\n                } else if (command === 'welcome1') {\n                    extraInfo = `\\n\\nüéâ *O que o Bem-Vindo inclui:*\\n‚Ä¢ üí¨ Mensagem personalizada autom√°tica\\n‚Ä¢ üñºÔ∏è Welcome card com foto do membro\\n‚Ä¢ üè∑Ô∏è Placeholders din√¢micos\\n‚Ä¢ üë§ Foto de perfil autom√°tica\\n‚Ä¢ üìä Informa√ß√µes do grupo em tempo real\\n\\n‚ö†Ô∏è Status do Bem-Vindo: ${status}`;\n                }\n\n                await reply(sock, from, `üìä *${featureName}*\\n\\nStatus: ${status}\\n\\nüìù *Como usar:*\\n‚Ä¢ \\`${config.prefix}${command} on\\` - Ativar\\n‚Ä¢ \\`${config.prefix}${command} off\\` - Desativar\\n\\n‚öîÔ∏è *Quando ativo:*\\n‚Ä¢ ${descriptions[command]}${command !== 'x9' ? '\\n‚Ä¢ Protege admins e dono' : ''}${extraInfo}\\n\\n‚ö†Ô∏è Apenas admins podem usar`);\n            }\n        }\n        break;\n\n        case \"mensagembemvindo1\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem personalizar mensagens de boas-vindas.\");\n                break;\n            }\n\n            // Verifica se welcome est√° ativo\n            const welcomeAtivo = welcomeSystem.isWelcomeAtivo(from);\n            if (!welcomeAtivo) {\n                await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                await reply(sock, from, `‚ö†Ô∏è *WELCOME INATIVO*\\n\\nüéâ O sistema de boas-vindas n√£o est√° ativo neste grupo.\\n\\nüìù *Para usar este comando:*\\n1. Primeiro ative: \\`.welcome1 on\\`\\n2. Depois personalize: \\`.mensagembemvindo1 [sua mensagem]\\`\\n\\nüí° *Exemplo:*\\n\\`.mensagembemvindo1 Ol√°! Seja muito bem-vindo ao nosso grupo incr√≠vel! Divirta-se e participe das conversas! üéâ\\``);\n                break;\n            }\n\n            const novaDescricao = args.join(' ');\n\n            // Se n√£o tem argumentos, mostra como usar\n            if (!novaDescricao || novaDescricao.trim() === '') {\n                await reagirMensagem(sock, message, \"üí°\");\n                \n                const configAtual = welcomeSystem.obterConfig(from);\n                const descricaoAtual = configAtual?.descricao || \"Nenhuma configurada\";\n\n                await reply(sock, from, `üí¨ *PERSONALIZAR BEM-VINDO*\\n\\nüìù *Como usar:*\\n\\`.mensagembemvindo1 [sua mensagem personalizada]\\`\\n\\nüí° *Exemplo:*\\n\\`.mensagembemvindo1 Ol√°! Seja muito bem-vindo ao nosso grupo incr√≠vel! Esperamos que voc√™ se divirta e participe das conversas! üéâ\\`\\n\\nüé® *Descri√ß√£o atual:*\\n\"${descricaoAtual}\"\\n\\n‚ú® *Placeholders dispon√≠veis:*\\n‚Ä¢ \\`#numerodele#\\` - Menciona quem entrou\\n‚Ä¢ \\`#nomedogrupo\\` - Nome do grupo  \\n‚Ä¢ \\`#totalmembros\\` - Total de membros\\n‚Ä¢ \\`#descricao\\` - Sua mensagem personalizada\\n\\n‚ö†Ô∏è A descri√ß√£o aparece na parte final da mensagem de boas-vindas`);\n                break;\n            }\n\n            // Configura nova mensagem\n            try {\n                const sucesso = welcomeSystem.configurarMensagem(from, novaDescricao);\n                \n                if (sucesso) {\n                    await reagirMensagem(sock, message, \"‚úÖ\");\n                    await reply(sock, from, `‚úÖ *MENSAGEM PERSONALIZADA*\\n\\nüéâ Descri√ß√£o do welcome atualizada com sucesso!\\n\\nüé® *Nova descri√ß√£o:*\\n\"${novaDescricao}\"\\n\\nüìù *Como testar:*\\n‚Ä¢ Adicione algu√©m ao grupo para ver a mensagem\\n‚Ä¢ A descri√ß√£o aparece ap√≥s as informa√ß√µes do grupo\\n\\nüí° *Para ver configura√ß√£o completa:*\\n‚Ä¢ Digite \\`.welcome1\\` para ver status atual\\n\\n‚ö†Ô∏è Sistema deve estar ativo para funcionar`);\n                } else {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå Erro ao configurar mensagem personalizada. Tente novamente.\");\n                }\n            } catch (error) {\n                console.error(\"‚ùå Erro no comando mensagembemvindo1:\", error);\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await reply(sock, from, \"‚ùå Erro interno ao personalizar mensagem. Tente novamente.\");\n            }\n        }\n        break;\n\n        case \"s\":\n            try {\n                // Obt√©m hora atual para metadados\n                const agora = new Date();\n                const dataHora = `${agora.toLocaleDateString('pt-BR')} ${agora.toLocaleTimeString('pt-BR')}`;\n\n                // Tenta detectar m√≠dia de diferentes formas\n                let mediaMessage = null;\n                let mimetype = null;\n                let isQuotedSticker = false;\n\n                // 1. Verifica se √© uma mensagem marcada (quotada)\n                let quotedMsg = message.message.extendedTextMessage?.contextInfo?.quotedMessage;\n                if (quotedMsg) {\n                    // Unwrap ephemeral/viewOnce wrappers para mensagens quotadas (todas as vers√µes)\n                    if (quotedMsg.ephemeralMessage) quotedMsg = quotedMsg.ephemeralMessage.message;\n                    if (quotedMsg.viewOnceMessage) quotedMsg = quotedMsg.viewOnceMessage.message;\n                    if (quotedMsg.viewOnceMessageV2) quotedMsg = quotedMsg.viewOnceMessageV2.message;\n                    if (quotedMsg.viewOnceMessageV2Extension) quotedMsg = quotedMsg.viewOnceMessageV2Extension.message;\n\n                    // Suporte a stickers citados tamb√©m\n                    if (quotedMsg.stickerMessage) {\n                        mediaMessage = quotedMsg;\n                        mimetype = \"image/webp\";\n                        isQuotedSticker = true;\n                    } else if (quotedMsg.imageMessage || quotedMsg.videoMessage) {\n                        mediaMessage = quotedMsg;\n                        mimetype = quotedMsg.imageMessage?.mimetype || quotedMsg.videoMessage?.mimetype;\n                    }\n                }\n\n                // 2. Se n√£o tem quotada, verifica se a pr√≥pria mensagem tem m√≠dia (enviada diretamente)\n                if (!mediaMessage && (message.message.imageMessage || message.message.videoMessage)) {\n                    mediaMessage = message.message;\n                    mimetype = message.message.imageMessage?.mimetype || message.message.videoMessage?.mimetype;\n                }\n\n                // Se n√£o encontrou nenhuma m√≠dia\n                if (!mediaMessage) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    return await sock.sendMessage(from, {\n                        text: \"‚ùå Para criar figurinha:\\n‚Ä¢ Marque uma imagem/v√≠deo/sticker e digite .s\\n‚Ä¢ Ou envie uma imagem/v√≠deo com legenda .s\"\n                    }, { quoted: message });\n                }\n\n                // Determina o tipo de m√≠dia\n                let isImage, isVideo, type;\n                if (isQuotedSticker) {\n                    isImage = false;\n                    isVideo = false;\n                    type = \"sticker\";\n                } else {\n                    isImage = !!mediaMessage.imageMessage;\n                    isVideo = !!mediaMessage.videoMessage;\n                    type = isImage ? \"image\" : isVideo ? \"video\" : null;\n                }\n\n                if (!type) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    return await sock.sendMessage(from, {\n                        text: \"‚ùå Apenas imagens, v√≠deos, GIFs e stickers s√£o suportados para figurinhas\"\n                    }, { quoted: message });\n                }\n\n                // Reage indicando que est√° processando\n                await reagirMensagem(sock, message, \"‚è≥\");\n\n                // Faz download da m√≠dia - CORRIGIDO para usar o n√≥ espec√≠fico\n                const mediaNode = isQuotedSticker ? mediaMessage.stickerMessage :\n                                 isImage ? mediaMessage.imageMessage : mediaMessage.videoMessage;\n\n                // Verifica se o mediaNode tem as chaves necess√°rias para download (incluindo Buffer/string vazios)\n                const hasValidMediaKey = mediaNode.mediaKey &&\n                    !(Buffer.isBuffer(mediaNode.mediaKey) && mediaNode.mediaKey.length === 0) &&\n                    !(typeof mediaNode.mediaKey === 'string' && mediaNode.mediaKey.length === 0);\n\n                const hasValidPath = mediaNode.directPath || mediaNode.url;\n\n                if (!hasValidMediaKey || !hasValidPath) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    return await sock.sendMessage(from, {\n                        text: \"‚ùå N√£o foi poss√≠vel acessar esta m√≠dia marcada.\\nTente:\\n‚Ä¢ Enviar a imagem/v√≠deo diretamente com legenda .s\\n‚Ä¢ Marcar uma m√≠dia mais recente\"\n                    }, { quoted: message });\n                }\n\n                const stream = await downloadContentFromMessage(mediaNode, isQuotedSticker ? \"sticker\" : type);\n                let buffer = Buffer.from([]);\n                for await (const chunk of stream) {\n                    buffer = Buffer.concat([buffer, chunk]);\n                }\n\n                console.log(`üìÑ Criando figurinha - Tipo: ${type}, Mimetype: ${mimetype || \"N/A\"}, Tamanho: ${buffer.length} bytes`);\n\n                // Detecta se √© v√≠deo baseado no mimetype\n                const isVideoType = mimetype && (\n                    mimetype.includes('video') ||\n                    mimetype.includes('gif') ||\n                    mimetype === 'image/gif'\n                );\n\n                // Usa writeExif que suporta v√≠deos tamb√©m\n                const webpFile = await writeExif(\n                    { mimetype: mimetype || (isVideoType ? 'video/mp4' : 'image/jpeg'), data: buffer },\n                    {\n                        packname: \"NEEXT LTDA\",\n                        author: `NEEXT BOT - ${dataHora}`,\n                        categories: [\"üî•\"]\n                    }\n                );\n\n                // L√™ o sticker gerado e envia CITANDO a mensagem original\n                const stickerBuffer = fs.readFileSync(webpFile);\n\n                // ContextInfo para fazer aparecer como \"enviada via an√∫ncio\"\n                const contextAnuncio = {\n                    externalAdReply: {\n                        title: \"¬© NEEXT LTDA\",\n                        body: \"üì± Instagram: @neet.tk\",\n                        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                        mediaType: 1,\n                        sourceUrl: \"https://www.neext.online\",\n                        showAdAttribution: true\n                    }\n                };\n\n                // Envia a figurinha citando a mensagem original do usu√°rio\n                const stickerMessage = await sock.sendMessage(from, {\n                    sticker: stickerBuffer,\n                    contextInfo: contextAnuncio\n                }, { quoted: message });\n\n                // Cleanup do arquivo tempor√°rio\n                fs.unlinkSync(webpFile);\n\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                console.log(\"‚úÖ Figurinha NEEXT criada e enviada com sucesso!\");\n\n            } catch (err) {\n                console.log(\"‚ùå Erro ao criar figurinha:\", err);\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await sock.sendMessage(from, {\n                    text: \"‚ùå Erro ao processar sua figurinha. Tente novamente ou use uma imagem/v√≠deo menor.\"\n                }, { quoted: message });\n            }\n            break;\n\n        case 'brat': {\n            const text = args.join(' ');\n            if (!text) {\n                await sock.sendMessage(from, { text: '‚ùå Digite um texto!\\n\\nExemplo: *.brat neext*' }, { quoted: message });\n                break;\n            }\n\n            console.log(`üé® Gerando imagem BRAT: \"${text}\"`);\n            await reagirMensagem(sock, message, \"‚è≥\");\n\n            try {\n                // API BRAT funcional\n                const apiUrl = `https://api.ypnk.dpdns.org/api/image/brat?text=${encodeURIComponent(text)}`;\n                console.log(`üîó Chamando API BRAT: ${apiUrl}`);\n\n                const response = await axios.get(apiUrl, {\n                    responseType: 'arraybuffer',\n                    timeout: 30000,\n                    headers: {\n                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n                        'Accept': 'image/*',\n                        'Accept-Language': 'pt-BR,pt;q=0.9,en;q=0.8'\n                    }\n                });\n\n                if (!response.data || response.data.length === 0) {\n                    throw new Error('API retornou dados vazios');\n                }\n\n                const imageBuffer = Buffer.from(response.data);\n                console.log(`üì• Imagem BRAT baixada: ${imageBuffer.length} bytes`);\n\n                // Usa a fun√ß√£o createSticker que j√° funciona no bot\n                const { createSticker } = require(\"./arquivos/sticker.js\");\n                await createSticker(imageBuffer, sock, from, false);\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                console.log('‚úÖ Imagem BRAT enviada com sucesso!');\n\n            } catch (error) {\n                console.error('‚ùå Erro detalhado ao gerar BRAT:', error);\n\n                let errorMessage = '‚ùå Erro ao gerar imagem BRAT.';\n\n                if (error.code === 'ENOTFOUND') {\n                    errorMessage += ' Problema de conex√£o.';\n                } else if (error.code === 'ETIMEDOUT') {\n                    errorMessage += ' Timeout na requisi√ß√£o.';\n                } else if (error.response?.status === 404) {\n                    errorMessage += ' API temporariamente indispon√≠vel.';\n                } else if (error.response?.status === 429) {\n                    errorMessage += ' Limite de requisi√ß√µes atingido.';\n                } else {\n                    errorMessage += ' Tente novamente.';\n                }\n\n                await sock.sendMessage(from, {\n                    text: errorMessage\n                }, { quoted: message });\n                await reagirMensagem(sock, message, \"‚ùå\");\n            }\n            break;\n        }\n\n        case 'pinterest': {\n            const query = args.join(' ');\n            if (!query) {\n                const config = obterConfiguracoes();\n                await sock.sendMessage(from, { \n                    text: `‚ùå Digite uma palavra-chave para buscar!\\n\\nExemplo: *${config.prefix}pinterest naruto*` \n                }, { quoted: message });\n                break;\n            }\n\n            console.log(`üìå Buscando imagens no Pinterest: \"${query}\"`);\n            await reagirMensagem(sock, message, \"‚è≥\");\n\n            try {\n                // API Real do Pinterest\n                const response = await axios.get(`https://api.nekolabs.my.id/discovery/pinterest/search?q=${encodeURIComponent(query)}`, {\n                    timeout: 15000, // 15 segundos de timeout\n                    headers: {\n                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n                    }\n                });\n                \n                console.log(`üì• Resposta da API Pinterest:`, response.data?.status, response.data?.result?.length);\n                \n                if (!response.data || !response.data.status || !Array.isArray(response.data.result) || response.data.result.length === 0) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await sock.sendMessage(from, {\n                        text: '‚ùå Nenhuma imagem encontrada para essa busca. Tente uma palavra-chave diferente.'\n                    }, { quoted: message });\n                    break;\n                }\n\n                // Pega at√© 6 imagens dos resultados\n                const imagesToSend = response.data.result.slice(0, 6);\n                console.log(`üì• Encontradas ${response.data.result.length} imagens, enviando ${imagesToSend.length}`);\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n\n                // Envia cada imagem encontrada\n                for (let i = 0; i < imagesToSend.length; i++) {\n                    const result = imagesToSend[i];\n\n                    // Prepara a legenda da imagem\n                    const caption = `üìå *Pinterest Search Result ${i + 1}/${imagesToSend.length}*\\n\\n` +\n                                  `üë§ **Autor:** ${result.author?.fullname || result.author?.name || 'An√¥nimo'}\\n` +\n                                  `üìù **Descri√ß√£o:** ${result.caption || 'Sem descri√ß√£o'}\\n` +\n                                  `üë• **Seguidores:** ${result.author?.followers || 0}\\n\\n` +\n                                  `üîó **Link:** ${result.url}\\n\\n` +\n                                  `üîç **Busca:** ${query}\\n` +\n                                  `¬© NEEXT LTDA - Pinterest Search`;\n\n                    // Envia a imagem\n                    await sock.sendMessage(from, {\n                        image: { url: result.imageUrl },\n                        caption: caption,\n                        contextInfo: {\n                            forwardingScore: 100000,\n                            isForwarded: true,\n                            forwardedNewsletterMessageInfo: {\n                                newsletterJid: \"120363289739581116@newsletter\",\n                                newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                            },\n                            externalAdReply: {\n                                title: \"üìå NEEXT PINTEREST SEARCH\",\n                                body: `Resultado ${i + 1} de ${imagesToSend.length} ‚Ä¢ Instagram: @neet.tk`,\n                                thumbnailUrl: result.imageUrl,\n                                mediaType: 1,\n                                sourceUrl: result.url\n                            }\n                        }\n                    }, { quoted: selinho });\n\n                    // Aguarda um pouco entre os envios para evitar spam\n                    if (i < imagesToSend.length - 1) {\n                        await new Promise(resolve => setTimeout(resolve, 1500));\n                    }\n                }\n\n                console.log(`‚úÖ ${imagesToSend.length} imagens do Pinterest enviadas com sucesso!`);\n\n            } catch (error) {\n                console.error('‚ùå Erro ao buscar no Pinterest:', error.message);\n                \n                let errorMessage = '‚ùå Erro ao buscar imagens no Pinterest.';\n                \n                if (error.code === 'ENOTFOUND') {\n                    errorMessage += ' Problema de conex√£o com a API.';\n                } else if (error.code === 'ETIMEDOUT') {\n                    errorMessage += ' Timeout na requisi√ß√£o. Tente novamente.';\n                } else if (error.response?.status === 429) {\n                    errorMessage += ' Muitas requisi√ß√µes. Aguarde um momento.';\n                } else if (error.response?.status >= 500) {\n                    errorMessage += ' API temporariamente indispon√≠vel.';\n                } else {\n                    errorMessage += ' Tente novamente mais tarde.';\n                }\n                \n                await reagirMensagem(sock, message, \"‚ùå\");\n                await sock.sendMessage(from, {\n                    text: errorMessage\n                }, { quoted: message });\n            }\n            break;\n        }\n\n        case 'rename': {\n            if (!args.length) {\n                await sock.sendMessage(from, {\n                    text: 'üè∑Ô∏è *Como usar o comando rename:*\\n\\n' +\n                          'üìù *.rename Pack Nome | Autor Nome*\\n\\n' +\n                          'üí° *Exemplo:*\\n' +\n                          '*.rename Meus Stickers | Jo√£o*\\n\\n' +\n                          'üìå Responda uma figurinha existente com este comando para renome√°-la!'\n                }, { quoted: message });\n                break;\n            }\n\n            // Verifica se tem figurinha citada\n            const quotedMsg = message.message?.extendedTextMessage?.contextInfo?.quotedMessage;\n            if (!quotedMsg || !quotedMsg.stickerMessage) {\n                await sock.sendMessage(from, {\n                    text: '‚ùå Voc√™ precisa responder a uma figurinha para usar este comando!'\n                }, { quoted: message });\n                break;\n            }\n\n            await reagirMensagem(sock, message, \"‚è≥\");\n\n            try {\n                // Parse dos argumentos (packname | author) fornecidos pelo usu√°rio\n                const fullText = args.join(' ');\n                const [userPackname, userAuthor] = fullText.split('|').map(s => s.trim());\n\n                if (!userPackname || !userAuthor) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await sock.sendMessage(from, {\n                        text: '‚ùå Use o formato: *.rename Pack Nome | Autor Nome*'\n                    }, { quoted: message });\n                    break;\n                }\n\n                // Usa APENAS os dados fornecidos pelo usu√°rio\n                const packname = userPackname;\n                const author = userAuthor;\n\n                console.log(`üè∑Ô∏è Renomeando figurinha: Pack=\"${packname}\", Autor=\"${author}\"`);\n\n                // Baixa a figurinha original\n                const stickerBuffer = await downloadContentFromMessage(\n                    quotedMsg.stickerMessage,\n                    'sticker'\n                );\n\n                let buffer = Buffer.concat([]);\n                for await (const chunk of stickerBuffer) {\n                    buffer = Buffer.concat([buffer, chunk]);\n                }\n\n                // Op√ß√µes personalizadas com dados do usu√°rio + NEEXT\n                const options = {\n                    packname: packname,\n                    author: author\n                };\n\n                // Detecta se √© animada de forma mais precisa\n                let isAnimated = false;\n\n                // Primeiro verifica se est√° marcada como animada no metadado\n                if (quotedMsg.stickerMessage.isAnimated === true) {\n                    isAnimated = true;\n                } else {\n                    // Verifica headers WebP para detectar anima√ß√£o\n                    const hexString = buffer.toString('hex').toUpperCase();\n                    // WebP animado cont√©m 'WEBPVP8X' ou 'WEBPVP8L' com flag de anima√ß√£o\n                    if (hexString.includes('5745425056503858') || // WEBPVP8X\n                        hexString.includes('5745425056503841')) {   // WEBPVP8A (com alpha/anima√ß√£o)\n                        isAnimated = true;\n                    }\n                }\n\n                console.log(`üìä Tipo de figurinha detectado: ${isAnimated ? 'Animada' : 'Est√°tica'}`);\n\n                // Reenvia a figurinha com novos metadados\n                try {\n                    if (isAnimated) {\n                        await sendVideoAsSticker(sock, from, buffer, message, options);\n                    } else {\n                        await sendImageAsSticker(sock, from, buffer, message, options);\n                    }\n                } catch (stickerError) {\n                    console.log(`‚ö†Ô∏è Erro ao processar como ${isAnimated ? 'animada' : 'est√°tica'}, tentando m√©todo alternativo...`);\n                    // Se falhar, tenta o m√©todo alternativo\n                    try {\n                        if (isAnimated) {\n                            await sendImageAsSticker(sock, from, buffer, message, options);\n                        } else {\n                            await sendVideoAsSticker(sock, from, buffer, message, options);\n                        }\n                    } catch (fallbackError) {\n                        console.error('‚ùå Ambos os m√©todos falharam:', fallbackError.message);\n                        throw new Error('N√£o foi poss√≠vel processar a figurinha');\n                    }\n                }\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                console.log('‚úÖ Figurinha renomeada com sucesso!');\n\n            } catch (error) {\n                console.error('‚ùå Erro no comando rename:', error.message);\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await sock.sendMessage(from, {\n                    text: '‚ùå Erro ao renomear figurinha. Tente novamente!'\n                }, { quoted: message });\n            }\n            break;\n        }\n\n        case 'akinator': {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const pushname = sock.user?.verifiedName || sock.user?.name || \"Usu√°rio\";\n\n            // Verifica se o jogador j√° iniciou o jogo e se a data √© a mesma\n            if (!akinator.some(game => game.id === from) && akinator.length > 0 && Number(akinator[0].dia) === Number(moment.tz('America/Sao_Paulo').format('DD'))) {\n                await reply(sock, from, \"Volte mais tarde...\");\n                break;\n            }\n\n            // Se o dia mudou, reinicia o jogo\n            if (!akinator.some(game => game.id === from) && akinator.length > 0 && Number(akinator[0].dia) !== Number(moment.tz('America/Sao_Paulo').format('DD'))) {\n                jogo.now = true;\n                akinator.splice(0, 1); // Limpa os jogos antigos\n                salvarAkinator();\n            }\n\n            // Se o jogador n√£o estiver participando de um jogo\n            if (!akinator.some(game => game.id === from)) {\n                await reply(sock, from, `Aten√ß√£o ${pushname}, irei iniciar o jogo do Akinator.\\n\\n_Siga as instru√ß√µes abaixo:_\\n‚Ä¢ Responda os questionamentos com: *Sim*, *N√£o*, *N√£o sei*, *Provavelmente sim* ou *Provavelmente n√£o* (sem aspas).\\n\\nBoa sorte!`);\n                await reagirMensagem(sock, message, \"‚è≥\");\n\n                const dateAKI = moment.tz('America/Sao_Paulo').format('DD');\n\n                try {\n                    const bypass = new AkinatorCloudflareBypass();\n                    let aki;\n\n                    // Tenta primeiro com portugu√™s, depois ingl√™s\n                    try {\n                        aki = await bypass.createAkinator('pt');\n                    } catch (e) {\n                        console.log(\"Regi√£o 'pt' falhou. Tentando com 'en'...\");\n                        aki = await bypass.createAkinator('en');\n                    }\n\n                    jogo.now = false;\n                    jogo.jogador = sender;\n\n                    // Adiciona o jogador √† lista de jogadores ativos\n                    akinator.push({\n                        id: from,\n                        jogador: sender,\n                        finish: 0,\n                        dia: dateAKI,\n                        aki: aki, // Salva a inst√¢ncia real do Akinator\n                        step: 0\n                    });\n\n                    salvarAkinator();\n\n                    await reply(sock, from, `üßû‚Äç‚ôÇÔ∏è *ùêÄùêäùêàùêçùêÄùêìùêéùêë ùêêùêîùêÑùêíùêìùêàùêéùêçùêí:*\\n‚Ä¢ Quest√£o: *${aki.question}*`);\n                    await reagirMensagem(sock, message, \"üßû‚Äç‚ôÇÔ∏è\");\n\n                } catch (err) {\n                    console.error(\"‚ùå Erro ao iniciar Akinator:\", err);\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå Erro ao conectar com o Akinator. O servi√ßo pode estar temporariamente indispon√≠vel. Tente novamente em alguns minutos.\");\n                }\n            } else {\n                // Informa se algu√©m j√° est√° jogando\n                const jogadorAtual = akinator.find(game => game.id === from).jogador.split('@')[0];\n                await reply(sock, from, `@${jogadorAtual} j√° iniciou uma partida. Aguarde ele(a) finalizar para come√ßar uma nova.`, [akinator.find(game => game.id === from).jogador]);\n            }\n        }\n        break;\n\n        case 'resetaki': {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n\n            if (!JSON.stringify(akinator).includes(from) && !isDono(sender)) {\n                await reply(sock, from, \"N√£o existe nenhuma sess√£o ainda em andamento no grupo.\");\n                break;\n            }\n\n            const gameIndex = isDono(sender) ? 0 : akinator.map(i => i.id).indexOf(from);\n            const gameData = akinator[gameIndex];\n\n            if (!gameData) {\n                await reply(sock, from, \"N√£o existe nenhuma sess√£o ainda em andamento no grupo.\");\n                break;\n            }\n\n            // Verifica se √© admin ou dono\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (gameData.jogador === sender || ehAdmin || ehDono) {\n                jogo.now = true;\n                akinator.splice(gameIndex, 1);\n                salvarAkinator();\n                await reply(sock, from, `O akinator foi resetado com sucesso, a sess√£o foi deletada.`);\n                await reagirMensagem(sock, message, \"‚úÖ\");\n            } else {\n                await reply(sock, from, \"Somente o(s) adm(s) ou a pessoa que iniciou o jogo podem resetar.\");\n            }\n        }\n        break;\n\n        case \"instagram\":\n        case \"ig\": {\n            try {\n                // Verifica se foi fornecido um link\n                if (!args[0]) {\n                    await reply(sock, from, \"‚ùå Por favor, forne√ßa um link do Instagram.\\n\\nExemplo: `.ig https://instagram.com/p/xxxxx`\");\n                    break;\n                }\n\n                const url = args[0];\n\n                // Verifica se √© um link v√°lido do Instagram\n                if (!url.includes('instagram.com') && !url.includes('instagr.am')) {\n                    await reply(sock, from, \"‚ùå Link inv√°lido! Use um link do Instagram.\");\n                    break;\n                }\n\n                await reagirMensagem(sock, message, \"‚è≥\");\n                await reply(sock, from, \"üì• Baixando v√≠deo do Instagram, aguarde...\");\n\n                // Chama a API do Instagram com tratamento robusto de erro\n                let result;\n                try {\n                    result = await igdl(url);\n                } catch (error) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n\n                    if (error.message === 'TIMEOUT') {\n                        await reply(sock, from, \"‚è±Ô∏è Timeout na API do Instagram. A API est√° lenta, tente novamente em alguns minutos.\");\n                    } else if (error.message === 'RATE_LIMITED') {\n                        await reply(sock, from, \"üö´ Muitas tentativas na API. Aguarde alguns minutos antes de tentar novamente.\");\n                    } else if (error.message === 'SERVER_ERROR') {\n                        await reply(sock, from, \"üîß API do Instagram temporariamente indispon√≠vel. Tente novamente mais tarde.\");\n                    } else {\n                        await reply(sock, from, \"‚ùå Erro ao conectar com a API do Instagram. Verifique o link e tente novamente.\");\n                    }\n                    break;\n                }\n\n                if (!result.status || !result.data || result.data.length === 0) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå N√£o foi poss√≠vel baixar este v√≠deo. Verifique se o link est√° correto e se o post √© p√∫blico.\");\n                    break;\n                }\n\n                const videoData = result.data[0];\n\n                if (!videoData.url) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå V√≠deo n√£o encontrado neste post.\");\n                    break;\n                }\n\n                // Baixa o v√≠deo usando axios\n                const videoResponse = await axios({\n                    method: 'GET',\n                    url: videoData.url,\n                    responseType: 'arraybuffer'\n                });\n\n                const videoBuffer = Buffer.from(videoResponse.data);\n\n                // Baixa a thumbnail se existir\n                let thumbnailBuffer = null;\n                if (videoData.thumbnail) {\n                    try {\n                        const thumbnailResponse = await axios({\n                            method: 'GET',\n                            url: videoData.thumbnail,\n                            responseType: 'arraybuffer'\n                        });\n                        thumbnailBuffer = Buffer.from(thumbnailResponse.data);\n                    } catch (err) {\n                        console.log(\"‚ùå Erro ao baixar thumbnail:\", err.message);\n                    }\n                }\n\n                // Prepara a caption simples\n                const caption = \"üìπ *V√≠deo do Instagram baixado com sucesso!*\\n\\n¬© NEEXT LTDA\";\n\n                // Envia o v√≠deo com a thumbnail como caption (se dispon√≠vel)\n                await sock.sendMessage(from, {\n                    video: videoBuffer,\n                    caption: caption,\n                    jpegThumbnail: thumbnailBuffer,\n                    contextInfo: {\n                        isForwarded: true,\n                        forwardingScore: 100000,\n                        forwardedNewsletterMessageInfo: {\n                            newsletterJid: \"120363289739581116@newsletter\",\n                            newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                        },\n                        externalAdReply: {\n                            title: \"¬© NEEXT LTDA - Instagram Downloader\",\n                            body: \"üì± Instagram: @neet.tk\",\n                            thumbnailUrl: videoData.thumbnail || \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                            mediaType: 1,\n                            sourceUrl: \"https://www.neext.online\",\n                            showAdAttribution: true\n                        }\n                    }\n                }, { quoted: selinho2 });\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n\n            } catch (error) {\n                console.error(\"‚ùå Erro no comando Instagram:\", error);\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await reply(sock, from, \"‚ùå Erro ao baixar v√≠deo do Instagram. Tente novamente mais tarde.\");\n            }\n        }\n        break;\n\n        case \"hermitwhite\": {\n            try {\n                // Verifica se foram passados argumentos suficientes (m√≠nimo 5: nome pode ter espa√ßos + 4 outros campos)\n                if (args.length < 5) {\n                    const instrucoes = `üÜî *CRIA√á√ÉO DE ID - NEEXT LTDA*\n\nüìã **Como usar:**\n\\`${config.prefix}hermitwhite [nome] [idade] [telefone] [instagram] [email]\\`\n\nüìù **Exemplo:**\n\\`${config.prefix}hermitwhite Jo√£o Silva 25 5527999999999 @joao_silva joao@gmail.com\\`\n\n‚ö†Ô∏è **Importante:**\n‚Ä¢ Todos os campos s√£o obrigat√≥rios\n‚Ä¢ Instagram deve incluir o @\n‚Ä¢ Telefone no formato completo (ex: 5527999999999)`;\n\n                    await sock.sendMessage(from, {\n                        text: instrucoes,\n                        contextInfo: {\n                            forwardingScore: 100000,\n                            isForwarded: true,\n                            forwardedNewsletterMessageInfo: {\n                                newsletterJid: \"120363289739581116@newsletter\",\n                                newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                            },\n                            externalAdReply: {\n                                title: \"¬© NEEXT LTDA - Sistema de IDs\",\n                                body: \"üì± Instagram: @neet.tk\",\n                                thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                                mediaType: 1,\n                                sourceUrl: \"https://www.neext.online\",\n                                showAdAttribution: true\n                            }\n                        }\n                    }, { quoted: message });\n                    break;\n                }\n\n                // Coleta os dados dos argumentos - nome pode ter espa√ßos, ent√£o pegamos os √∫ltimos 4 campos\n                const email = args[args.length - 1];\n                const instagram = args[args.length - 2];\n                const numero = args[args.length - 3];\n                const idade = args[args.length - 4];\n                const nome = args.slice(0, args.length - 4).join(' ');\n\n                // Valida√ß√µes b√°sicas\n                if (!nome || !idade || !numero || !instagram || !email) {\n                    await reply(sock, from, \"‚ùå Todos os campos s√£o obrigat√≥rios. Use o comando sem argumentos para ver as instru√ß√µes.\");\n                    break;\n                }\n\n                if (!instagram.startsWith('@')) {\n                    await reply(sock, from, \"‚ùå O Instagram deve come√ßar com @ (ex: @usuario)\");\n                    break;\n                }\n\n                if (!/^\\d{10,15}$/.test(numero)) {\n                    await reply(sock, from, \"‚ùå O telefone deve ter entre 10 e 15 d√≠gitos (ex: 5527999999999)\");\n                    break;\n                }\n\n                if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n                    await reply(sock, from, \"‚ùå Email inv√°lido. Use o formato correto (ex: usuario@provedor.com)\");\n                    break;\n                }\n\n                // Reagir √† mensagem indicando processamento\n                await reagirMensagem(sock, message, \"‚è≥\");\n\n                // Preparar URL da API\n                const apiUrl = \"https://script.google.com/macros/s/AKfycbz7OnN6kyMY5tXuEgcx-M_G_Ox1fUERV6M6GwXc2fuaeE-2MZHwvLeTFuk6QoioP4aPzg/exec\";\n                const params = new URLSearchParams({\n                    action: 'create',\n                    nome: nome,\n                    idade: idade,\n                    numero: numero,\n                    instagram: instagram,\n                    email: email\n                });\n\n                // Fazer requisi√ß√£o para a API\n                const response = await axios.get(`${apiUrl}?${params.toString()}`, {\n                    timeout: 30000,\n                    headers: {\n                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n                    }\n                });\n\n                const result = response.data;\n\n                if (result.status === 'success' && result.id) {\n                    // Sucesso - reagir com ‚úÖ e enviar mensagem\n                    await reagirMensagem(sock, message, \"‚úÖ\");\n\n                    const successMessage = `üéâ *ID CRIADO COM SUCESSO!*\n\nüÜî **Seu ID:** \\`${result.id}\\`\n‚úÖ **Status:** Criado com sucesso no painel da NEEXT\n\nüìã **Dados registrados:**\nüë§ **Nome:** ${nome}\nüéÇ **Idade:** ${idade}\nüì± **Telefone:** ${numero}\nüì∏ **Instagram:** ${instagram}\nüìß **Email:** ${email}\n\n‚ö° **Sistema NEEXT LTDA**\nSeu ID foi salvo com seguran√ßa em nosso sistema!`;\n\n                    await sock.sendMessage(from, {\n                        text: successMessage,\n                        contextInfo: {\n                            forwardingScore: 100000,\n                            isForwarded: true,\n                            forwardedNewsletterMessageInfo: {\n                                newsletterJid: \"120363289739581116@newsletter\",\n                                newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                            },\n                            externalAdReply: {\n                                title: \"¬© NEEXT LTDA - ID Criado\",\n                                body: `ID: ${result.id} | Sistema NEEXT`,\n                                thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                                mediaType: 1,\n                                sourceUrl: \"https://www.neext.online\",\n                                showAdAttribution: true\n                            }\n                        }\n                    }, { quoted: selinho });\n\n                } else {\n                    // Erro na API\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå Erro ao criar ID no sistema. Tente novamente em alguns minutos.\");\n                }\n\n            } catch (error) {\n                console.error(\"‚ùå Erro no comando hermitwhite:\", error);\n                await reagirMensagem(sock, message, \"‚ùå\");\n\n                if (error.code === 'ENOTFOUND' || error.code === 'ETIMEDOUT') {\n                    await reply(sock, from, \"‚ùå Erro de conex√£o com o servidor NEEXT. Verifique sua internet e tente novamente.\");\n                } else if (error.response?.status === 429) {\n                    await reply(sock, from, \"‚ùå Muitas tentativas. Aguarde alguns minutos e tente novamente.\");\n                } else {\n                    await reply(sock, from, \"‚ùå Erro interno ao processar cria√ß√£o de ID. Tente novamente.\");\n                }\n            }\n        }\n        break;\n\n        case \"play\": {\n            try {\n                // Verifica se foi fornecido um termo de busca\n                if (!args.length) {\n                    await reply(sock, from, `‚ùå Por favor, forne√ßa o nome da m√∫sica.\\n\\nExemplo: \\`${config.prefix}play 7 minutos naruto\\``);\n                    break;\n                }\n\n                const query = args.join(' ');\n\n                await reagirMensagem(sock, message, \"‚è≥\");\n                await reply(sock, from, `üéµ Buscando \"${query}\" no YouTube, aguarde...`);\n\n                // Chama a API do YouTube\n                const apiUrl = `https://api.nekolabs.my.id/downloader/youtube/play/v1?q=${encodeURIComponent(query)}`;\n                const response = await axios.get(apiUrl, {\n                    timeout: 30000,\n                    headers: {\n                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n                    }\n                });\n\n                if (!response.data || !response.data.status || !response.data.result) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå N√£o foi poss√≠vel encontrar esta m√∫sica. Tente outro termo de busca.\");\n                    break;\n                }\n\n                const result = response.data.result;\n                const metadata = result.metadata;\n                const downloadUrl = result.downloadUrl;\n\n                if (!downloadUrl) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå Link de download n√£o encontrado para esta m√∫sica.\");\n                    break;\n                }\n\n                // Baixa o √°udio\n                const audioResponse = await axios({\n                    method: 'GET',\n                    url: downloadUrl,\n                    responseType: 'arraybuffer',\n                    timeout: 60000\n                });\n\n                const audioBuffer = Buffer.from(audioResponse.data);\n\n                // Baixa a thumbnail se existir\n                let thumbnailBuffer = null;\n                if (metadata.cover) {\n                    try {\n                        const thumbnailResponse = await axios({\n                            method: 'GET',\n                            url: metadata.cover,\n                            responseType: 'arraybuffer',\n                            timeout: 10000\n                        });\n                        thumbnailBuffer = Buffer.from(thumbnailResponse.data);\n                    } catch (err) {\n                        console.log(\"‚ùå Erro ao baixar thumbnail:\", err.message);\n                    }\n                }\n\n                // Prepara a caption com informa√ß√µes da m√∫sica\n                const caption = `üéµ *M√∫sica encontrada!*\n\nüìù **T√≠tulo:** ${metadata.title}\nüë§ **Canal:** ${metadata.channel}\n‚è±Ô∏è **Dura√ß√£o:** ${metadata.duration}\nüîó **URL:** ${metadata.url}\n\nüéß **Enviado com selinho2**\n¬© NEEXT LTDA`;\n\n                // Envia o √°udio com thumbnail e informa√ß√µes usando o selinho2\n                await sock.sendMessage(from, {\n                    audio: audioBuffer,\n                    mimetype: 'audio/mp4',\n                    fileName: `${metadata.title}.mp3`,\n                    caption: caption,\n                    jpegThumbnail: thumbnailBuffer,\n                    contextInfo: {\n                        forwardingScore: 100000,\n                        isForwarded: true,\n                        forwardedNewsletterMessageInfo: {\n                            newsletterJid: \"120363289739581116@newsletter\",\n                            newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                        },\n                        externalAdReply: {\n                            title: `üéµ ${metadata.title}`,\n                            body: `üé¨ ${metadata.channel} ‚Ä¢ ‚è±Ô∏è ${metadata.duration}`,\n                            thumbnailUrl: metadata.cover || \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                            mediaType: 2,\n                            sourceUrl: metadata.url,\n                            showAdAttribution: true\n                        }\n                    }\n                }, { quoted: selinho2 });\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                console.log(`‚úÖ M√∫sica enviada: ${metadata.title} - ${metadata.channel}`);\n\n            } catch (error) {\n                console.error(\"‚ùå Erro no comando play:\", error);\n                await reagirMensagem(sock, message, \"‚ùå\");\n\n                if (error.code === 'ENOTFOUND' || error.code === 'ETIMEDOUT') {\n                    await reply(sock, from, \"‚ùå Erro de conex√£o. Verifique sua internet e tente novamente.\");\n                } else if (error.response?.status === 404) {\n                    await reply(sock, from, \"‚ùå M√∫sica n√£o encontrada. Tente um termo de busca diferente.\");\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao baixar m√∫sica. Tente novamente mais tarde.\");\n                }\n            }\n        }\n        break;\n\n        case \"spotify\": {\n            // Verifica se foi fornecido um link do Spotify\n            if (!args.length) {\n                const configBot = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Por favor, forne√ßa o link do Spotify.\\n\\nExemplo: \\`${configBot.prefix}spotify https://open.spotify.com/track/4MhTFsyqIJnjsOweVcU8ug\\``);\n                break;\n            }\n\n            const spotifyUrl = args[0];\n\n            // Verifica se √© um link v√°lido do Spotify\n            if (!spotifyUrl.includes('open.spotify.com')) {\n                await reply(sock, from, \"‚ùå Por favor, forne√ßa um link v√°lido do Spotify.\");\n                break;\n            }\n\n            try {\n                await reagirMensagem(sock, message, \"‚è≥\");\n                await reply(sock, from, `üéµ Baixando m√∫sica do Spotify, aguarde...`);\n\n                // Chama a API do Spotify\n                const apiUrl = `https://api.nekolabs.my.id/downloader/spotify/v1?url=${encodeURIComponent(spotifyUrl)}`;\n                const response = await axios.get(apiUrl, {\n                    timeout: 30000,\n                    headers: {\n                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n                    }\n                });\n\n                if (!response.data || !response.data.status || !response.data.result) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå N√£o foi poss√≠vel baixar esta m√∫sica do Spotify. Verifique o link.\");\n                    break;\n                }\n\n                const result = response.data.result;\n                \n                if (!result.downloadUrl) {\n                    await reagirMensagem(sock, message, \"‚ùå\");\n                    await reply(sock, from, \"‚ùå Link de download n√£o encontrado para esta m√∫sica.\");\n                    break;\n                }\n\n                // Baixa o √°udio\n                const audioResponse = await axios({\n                    method: 'GET',\n                    url: result.downloadUrl,\n                    responseType: 'arraybuffer',\n                    timeout: 60000\n                });\n\n                const audioBuffer = Buffer.from(audioResponse.data);\n\n                // Baixa a capa se existir\n                let thumbnailBuffer = null;\n                if (result.cover) {\n                    try {\n                        const thumbnailResponse = await axios({\n                            method: 'GET',\n                            url: result.cover,\n                            responseType: 'arraybuffer',\n                            timeout: 10000\n                        });\n                        thumbnailBuffer = Buffer.from(thumbnailResponse.data);\n                    } catch (err) {\n                        console.log(\"‚ùå Erro ao baixar capa do Spotify:\", err.message);\n                    }\n                }\n\n                // Prepara a caption com informa√ß√µes da m√∫sica\n                const caption = `üéµ *M√∫sica do Spotify baixada!*\n\nüìù **T√≠tulo:** ${result.title}\nüë§ **Artista:** ${result.artist}\n‚è±Ô∏è **Dura√ß√£o:** ${result.duration}\n\nüéß **Enviado com selinho2**\n¬© NEEXT LTDA`;\n\n                // Envia o √°udio com capa e informa√ß√µes usando o selinho2\n                await sock.sendMessage(from, {\n                    audio: audioBuffer,\n                    mimetype: 'audio/mp4',\n                    fileName: `${result.title} - ${result.artist}.mp3`,\n                    caption: caption,\n                    jpegThumbnail: thumbnailBuffer,\n                    contextInfo: {\n                        forwardingScore: 100000,\n                        isForwarded: true,\n                        forwardedNewsletterMessageInfo: {\n                            newsletterJid: \"120363289739581116@newsletter\",\n                            newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                        },\n                        externalAdReply: {\n                            title: `üéµ ${result.title}`,\n                            body: `üé§ ${result.artist} ‚Ä¢ ‚è±Ô∏è ${result.duration}`,\n                            thumbnailUrl: result.cover || \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                            mediaType: 2,\n                            sourceUrl: spotifyUrl,\n                            showAdAttribution: true\n                        }\n                    }\n                }, { quoted: selinho2 });\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                console.log(`‚úÖ M√∫sica Spotify enviada: ${result.title} - ${result.artist}`);\n\n            } catch (error) {\n                console.error(\"‚ùå Erro no comando spotify:\", error);\n                await reagirMensagem(sock, message, \"‚ùå\");\n\n                if (error.code === 'ENOTFOUND' || error.code === 'ETIMEDOUT') {\n                    await reply(sock, from, \"‚ùå Erro de conex√£o. Verifique sua internet e tente novamente.\");\n                } else if (error.response?.status === 404) {\n                    await reply(sock, from, \"‚ùå M√∫sica n√£o encontrada no Spotify. Verifique o link.\");\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao baixar m√∫sica do Spotify. Tente novamente mais tarde.\");\n                }\n            }\n        }\n        break;\n\n        // Comandos do dono: antipv e anticall\n        case \"antipv\": {\n            const sender = message.key.participant || from;\n\n            // Verifica se √© o dono\n            if (!isDono(sender)) {\n                await reply(sock, from, \"‚ùå Apenas o dono pode configurar o ANTIPV!\");\n                break;\n            }\n\n            const acao = args[0]?.toLowerCase();\n\n            // Carrega configura√ß√£o atual global\n            const config = require('./settings/settings.json');\n            const estadoAtual = config.antipv || false;\n\n            if (acao === \"on\" || acao === \"ativar\" || acao === \"1\") {\n                if (estadoAtual) {\n                    await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                    await reply(sock, from, `‚ö†Ô∏è *üö´ ANTIPV J√Å EST√Å ATIVO!*\\n\\n‚úÖ PVs de n√£o-donos j√° est√£o sendo bloqueados\\nüõ°Ô∏è Apenas voc√™ pode falar comigo no privado`);\n                } else {\n                    // Ativar antipv\n                    try {\n                        const fs = require('fs');\n                        const path = require('path');\n                        const settingsPath = path.join(__dirname, 'settings/settings.json');\n                        config.antipv = true;\n                        fs.writeFileSync(settingsPath, JSON.stringify(config, null, 2));\n                        \n                        await reagirMensagem(sock, message, \"‚úÖ\");\n                        await reply(sock, from, `‚úÖ *üö´ ANTIPV ATIVADO*\\n\\nüõ°Ô∏è Apenas voc√™ pode falar comigo no privado\\nüö´ PVs de outros usu√°rios ser√£o ignorados\\n‚öîÔ∏è Prote√ß√£o m√°xima ativada!`);\n                    } catch (error) {\n                        await reply(sock, from, `‚ùå Erro ao ativar ANTIPV`);\n                    }\n                }\n            }\n            else if (acao === \"off\" || acao === \"desativar\" || acao === \"0\") {\n                if (!estadoAtual) {\n                    await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                    await reply(sock, from, `‚ö†Ô∏è *üö´ ANTIPV J√Å EST√Å DESATIVADO!*\\n\\n‚úÖ Qualquer pessoa pode falar comigo no privado\\nüí¨ PVs est√£o liberados para todos`);\n                } else {\n                    // Desativar antipv\n                    try {\n                        const fs = require('fs');\n                        const path = require('path');\n                        const settingsPath = path.join(__dirname, 'settings/settings.json');\n                        config.antipv = false;\n                        fs.writeFileSync(settingsPath, JSON.stringify(config, null, 2));\n                        \n                        await reagirMensagem(sock, message, \"‚úÖ\");\n                        await reply(sock, from, `‚úÖ *üí¨ ANTIPV DESATIVADO*\\n\\nüí¨ Qualquer pessoa pode falar comigo no privado\\nüîì PVs liberados para todos os usu√°rios\\nüì± Conversas privadas habilitadas!`);\n                    } catch (error) {\n                        await reply(sock, from, `‚ùå Erro ao desativar ANTIPV`);\n                    }\n                }\n            } else {\n                const config = obterConfiguracoes();\n                const status = estadoAtual ? \"‚úÖ ATIVO\" : \"‚ùå DESATIVADO\";\n                await reply(sock, from, \n                    `üö´ *STATUS DO ANTIPV*\\n\\n` +\n                    `üìä Status atual: ${status}\\n\\n` +\n                    `üì± **Como usar:**\\n` +\n                    `‚Ä¢ ${config.prefix}antipv on - Ativar\\n` +\n                    `‚Ä¢ ${config.prefix}antipv off - Desativar\\n\\n` +\n                    `üõ°Ô∏è **Quando ativo:** Apenas o dono pode usar PV\\n` +\n                    `üí¨ **Quando inativo:** Qualquer pessoa pode usar PV`\n                );\n            }\n        }\n        break;\n\n        case \"anticall\": {\n            const sender = message.key.participant || from;\n\n            // Verifica se √© o dono\n            if (!isDono(sender)) {\n                await reply(sock, from, \"‚ùå Apenas o dono pode configurar o ANTICALL!\");\n                break;\n            }\n\n            const acao = args[0]?.toLowerCase();\n\n            // Carrega configura√ß√£o atual global\n            const config = require('./settings/settings.json');\n            const estadoAtual = config.anticall || false;\n\n            if (acao === \"on\" || acao === \"ativar\" || acao === \"1\") {\n                if (estadoAtual) {\n                    await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                    await reply(sock, from, `‚ö†Ô∏è *üìû ANTICALL J√Å EST√Å ATIVO!*\\n\\n‚úÖ Chamadas j√° est√£o sendo rejeitadas automaticamente\\nüõ°Ô∏è Bot protegido contra chamadas indesejadas`);\n                } else {\n                    // Ativar anticall\n                    try {\n                        const fs = require('fs');\n                        const path = require('path');\n                        const settingsPath = path.join(__dirname, 'settings/settings.json');\n                        config.anticall = true;\n                        fs.writeFileSync(settingsPath, JSON.stringify(config, null, 2));\n                        \n                        await reagirMensagem(sock, message, \"‚úÖ\");\n                        await reply(sock, from, `‚úÖ *üìû ANTICALL ATIVADO*\\n\\nüõ°Ô∏è Todas as chamadas ser√£o rejeitadas automaticamente\\nüö´ Bot protegido contra liga√ß√µes\\n‚öîÔ∏è Defesa m√°xima ativada!`);\n                    } catch (error) {\n                        await reply(sock, from, `‚ùå Erro ao ativar ANTICALL`);\n                    }\n                }\n            }\n            else if (acao === \"off\" || acao === \"desativar\" || acao === \"0\") {\n                if (!estadoAtual) {\n                    await reagirMensagem(sock, message, \"‚ö†Ô∏è\");\n                    await reply(sock, from, `‚ö†Ô∏è *üìû ANTICALL J√Å EST√Å DESATIVADO!*\\n\\n‚úÖ Chamadas est√£o sendo aceitas normalmente\\nüìû Bot pode receber liga√ß√µes`);\n                } else {\n                    // Desativar anticall\n                    try {\n                        const fs = require('fs');\n                        const path = require('path');\n                        const settingsPath = path.join(__dirname, 'settings/settings.json');\n                        config.anticall = false;\n                        fs.writeFileSync(settingsPath, JSON.stringify(config, null, 2));\n                        \n                        await reagirMensagem(sock, message, \"‚úÖ\");\n                        await reply(sock, from, `‚úÖ *üìû ANTICALL DESATIVADO*\\n\\nüìû Chamadas est√£o sendo aceitas normalmente\\nüîì Bot pode receber liga√ß√µes\\n‚ú® Fun√ß√£o de chamadas habilitada!`);\n                    } catch (error) {\n                        await reply(sock, from, `‚ùå Erro ao desativar ANTICALL`);\n                    }\n                }\n            } else {\n                const config = obterConfiguracoes();\n                const status = estadoAtual ? \"‚úÖ ATIVO\" : \"‚ùå DESATIVADO\";\n                await reply(sock, from, \n                    `üìû *STATUS DO ANTICALL*\\n\\n` +\n                    `üìä Status atual: ${status}\\n\\n` +\n                    `üì± **Como usar:**\\n` +\n                    `‚Ä¢ ${config.prefix}anticall on - Ativar\\n` +\n                    `‚Ä¢ ${config.prefix}anticall off - Desativar\\n\\n` +\n                    `üõ°Ô∏è **Quando ativo:** Todas as chamadas s√£o rejeitadas\\n` +\n                    `üìû **Quando inativo:** Chamadas s√£o aceitas normalmente`\n                );\n            }\n        }\n        break;\n\n        case \"menu\": {\n            // Rea√ß√£o de carregando\n            await reagirMensagem(sock, message, \"‚è≥\");\n\n            // Importa menus organizados\n            const menus = require('./menus/menu.js');\n            const sender = message.key.participant || from;\n            const pushName = message.pushName || \"Usu√°rio\";\n            const menuText = await menus.obterMenuPrincipal(sock, from, sender, pushName);\n\n            // Obter sauda√ß√£o com emoji e total de comandos\n            const { obterSaudacao, contarComandos } = require('./arquivos/funcoes/function.js');\n            const totalComandos = contarComandos();\n\n            // Caption apenas com o menu (sem duplicar sauda√ß√£o)\n            const captionCompleto = menuText;\n\n            // Envia arquivo PPTX de 100TB igual grupo-status - DOCUMENTO REAL\n            await sock.sendMessage(from, {\n                document: Buffer.from(\"neext_menu_pptx_content\", \"utf8\"),\n                fileName: \"o melhor tem nome.pptx\",\n                mimetype: \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\n                fileLength: 109951162777600, // 100TB em bytes (fake)\n                pageCount: 999,\n                caption: captionCompleto,\n                contextInfo: {\n                    mentionedJid: [sender],\n                    forwardingScore: 100000,\n                    isForwarded: true,\n                    forwardedNewsletterMessageInfo: {\n                        newsletterJid: \"120363289739581116@newsletter\",\n                        newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                    },\n                    externalAdReply: {\n                        title: obterSaudacao(),\n                        body: `${totalComandos} comandos`,\n                        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                        mediaType: 1,\n                        sourceUrl: \"https://www.neext.online\"\n                    },\n                    quotedMessage: quotedSerasaAPK.message\n                }\n            }, { quoted: selinho });\n\n            // Rea√ß√£o de sucesso ap√≥s enviar o menu\n            await reagirMensagem(sock, message, \"üê¶‚Äçüî•\");\n        }\n        break;\n\n        case \"menumembro\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuMembro());\n        }\n        break;\n\n        case \"menuadmin\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuAdmin());\n        }\n        break;\n\n        case \"menuadm\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuAdm());\n        }\n        break;\n\n        case \"menudono\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuDono());\n        }\n        break;\n\n        case \"menudownload\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuDownload());\n        }\n        break;\n\n        case \"menugamer\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuGamer());\n        }\n        break;\n\n        case \"menudownload\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuDownload());\n        }\n        break;\n\n        case \"menusticker\":\n        case \"menufigurinhas\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuSticker());\n        }\n        break;\n\n        case \"menurpg\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuRPG());\n        }\n        break;\n\n        case \"menubrincadeira\": {\n            const menus = require('./menus/menu.js');\n            await sock.sendMessage(from, {\n                text: menus.obterMenuBrincadeira()\n            }, { quoted: message });\n        }\n        break;\n\n        case \"menuhentai\": {\n            const menus = require('./menus/menu.js');\n            await sock.sendMessage(from, {\n                text: menus.obterMenuHentai()\n            }, { quoted: message });\n        }\n        break;\n\n        case \"menudono\": {\n            const menus = require('./menus/menu.js');\n            await sock.sendMessage(from, {\n                text: menus.obterMenuDonoAvancado()\n            }, { quoted: message });\n        }\n        break;\n\n        case \"menuanti\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuAnti());\n        }\n        break;\n\n        case \"menurpg\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterMenuRPG());\n        }\n        break;\n\n        case \"configurar-bot\": {\n            const menus = require('./menus/menu.js');\n            await reply(sock, from, menus.obterConfigurarBot());\n        }\n        break;\n\n        case \"trocar-prefixo\": {\n            const sender = message.key.participant || from;\n\n            // Verifica se √© o dono\n            if (!isDono(sender)) {\n                await reply(sock, from, \"‚ùå Apenas o dono pode alterar o prefixo do bot!\");\n                break;\n            }\n\n            const novoPrefixo = args.join(\" \").trim();\n            if (!novoPrefixo) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Use: ${config.prefix}trocar-prefixo [novo prefixo]\\n\\nExemplo: ${config.prefix}trocar-prefixo !`);\n                break;\n            }\n\n            if (novoPrefixo.length > 3) {\n                await reply(sock, from, \"‚ùå O prefixo deve ter no m√°ximo 3 caracteres!\");\n                break;\n            }\n\n            try {\n                // Atualiza o arquivo settings.json\n                const fs = require('fs');\n                const path = require('path');\n                const settingsPath = path.join(__dirname, 'settings/settings.json');\n                const currentSettings = JSON.parse(fs.readFileSync(settingsPath, 'utf8'));\n\n                const prefixoAntigo = currentSettings.prefix;\n                currentSettings.prefix = novoPrefixo;\n\n                fs.writeFileSync(settingsPath, JSON.stringify(currentSettings, null, 2));\n\n                // Atualiza configura√ß√µes em mem√≥ria tamb√©m\n                delete require.cache[require.resolve('./settings/settings.json')];\n                const novasSettings = require('./settings/settings.json');\n                Object.assign(settings, novasSettings);\n\n                await reply(sock, from, `‚úÖ *Prefixo alterado com sucesso!*\\n\\nüîÑ **Antes:** ${prefixoAntigo}\\n‚úÖ **Agora:** ${novoPrefixo}\\n\\n‚ú® *Altera√ß√£o aplicada instantaneamente!*`);\n\n            } catch (error) {\n                console.error(\"Erro ao alterar prefixo:\", error);\n                await reply(sock, from, \"‚ùå Erro interno ao alterar prefixo. Tente novamente.\");\n            }\n        }\n        break;\n\n        case \"trocar-nome\": {\n            const sender = message.key.participant || from;\n\n            // Verifica se √© o dono\n            if (!isDono(sender)) {\n                await reply(sock, from, \"‚ùå Apenas o dono pode alterar o nome do bot!\");\n                break;\n            }\n\n            const novoNome = args.join(\" \").trim();\n            if (!novoNome) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Use: ${config.prefix}trocar-nome [novo nome]\\n\\nExemplo: ${config.prefix}trocar-nome MeuBot Incr√≠vel`);\n                break;\n            }\n\n            if (novoNome.length > 50) {\n                await reply(sock, from, \"‚ùå O nome deve ter no m√°ximo 50 caracteres!\");\n                break;\n            }\n\n            try {\n                // Atualiza o arquivo settings.json\n                const fs = require('fs');\n                const path = require('path');\n                const settingsPath = path.join(__dirname, 'settings/settings.json');\n                const currentSettings = JSON.parse(fs.readFileSync(settingsPath, 'utf8'));\n\n                const nomeAntigo = currentSettings.nomeDoBot;\n                currentSettings.nomeDoBot = novoNome;\n\n                fs.writeFileSync(settingsPath, JSON.stringify(currentSettings, null, 2));\n\n                // Atualiza configura√ß√µes em mem√≥ria tamb√©m\n                delete require.cache[require.resolve('./settings/settings.json')];\n                const novasSettings = require('./settings/settings.json');\n                Object.assign(settings, novasSettings);\n\n                await reply(sock, from, `‚úÖ *Nome do bot alterado com sucesso!*\\n\\nüîÑ **Antes:** ${nomeAntigo}\\n‚úÖ **Agora:** ${novoNome}\\n\\n‚ú® *Altera√ß√£o aplicada instantaneamente!*`);\n\n            } catch (error) {\n                console.error(\"Erro ao alterar nome do bot:\", error);\n                await reply(sock, from, \"‚ùå Erro interno ao alterar nome. Tente novamente.\");\n            }\n        }\n        break;\n\n        case \"trocar-nick\": {\n            const sender = message.key.participant || from;\n\n            // Verifica se √© o dono\n            if (!isDono(sender)) {\n                await reply(sock, from, \"‚ùå Apenas o dono pode alterar seu pr√≥prio nick!\");\n                break;\n            }\n\n            const novoNick = args.join(\" \").trim();\n            if (!novoNick) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Use: ${config.prefix}trocar-nick [novo nick]\\n\\nExemplo: ${config.prefix}trocar-nick Administrador`);\n                break;\n            }\n\n            if (novoNick.length > 30) {\n                await reply(sock, from, \"‚ùå O nick deve ter no m√°ximo 30 caracteres!\");\n                break;\n            }\n\n            try {\n                // Atualiza o arquivo settings.json\n                const fs = require('fs');\n                const path = require('path');\n                const settingsPath = path.join(__dirname, 'settings/settings.json');\n                const currentSettings = JSON.parse(fs.readFileSync(settingsPath, 'utf8'));\n\n                const nickAntigo = currentSettings.nickDoDono;\n                currentSettings.nickDoDono = novoNick;\n\n                fs.writeFileSync(settingsPath, JSON.stringify(currentSettings, null, 2));\n\n                // Atualiza configura√ß√µes em mem√≥ria tamb√©m\n                delete require.cache[require.resolve('./settings/settings.json')];\n                const novasSettings = require('./settings/settings.json');\n                Object.assign(settings, novasSettings);\n\n                await reply(sock, from, `‚úÖ *Nick do dono alterado com sucesso!*\\n\\nüîÑ **Antes:** ${nickAntigo}\\n‚úÖ **Agora:** ${novoNick}\\n\\n‚ú® *Altera√ß√£o aplicada instantaneamente!*`);\n\n            } catch (error) {\n                console.error(\"Erro ao alterar nick do dono:\", error);\n                await reply(sock, from, \"‚ùå Erro interno ao alterar nick. Tente novamente.\");\n            }\n        }\n        break;\n\n        // ================== SISTEMA RPG - NEEXTCITY ==================\n\n        case \"rpg\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem ativar/desativar o RPG.\");\n                break;\n            }\n\n            const action = args[0]?.toLowerCase();\n\n            if (action === \"on\") {\n                if (rpg.toggleRPG(from, true)) {\n                    const configBot = obterConfiguracoes();\n                    await reply(sock, from, `üéÆ **RPG ATIVADO!**\\n\\nüèôÔ∏è **Bem-vindos √† NeextCity!**\\n\\n Para come√ßar sua jornada:\\n‚Ä¢ Digite **${configBot.prefix}registrar** para se registrar\\n‚Ä¢ Escolha seu banco favorito\\n‚Ä¢ Comece a pescar, minerar e trabalhar!\\n\\n‚ú® **Comandos dispon√≠veis:**\\n‚Ä¢ \\`${configBot.prefix}pescar\\` - Pesque e ganhe gold\\n‚Ä¢ \\`${configBot.prefix}minerar\\` - Minere recursos valiosos\\n‚Ä¢ \\`${configBot.prefix}trabalhar\\` - Trabalhe por dinheiro\\n‚Ä¢ \\`${configBot.prefix}tigrinho\\` - Jogue no cassino\\n‚Ä¢ \\`${configBot.prefix}assalto\\` - Assalte outros jogadores\\n‚Ä¢ \\`${configBot.prefix}vermeusaldo\\` - Veja seu saldo\\n‚Ä¢ \\`${configBot.prefix}rank\\` - Ranking dos mais ricos`);\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao ativar o RPG.\");\n                }\n            } else if (action === \"off\") {\n                if (rpg.toggleRPG(from, false)) {\n                    await reply(sock, from, \"üéÆ **RPG DESATIVADO!**\\n\\nüëã At√© logo, NeextCity!\");\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao desativar o RPG.\");\n                }\n            } else {\n                const isAtivo = rpg.isRPGAtivo(from);\n                const configBot = obterConfiguracoes();\n                await reply(sock, from, `üéÆ **STATUS DO RPG**\\n\\n${isAtivo ? \"‚úÖ ATIVO\" : \"‚ùå INATIVO\"}\\n\\nüí° **Uso:** \\`${configBot.prefix}rpg on/off\\``);\n            }\n        }\n        break;\n\n        case \"registrar\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            // Verifica se RPG est√° ativo\n            if (!rpg.isRPGAtivo(from)) {\n                const configBot = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo. Um admin deve ativar com `\" + configBot.prefix + \"rpg on`\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            // Verifica se j√° est√° registrado\n            if (rpg.isUsuarioRegistrado(userId)) {\n                const userData = rpg.obterDadosUsuario(userId);\n                await reply(sock, from, `‚úÖ **Voc√™ j√° est√° registrado na NeextCity!**\\n\\nüë§ **Nome:** ${userData.nome}\\n${userData.banco.emoji} **Banco:** ${userData.banco.nome}\\nüí∞ **Saldo:** ${userData.saldo} Gold`);\n                break;\n            }\n\n            // Se n√£o tem argumentos, mostra como usar\n            if (args.length < 2) {\n                let bancosText = \"üè¶ **BANCOS DISPON√çVEIS:**\\n\\n\";\n                rpg.bancos.forEach((banco, index) => {\n                    bancosText += `${index + 1}. ${banco.emoji} ${banco.nome}\\n`;\n                });\n\n                const configBot = obterConfiguracoes();\n                await reply(sock, from, `üèôÔ∏è **REGISTRO NA NEEXTCITY**\\n\\n${bancosText}\\nüí° **Como usar:**\\n\\`${configBot.prefix}registrar [nome] [n√∫mero_do_banco]\\`\\n\\nüìù **Exemplo:**\\n\\`${configBot.prefix}registrar Jo√£o 3\\` (para Nubank)`);\n                break;\n            }\n\n            const nome = args[0];\n            const bancoIndex = parseInt(args[1]) - 1;\n\n            if (!nome || nome.length < 2) {\n                await reply(sock, from, \"‚ùå Nome deve ter pelo menos 2 caracteres.\");\n                break;\n            }\n\n            if (isNaN(bancoIndex) || bancoIndex < 0 || bancoIndex >= rpg.bancos.length) {\n                await reply(sock, from, `‚ùå N√∫mero do banco inv√°lido. Escolha entre 1 e ${rpg.bancos.length}.`);\n                break;\n            }\n\n            const banco = rpg.bancos[bancoIndex];\n\n            if (rpg.registrarUsuario(userId, nome, banco.id)) {\n                await reply(sock, from, `üéâ **REGISTRO CONCLU√çDO!**\\n\\nüèôÔ∏è **Bem-vindo √† NeextCity!**\\n\\nüë§ **Nome:** ${nome}\\n${banco.emoji} **Banco:** ${banco.nome}\\nüí∞ **Saldo inicial:** 100 Gold\\n\\n‚ú® **Agora voc√™ pode:**\\n‚Ä¢ /pescar - Ganhe gold pescando\\n‚Ä¢ /minerar - Encontre minerais valiosos\\n‚Ä¢ /trabalhar - Trabalhe por dinheiro\\n‚Ä¢ /tigrinho - Teste sua sorte no cassino\\n‚Ä¢ /assalto - Assalte outros jogadores\\n‚Ä¢ /vermeusaldo - Veja seu progresso`);\n            } else {\n                await reply(sock, from, \"‚ùå Erro ao registrar. Tente novamente.\");\n            }\n        }\n        break;\n\n        case \"pescar\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.pescar(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            // Envia resultado sem imagem\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üé£\");\n            } else {\n                await reagirMensagem(sock, message, \"üíî\");\n            }\n        }\n        break;\n\n        case \"minerar\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.minerar(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            // Envia resultado sem imagem\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"‚õèÔ∏è\");\n            } else {\n                await reagirMensagem(sock, message, \"üíî\");\n            }\n        }\n        break;\n\n        case \"trabalhar\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.trabalhar(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"üíº\");\n        }\n        break;\n\n        case \"tigrinho\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const aposta = parseInt(args[0]);\n            if (!aposta || isNaN(aposta)) {\n                await reply(sock, from, `üé∞ **JOGO DO TIGRINHO** üêÖ\\n\\nüí° **Como jogar:**\\n\\`${config.prefix}tigrinho [valor]\\`\\n\\nüìù **Exemplo:**\\n\\`${config.prefix}tigrinho 50\\`\\n\\nüé≤ **Regras:**\\n‚Ä¢ Aposta m√≠nima: 10 Gold\\n‚Ä¢ 3 iguais = Pr√™mio maior\\n‚Ä¢ 2 iguais = Pr√™mio menor\\n‚Ä¢ üíéüíéüíé = JACKPOT! (10x)\\n‚Ä¢ üêÖüêÖüêÖ = Tigrinho! (5x)`);\n                break;\n            }\n\n            const resultado = rpg.jogarTigrinho(userId, aposta);\n\n            if (resultado.erro) {\n                await reply(sock, from, `‚ùå ${resultado.erro}`);\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.ganhou) {\n                await reagirMensagem(sock, message, \"üéâ\");\n            } else {\n                await reagirMensagem(sock, message, \"üò¢\");\n            }\n        }\n        break;\n\n        case \"assalto\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            // Verifica se marcou algu√©m\n            const mentionedJid = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n            if (!mentionedJid || mentionedJid.length === 0) {\n                await reply(sock, from, `üî´ **SISTEMA DE ASSALTO**\\n\\nüí° **Como usar:**\\nMarque a pessoa que deseja assaltar\\n\\nüìù **Exemplo:**\\n\\`${config.prefix}assalto @usuario\\`\\n\\n‚ö†Ô∏è **Regras:**\\n‚Ä¢ Cooldown: 15 minutos\\n‚Ä¢ Chance de sucesso: 60%\\n‚Ä¢ Voc√™ rouba 20% do saldo da v√≠tima\\n‚Ä¢ Se falhar, paga multa de 30 Gold`);\n                break;\n            }\n\n            const targetId = mentionedJid[0].split('@')[0];\n            const resultado = rpg.assaltar(userId, targetId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem, mentionedJid);\n\n            if (resultado.assalto) {\n                await reagirMensagem(sock, message, \"üí∞\");\n            } else {\n                await reagirMensagem(sock, message, \"üö®\");\n            }\n        }\n        break;\n\n        case \"estudar\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.estudar(userId);\n\n            if (resultado.erro) {\n                await reply(sock, from, `‚ùå ${resultado.erro}`);\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"üìö\");\n        }\n        break;\n\n        case \"investir\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.investir(userId);\n\n            if (resultado.erro) {\n                await reply(sock, from, `‚ùå ${resultado.erro}`);\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, resultado.sucesso ? \"üìà\" : \"üìâ\");\n        }\n        break;\n\n        case \"apostar\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const valor = args[0] ? parseInt(args[0]) : null;\n            const resultado = rpg.apostar(userId, valor);\n\n            if (resultado.erro) {\n                await reply(sock, from, `‚ùå ${resultado.erro}`);\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, resultado.sucesso ? \"üé≤\" : \"üíî\");\n        }\n        break;\n\n        // ==================== NOVOS COMANDOS RPG ====================\n\n        case \"loja\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const categoria = args[0]?.toLowerCase();\n            const categoriasValidas = ['propriedades', 'animais', 'ferramentas', 'veiculos', 'negocios', 'tecnologia', 'decoracao', 'seguranca'];\n\n            if (categoria && !categoriasValidas.includes(categoria)) {\n                await reply(sock, from, \"‚ùå Categoria inv√°lida! Use: propriedades, animais, ferramentas, veiculos, negocios, tecnologia, decoracao, seguranca\");\n                break;\n            }\n\n            const resultado = rpg.listarLoja(categoria);\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"üõí\");\n        }\n        break;\n\n        case \"negocios\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.listarLoja(\"negocios\");\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"üè¢\");\n        }\n        break;\n\n        case \"comprar\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            if (!args[0]) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `üõí **COMO COMPRAR**\\n\\nUse: \\`${config.prefix}comprar [item_id]\\`\\n\\nüí° **Exemplo:**\\n\\`${config.prefix}comprar casa_simples\\`\\n\\nüìã **Para ver itens:** \\`${config.prefix}loja\\``);\n                break;\n            }\n\n            const itemId = args[0];\n            const resultado = rpg.comprarItem(userId, itemId);\n\n            if (resultado.erro) {\n                await reply(sock, from, `‚ùå ${resultado.erro}`);\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"‚úÖ\");\n        }\n        break;\n\n        case \"inventario\":\n        case \"meuinventario\":\n        case \"mochila\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.obterPerfilCompleto(userId);\n\n            if (!resultado) {\n                await reply(sock, from, \"‚ùå Erro ao carregar invent√°rio.\");\n                break;\n            }\n\n            let mensagem = `üì¶ **INVENT√ÅRIO DE ${resultado.usuario.nome.toUpperCase()}**\\n\\n`;\n            mensagem += `üí∞ **Saldo:** ${resultado.usuario.saldo} Gold\\n`;\n            mensagem += `üíé **Valor do invent√°rio:** ${resultado.valorInventario} Gold\\n`;\n            mensagem += `üìã **Total de itens:** ${resultado.totalItens}\\n\\n`;\n            mensagem += resultado.inventarioTexto;\n\n            await reply(sock, from, mensagem);\n            await reagirMensagem(sock, message, \"üì¶\");\n        }\n        break;\n\n        case \"cacar\":\n        case \"cacada\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = await rpg.cacar(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üèπ\");\n            } else {\n                await reagirMensagem(sock, message, \"üòû\");\n            }\n        }\n        break;\n\n        case \"coletar\":\n        case \"coleta\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = await rpg.coletar(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üå±\");\n            } else {\n                await reagirMensagem(sock, message, \"üòû\");\n            }\n        }\n        break;\n\n        case \"agricultura\":\n        case \"plantar\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = await rpg.agricultura(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üöú\");\n            } else {\n                await reagirMensagem(sock, message, \"ü¶ó\");\n            }\n        }\n        break;\n\n        case \"entrega\":\n        case \"delivery\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = await rpg.entrega(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üõµ\");\n            } else {\n                await reagirMensagem(sock, message, \"‚ùå\");\n            }\n        }\n        break;\n\n        case \"pix\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            // Verifica se foi marcado algu√©m\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n            if (!mentioned || mentioned.length === 0) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `üí∏ **SISTEMA PIX - NEEXTCITY**\\n\\nüì± Para transferir Gold, use:\\n\\`${config.prefix}pix @usuario [valor]\\`\\n\\nüí° **Exemplo:** \\`${config.prefix}pix @5511999999999 1000\\`\\n\\n‚ö†Ô∏è **Taxa:** 2% sobre o valor transferido\\nüí∞ **Valor m√≠nimo:** 10 Gold`);\n                break;\n            }\n\n            const destinatarioJid = mentioned[0];\n            const destinatarioId = destinatarioJid.split('@')[0];\n            const valor = args[1] ? parseInt(args[1]) : null;\n\n            if (!valor || isNaN(valor)) {\n                await reply(sock, from, \"‚ùå Digite um valor v√°lido para transferir.\");\n                break;\n            }\n\n            // N√£o permite transferir para si mesmo\n            if (userId === destinatarioId) {\n                await reply(sock, from, \"‚ùå Voc√™ n√£o pode transferir PIX para si mesmo!\");\n                break;\n            }\n\n            // Obt√©m nomes dos usu√°rios\n            const remetente = rpg.obterDadosUsuario(userId);\n            const destinatario = rpg.obterDadosUsuario(destinatarioId);\n\n            if (!destinatario) {\n                await reply(sock, from, \"‚ùå O destinat√°rio n√£o est√° registrado no RPG.\");\n                break;\n            }\n\n            const resultado = rpg.pixTransferir(userId, destinatarioId, valor, remetente.nome, destinatario.nome);\n\n            if (resultado.erro) {\n                await reply(sock, from, `‚ùå ${resultado.erro}`);\n                break;\n            }\n\n            // Envia confirma√ß√£o\n            await sock.sendMessage(from, {\n                image: { url: \"https://i.ibb.co/XsRtKgD/pix-transferencia.jpg\" },\n                caption: resultado.mensagem,\n                contextInfo: {\n                    mentionedJid: [sender, destinatarioJid],\n                    forwardingScore: 100000,\n                    isForwarded: true,\n                    forwardedNewsletterMessageInfo: {\n                        newsletterJid: \"120363289739581116@newsletter\",\n                        newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                    },\n                    externalAdReply: {\n                        title: \"üí∏ PIX Realizado - NeextCity\",\n                        body: \"¬© NEEXT LTDA\",\n                        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                        mediaType: 1,\n                        sourceUrl: \"https://www.neext.online\"\n                    }\n                }\n            }, { quoted: message });\n\n            await reagirMensagem(sock, message, \"üí∏\");\n        }\n        break;\n\n        case \"perfil\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const perfilCompleto = rpg.obterPerfilCompleto(userId);\n            if (!perfilCompleto) {\n                await reply(sock, from, \"‚ùå Erro ao carregar perfil.\");\n                break;\n            }\n\n            const usuario = perfilCompleto.usuario;\n            const registroData = new Date(usuario.registrado).toLocaleDateString('pt-BR');\n\n            let mensagemPerfil = `üë§ **PERFIL COMPLETO - ${usuario.nome.toUpperCase()}**\\n\\n`;\n            mensagemPerfil += `üí∞ **Saldo:** ${usuario.saldo} Gold\\n`;\n            mensagemPerfil += `${usuario.banco.emoji} **Banco:** ${usuario.banco.nome}\\n`;\n            mensagemPerfil += `üìÖ **Registro:** ${registroData}\\n`;\n\n            // Educa√ß√£o\n            if (usuario.educacao && usuario.educacao.nivel > 0) {\n                mensagemPerfil += `üéì **N√≠vel educacional:** ${usuario.educacao.nivel}\\n`;\n            }\n\n            mensagemPerfil += `\\nüìä **ESTAT√çSTICAS:**\\n`;\n            mensagemPerfil += `üé£ Pescas: ${usuario.pescasFeitas || 0}\\n`;\n            mensagemPerfil += `üíº Trabalhos: ${usuario.trabalhosFeitos || 0}\\n`;\n            mensagemPerfil += `‚õèÔ∏è Minera√ß√µes: ${usuario.mineracoesFeitas || 0}\\n`;\n\n            if (usuario.estudosFeitos > 0) {\n                mensagemPerfil += `üìö Estudos: ${usuario.estudosFeitos}\\n`;\n            }\n            if (usuario.investimentosFeitos > 0) {\n                mensagemPerfil += `üíº Investimentos: ${usuario.investimentosFeitos}\\n`;\n            }\n            if (usuario.apostasFeitas > 0) {\n                mensagemPerfil += `üé≤ Apostas: ${usuario.apostasFeitas}\\n`;\n            }\n\n            mensagemPerfil += `\\nüíé **PATRIM√îNIO:**\\n`;\n            mensagemPerfil += `üì¶ **Total de itens:** ${perfilCompleto.totalItens}\\n`;\n            mensagemPerfil += `üí∞ **Valor do invent√°rio:** ${perfilCompleto.valorInventario} Gold\\n`;\n            mensagemPerfil += `üèÜ **Patrim√¥nio total:** ${usuario.saldo + perfilCompleto.valorInventario} Gold\\n\\n`;\n\n            mensagemPerfil += `üì¶ **INVENT√ÅRIO:**\\n\\n`;\n            mensagemPerfil += perfilCompleto.inventarioTexto;\n\n            await reply(sock, from, mensagemPerfil);\n            await reagirMensagem(sock, message, \"üë§\");\n        }\n        break;\n\n        // ==================== NOVOS COMANDOS RPG EXPANDIDOS ====================\n\n        case \"roubar\":\n        case \"roubo\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const localId = args[0] ? parseInt(args[0]) : null;\n            const resultado = await rpg.roubar(userId, localId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown' || resultado.erro === 'Limite di√°rio') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            if (resultado.listaLocais) {\n                await reply(sock, from, resultado.mensagem);\n                await reagirMensagem(sock, message, \"üè¥‚Äç‚ò†Ô∏è\");\n            } else {\n                await reply(sock, from, resultado.mensagem);\n\n                if (resultado.sucesso) {\n                    await reagirMensagem(sock, message, \"üí∞\");\n                } else if (resultado.prisao) {\n                    await reagirMensagem(sock, message, \"üö®\");\n                } else {\n                    await reagirMensagem(sock, message, \"üòû\");\n                }\n            }\n        }\n        break;\n\n        case \"youtube\":\n        case \"yt\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = await rpg.criarConteudo(userId, 'youtube');\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"üé•\");\n        }\n        break;\n\n        case \"tiktok\":\n        case \"tt\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = await rpg.criarConteudo(userId, 'tiktok');\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"üì±\");\n        }\n        break;\n\n        case \"twitch\":\n        case \"stream\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = await rpg.criarConteudo(userId, 'twitch');\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n            await reagirMensagem(sock, message, \"üéÆ\");\n        }\n        break;\n\n        case \"coletar\":\n        case \"coleta\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.coletar(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üå±\");\n            } else {\n                await reagirMensagem(sock, message, \"üòû\");\n            }\n        }\n        break;\n\n        case \"entrega\":\n        case \"delivery\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const resultado = rpg.entrega(userId);\n\n            if (resultado.erro) {\n                if (resultado.erro === 'Cooldown') {\n                    await reply(sock, from, resultado.mensagem);\n                } else {\n                    await reply(sock, from, `‚ùå ${resultado.erro}`);\n                }\n                break;\n            }\n\n            await reply(sock, from, resultado.mensagem);\n\n            if (resultado.sucesso) {\n                await reagirMensagem(sock, message, \"üõµ\");\n            } else {\n                await reagirMensagem(sock, message, \"‚ùå\");\n            }\n        }\n        break;\n\n        case \"vermeusaldo\":\n        case \"saldo\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const userId = sender.split('@')[0];\n\n            if (!rpg.isUsuarioRegistrado(userId)) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, \"‚ùå Voc√™ precisa se registrar primeiro! Use `\" + config.prefix + \"registrar`\");\n                break;\n            }\n\n            const userData = rpg.obterDadosUsuario(userId);\n            const dataRegistro = new Date(userData.registrado).toLocaleDateString('pt-BR');\n\n            const extrato = `üèôÔ∏è **EXTRATO NEEXTCITY**\\n\\n` +\n                          `üë§ **Nome:** ${userData.nome}\\n` +\n                          `${userData.banco.emoji} **Banco:** ${userData.banco.nome}\\n` +\n                          `üí∞ **Saldo:** ${userData.saldo} Gold\\n` +\n                          `üìÖ **Registrado em:** ${dataRegistro}\\n\\n` +\n                          `üìä **ESTAT√çSTICAS**\\n\\n` +\n                          `üé£ **Pescas:** ${userData.pescasFeitas}\\n` +\n                          `‚õèÔ∏è **Minera√ß√µes:** ${userData.mineracoesFeitas}\\n` +\n                          `üíº **Trabalhos:** ${userData.trabalhosFeitos}\\n` +\n                          `üî´ **Assaltos:** ${userData.assaltosFeitos}\\n\\n` +\n                          `¬© NEEXT LTDA - NeextCity`;\n\n            await reply(sock, from, extrato);\n            await reagirMensagem(sock, message, \"üè¶\");\n        }\n        break;\n\n        case \"rank\":\n        case \"ranking\": {\n            // S√≥ funciona em grupos com RPG ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå O sistema RPG s√≥ funciona em grupos.\");\n                break;\n            }\n\n            if (!rpg.isRPGAtivo(from)) {\n                await reply(sock, from, \"‚ùå O RPG n√£o est√° ativo neste grupo.\");\n                break;\n            }\n\n            const ranking = rpg.obterRanking();\n            await reply(sock, from, ranking.mensagem);\n            await reagirMensagem(sock, message, \"üèÜ\");\n        }\n        break;\n\n        // ================== FIM DO SISTEMA RPG ==================\n\n        // ================== COMANDOS ADMINISTRATIVOS ==================\n\n        case \"fechargrupo\":\n        case \"fechar\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para fechar o grupo.\");\n                break;\n            }\n\n            try {\n                await sock.groupSettingUpdate(from, 'announcement');\n                await reagirMensagem(sock, message, \"üîí\");\n                await reply(sock, from, \"üîí *GRUPO FECHADO!*\\n\\nApenas admins podem enviar mensagens agora.\");\n                console.log(`üîí Grupo ${from} foi fechado por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao fechar grupo:\", err);\n                await reply(sock, from, \"‚ùå Erro ao fechar o grupo. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"abrirgrupo\":\n        case \"abrir\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para abrir o grupo.\");\n                break;\n            }\n\n            try {\n                await sock.groupSettingUpdate(from, 'not_announcement');\n                await reagirMensagem(sock, message, \"üîì\");\n                await reply(sock, from, \"üîì *GRUPO ABERTO!*\\n\\nTodos os membros podem enviar mensagens agora.\");\n                console.log(`üîì Grupo ${from} foi aberto por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao abrir grupo:\", err);\n                await reply(sock, from, \"‚ùå Erro ao abrir o grupo. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"delmsg\":\n        case \"del\":\n        case \"delete\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para deletar mensagens.\");\n                break;\n            }\n\n            // Verifica se h√° mensagem marcada\n            const quotedMsg = message.message.extendedTextMessage?.contextInfo?.quotedMessage;\n            if (!quotedMsg) {\n                await reply(sock, from, \"‚ùå Marque uma mensagem para deletar!\");\n                break;\n            }\n\n            try {\n                const quotedKey = message.message.extendedTextMessage.contextInfo.stanzaId;\n                const quotedParticipant = message.message.extendedTextMessage.contextInfo.participant;\n\n                const messageKey = {\n                    remoteJid: from,\n                    fromMe: false,\n                    id: quotedKey,\n                    participant: quotedParticipant\n                };\n\n                await sock.sendMessage(from, { delete: messageKey });\n                await reagirMensagem(sock, message, \"üóëÔ∏è\");\n                console.log(`üóëÔ∏è Mensagem deletada por admin ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao deletar mensagem:\", err);\n                await reply(sock, from, \"‚ùå Erro ao deletar mensagem. A mensagem pode ser muito antiga ou j√° ter sido deletada.\");\n            }\n        }\n        break;\n\n        case \"resetlink\":\n        case \"resetarlink\":\n        case \"novolink\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para resetar o link do grupo.\");\n                break;\n            }\n\n            try {\n                const newLink = await sock.groupRevokeInvite(from);\n                await reagirMensagem(sock, message, \"üîó\");\n                await reply(sock, from, `üîó *LINK DO GRUPO RESETADO!*\\n\\n‚úÖ Novo link: https://chat.whatsapp.com/${newLink}\\n\\n‚ö†Ô∏è O link anterior foi invalidado!`);\n                console.log(`üîó Link do grupo ${from} foi resetado por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao resetar link:\", err);\n                await reply(sock, from, \"‚ùå Erro ao resetar o link do grupo. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"ativarsolicitacao\":\n        case \"ativarjoin\":\n        case \"reqon\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para alterar configura√ß√µes do grupo.\");\n                break;\n            }\n\n            try {\n                await sock.groupToggleEphemeral(from, false);\n                await sock.groupSettingUpdate(from, 'locked');\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                await reply(sock, from, \"‚úÖ *SOLICITA√á√ÉO DE ENTRADA ATIVADA!*\\n\\nNovos membros precisar√£o da aprova√ß√£o dos admins para entrar.\");\n                console.log(`‚úÖ Solicita√ß√£o de entrada ativada no grupo ${from} por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao ativar solicita√ß√£o:\", err);\n                await reply(sock, from, \"‚ùå Erro ao ativar solicita√ß√£o de entrada. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"desativarsolicitacao\":\n        case \"desativarjoin\":\n        case \"reqoff\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para alterar configura√ß√µes do grupo.\");\n                break;\n            }\n\n            try {\n                await sock.groupSettingUpdate(from, 'unlocked');\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await reply(sock, from, \"‚ùå *SOLICITA√á√ÉO DE ENTRADA DESATIVADA!*\\n\\nQualquer pessoa com o link pode entrar no grupo agora.\");\n                console.log(`‚ùå Solicita√ß√£o de entrada desativada no grupo ${from} por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao desativar solicita√ß√£o:\", err);\n                await reply(sock, from, \"‚ùå Erro ao desativar solicita√ß√£o de entrada. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"soloadmin\":\n        case \"adminonly\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para alterar configura√ß√µes do grupo.\");\n                break;\n            }\n\n            try {\n                await sock.groupSettingUpdate(from, 'locked');\n                await reagirMensagem(sock, message, \"üîí\");\n                await reply(sock, from, \"üîí *EDI√á√ÉO RESTRITA!*\\n\\nApenas admins podem editar as informa√ß√µes do grupo (nome, descri√ß√£o, foto).\");\n                console.log(`üîí Edi√ß√£o restrita a admins no grupo ${from} por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao restringir edi√ß√£o:\", err);\n                await reply(sock, from, \"‚ùå Erro ao restringir edi√ß√£o do grupo. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"mudargrupo\":\n        case \"mudarnome\":\n        case \"renamegroup\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para mudar o nome do grupo.\");\n                break;\n            }\n\n            const novoNome = args.join(\" \").trim();\n            if (!novoNome) {\n                await reply(sock, from, `‚ùå Use: ${config.prefix}mudargrupo <novo nome>\\n\\nExemplo: ${config.prefix}mudargrupo NEEXT LTDA - Grupo Oficial`);\n                break;\n            }\n\n            if (novoNome.length > 25) {\n                await reply(sock, from, \"‚ùå O nome do grupo deve ter no m√°ximo 25 caracteres!\");\n                break;\n            }\n\n            try {\n                await sock.groupUpdateSubject(from, novoNome);\n                await reagirMensagem(sock, message, \"‚úèÔ∏è\");\n                await reply(sock, from, `‚úèÔ∏è *NOME DO GRUPO ALTERADO!*\\n\\nüìù Novo nome: \"${novoNome}\"\\nüë§ Alterado por: @${sender.split('@')[0]}`, [sender]);\n                console.log(`‚úèÔ∏è Nome do grupo ${from} alterado para \"${novoNome}\" por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao alterar nome do grupo:\", err);\n                await reply(sock, from, \"‚ùå Erro ao alterar o nome do grupo. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"fotodobot\": {\n            const sender = message.key.participant || from;\n            const ehDono = isDono(sender);\n\n            if (!ehDono) {\n                await reply(sock, from, \"‚ùå Apenas o dono pode trocar a foto do bot.\");\n                break;\n            }\n\n            // Verifica se h√° imagem anexada ou marcada\n            let mediaData = null;\n            if (message.message.imageMessage) {\n                mediaData = message.message.imageMessage;\n            } else if (quoted?.imageMessage) {\n                mediaData = quoted.imageMessage;\n            }\n\n            if (!mediaData) {\n                await reply(sock, from, \"‚ùå Envie ou marque uma imagem para usar como foto do bot!\");\n                break;\n            }\n\n            try {\n                await reagirMensagem(sock, message, \"‚è≥\");\n\n                // Baixa a imagem\n                const buffer = await downloadContentFromMessage(mediaData, 'image');\n                let imageBuffer = Buffer.from([]);\n                for await (const chunk of buffer) {\n                    imageBuffer = Buffer.concat([imageBuffer, chunk]);\n                }\n\n                // Atualiza a foto do perfil do bot\n                await sock.updateProfilePicture(sock.user.id, imageBuffer);\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                await reply(sock, from, \"‚úÖ *FOTO DO BOT ALTERADA!*\\n\\nA foto de perfil do bot foi atualizada com sucesso!\");\n                console.log(`üì∏ Foto do bot alterada por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao alterar foto do bot:\", err);\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await reply(sock, from, \"‚ùå Erro ao alterar a foto do bot. Tente novamente.\");\n            }\n        }\n        break;\n\n        case \"fotodogrupo\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para alterar a foto do grupo.\");\n                break;\n            }\n\n            // Verifica se h√° imagem anexada ou marcada\n            let mediaData = null;\n            if (message.message.imageMessage) {\n                mediaData = message.message.imageMessage;\n            } else {\n                // Verifica se h√° mensagem marcada com imagem\n                const quotedMsg = message.message?.extendedTextMessage?.contextInfo?.quotedMessage;\n                if (quotedMsg?.imageMessage) {\n                    mediaData = quotedMsg.imageMessage;\n                }\n            }\n\n            if (!mediaData) {\n                await reply(sock, from, \"‚ùå Envie ou marque uma imagem para usar como foto do grupo!\");\n                break;\n            }\n\n            try {\n                await reagirMensagem(sock, message, \"‚è≥\");\n\n                // Baixa a imagem\n                const buffer = await downloadContentFromMessage(mediaData, 'image');\n                let imageBuffer = Buffer.from([]);\n                for await (const chunk of buffer) {\n                    imageBuffer = Buffer.concat([imageBuffer, chunk]);\n                }\n\n                // Atualiza a foto do grupo\n                await sock.updateProfilePicture(from, imageBuffer);\n\n                await reagirMensagem(sock, message, \"üì∏\");\n                await reply(sock, from, \"üì∏ *FOTO DO GRUPO ALTERADA!*\\n\\nA foto do grupo foi atualizada com sucesso!\");\n                console.log(`üì∏ Foto do grupo ${from} alterada por ${sender.split('@')[0]}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao alterar foto do grupo:\", err);\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await reply(sock, from, \"‚ùå Erro ao alterar a foto do grupo. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        // ================== FIM DOS COMANDOS ADMINISTRATIVOS ==================\n\n        // ================== COMANDOS DE MODO GAMER ==================\n\n        case \"modogamer\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n\n            // Verifica se √© admin\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas administradores podem usar este comando!\", [sender]);\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config) {\n                await reply(sock, from, \"‚ùå Erro ao carregar configura√ß√µes do grupo.\");\n                break;\n            }\n\n            const action = args[0]?.toLowerCase();\n\n            if (action === \"on\" || action === \"ativar\") {\n                if (config.modogamer) {\n                    await reply(sock, from, \"‚ö†Ô∏è Modo Gamer j√° est√° ativo neste grupo!\");\n                    break;\n                }\n\n                config.modogamer = true;\n                const salvou = antiSpam.salvarConfigGrupo(from, config);\n\n                if (salvou) {\n                    await reagirMensagem(sock, message, \"üéÆ\");\n                    await reply(sock, from,\n                        `üéÆ *MODO GAMER ATIVADO!*\\n\\n` +\n                        `‚úÖ Modo gamer foi ativado no grupo!\\n` +\n                        `üéØ Agora os membros podem usar jogos e comandos de divers√£o\\n\\n` +\n                        `üé≤ **Jogos dispon√≠veis:**\\n` +\n                        `‚Ä¢ ${config.prefix}eununca - Enquetes divertidas\\n` +\n                        `‚Ä¢ ${config.prefix}jogodaforca - Jogo da forca\\n` +\n                        `‚Ä¢ ${config.prefix}jogodavelha - Jogo da velha\\n` +\n                        `‚Ä¢ ${config.prefix}roletarussa - Roleta russa\\n\\n` +\n                        `üé™ **Comandos de divers√£o:**\\n` +\n                        `‚Ä¢ Rankings e intera√ß√µes dispon√≠veis\\n` +\n                        `‚Ä¢ Digite ${config.prefix}help para ver todos os comandos\\n\\n` +\n                        `üë§ Ativado por: @${sender.split('@')[0]}`,\n                        [sender]\n                    );\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao salvar configura√ß√£o. Tente novamente.\");\n                }\n            } else if (action === \"off\" || action === \"desativar\") {\n                if (!config.modogamer) {\n                    await reply(sock, from, \"‚ö†Ô∏è Modo Gamer j√° est√° desativado neste grupo!\");\n                    break;\n                }\n\n                config.modogamer = false;\n                const salvou = antiSpam.salvarConfigGrupo(from, config);\n\n                if (salvou) {\n                    await reagirMensagem(sock, message, \"üö´\");\n                    await reply(sock, from,\n                        `üö´ *MODO GAMER DESATIVADO!*\\n\\n` +\n                        `‚ùå Modo gamer foi desativado no grupo\\n` +\n                        `üîí Jogos e comandos de divers√£o n√£o funcionar√£o mais\\n\\n` +\n                        `üë§ Desativado por: @${sender.split('@')[0]}`,\n                        [sender]\n                    );\n                } else {\n                    await reply(sock, from, \"‚ùå Erro ao salvar configura√ß√£o. Tente novamente.\");\n                }\n            } else {\n                const status = config.modogamer ? \"‚úÖ ATIVO\" : \"‚ùå DESATIVO\";\n                await reply(sock, from,\n                    `üéÆ *STATUS DO MODO GAMER*\\n\\n` +\n                    `${status}\\n\\n` +\n                    `üìù **Uso:**\\n` +\n                    `‚Ä¢ ${config.prefix}modogamer on - Ativar\\n` +\n                    `‚Ä¢ ${config.prefix}modogamer off - Desativar\\n\\n` +\n                    `‚ö†Ô∏è Apenas administradores podem alterar`\n                );\n            }\n        }\n        break;\n\n        case \"eununca\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Modo Gamer est√° desativado neste grupo! Use \\`${botConfig.prefix}modogamer on\\` para ativar.`);\n                break;\n            }\n\n            const perguntas = [\n                \"j√° mandou nude\",\n                \"j√° ficou com algu√©m do grupo\",\n                \"j√° mentiu sobre a idade\",\n                \"j√° fingiu estar doente para faltar\",\n                \"j√° roubou algo\",\n                \"j√° traiu algu√©m\",\n                \"j√° foi tra√≠do\",\n                \"j√° chorou assistindo filme\",\n                \"j√° cantou no banho\",\n                \"j√° dan√ßou sozinho no quarto\",\n                \"j√° falou sozinho\",\n                \"j√° dormiu em aula\",\n                \"j√° colou em prova\",\n                \"j√° esqueceu o nome de algu√©m na hora de apresentar\",\n                \"j√° passou vergonha em p√∫blico\",\n                \"j√° mandou mensagem para pessoa errada\",\n                \"j√° stalkeou ex nas redes sociais\",\n                \"j√° fingiu que estava bem quando estava mal\",\n                \"j√° comeu comida do ch√£o\",\n                \"j√° usou roupa por mais de 2 dias seguidos\"\n            ];\n\n            const perguntaAleatoria = perguntas[Math.floor(Math.random() * perguntas.length)];\n\n            await sock.sendMessage(from, {\n                poll: {\n                    name: `ü§î Eu nunca... ${perguntaAleatoria}`,\n                    values: [\"üî• EU J√Å\", \"üòá EU NUNCA\"],\n                    selectableCount: 1\n                }\n            });\n        }\n        break;\n\n        case \"tapa\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                await reply(sock, from, `‚ùå Marque algu√©m para dar um tapa!\\n\\nExemplo: ${config.prefix}tapa @usuario`);\n                break;\n            }\n\n            const target = mentioned[0];\n            await sock.sendMessage(from, {\n                image: { url: \"https://i.ibb.co/BK46Ssyy/21456a10884584ac06ed60363395b8db.jpg\" },\n                caption: `üëã *TAPA GOSTOSO!*\\n\\n@${sender.split('@')[0]} deu um tapa gostoso em @${target.split('@')[0]}! üí•\\n\\nüòè Ai que del√≠cia!`,\n                mentions: [sender, target]\n            });\n        }\n        break;\n\n        case \"rankcorno\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                // Embaralha e pega porcentagens aleat√≥rias\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% ü§°`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/jvxHn5jf/23afed681d95265b23cfc9f32b3c6a35.jpg\" },\n                    caption: `ü§° *RANKING DOS CORNOS*\\n\\n${ranking}\\n\\nüòà Os chifrudos do grupo! ü¶å`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        // Fun√ß√£o simples para envio de GIFs usando m√©todo padr√£o do Baileys\nasync function enviarGif(sock, from, gifUrl, caption, mentions = [], quoted = null) {\n    try {\n        console.log(`üé¨ Enviando GIF: ${gifUrl}`);\n\n        // Baixa o GIF\n        const response = await axios({\n            method: 'GET',\n            url: gifUrl,\n            responseType: 'arraybuffer',\n            timeout: 10000\n        });\n\n        const gifBuffer = Buffer.from(response.data);\n        console.log(`üì• GIF baixado: ${gifBuffer.length} bytes`);\n\n        // Envia como v√≠deo com gifPlayback (m√©todo padr√£o Baileys)\n        await sock.sendMessage(from, {\n            video: gifBuffer,\n            gifPlayback: true,\n            caption: caption,\n            mentions: mentions\n        }, quoted ? { quoted } : {});\n\n        console.log(\"‚úÖ GIF enviado como v√≠deo\");\n        return true;\n\n    } catch (error) {\n        console.log(\"‚ùå Erro ao enviar GIF:\", error.message);\n        return false;\n    }\n}\n\n        case \"matar\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Modo Gamer est√° desativado neste grupo! Use \\`${botConfig.prefix}modogamer on\\` para ativar.`);\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Marque algu√©m para matar!\\n\\nExemplo: ${botConfig.prefix}matar @usuario`);\n                break;\n            }\n\n            const target = mentioned[0];\n\n            // Envia GIF usando m√©todo simples\n            const gifEnviado = await enviarGif(\n                sock,\n                from,\n                \"https://i.ibb.co/DgWJjj0K/58712ef364b6fdef5ae9bcbb48fc0fdb.gif\",\n                `üíÄ *ASSASSINATO!*\\n\\n@${sender.split('@')[0]} matou @${target.split('@')[0]}! ‚ö∞Ô∏è\\n\\nü©∏ RIP... F no chat`,\n                [sender, target],\n                message\n            );\n\n            if (!gifEnviado) {\n                // Fallback para texto se o GIF falhar\n                await reply(sock, from, `üíÄ *ASSASSINATO!*\\n\\n@${sender.split('@')[0]} matou @${target.split('@')[0]}! ‚ö∞Ô∏è\\n\\nü©∏ RIP... F no chat`, [sender, target]);\n            }\n        }\n        break;\n\n        case \"atirar\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Modo Gamer est√° desativado neste grupo! Use \\`${botConfig.prefix}modogamer on\\` para ativar.`);\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Marque algu√©m para atirar!\\n\\nExemplo: ${botConfig.prefix}atirar @usuario`);\n                break;\n            }\n\n            const target = mentioned[0];\n\n            // Envia GIF usando m√©todo simples\n            const gifEnviado = await enviarGif(\n                sock,\n                from,\n                \"https://i.ibb.co/KpVxK1PB/9ab46702d1f0669a0ae40464b25568f2.gif\",\n                `üî´ *TIRO CERTEIRO!*\\n\\n@${sender.split('@')[0]} atirou em @${target.split('@')[0]}! üí•\\n\\nüéØ Pegou em cheio!`,\n                [sender, target],\n                message\n            );\n\n            if (!gifEnviado) {\n                // Fallback para texto se o GIF falhar\n                await reply(sock, from, `üî´ *TIRO CERTEIRO!*\\n\\n@${sender.split('@')[0]} atirou em @${target.split('@')[0]}! üí•\\n\\nüéØ Pegou em cheio!`, [sender, target]);\n            }\n        }\n        break;\n\n        case \"rankcasal\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                if (participants.length < 2) {\n                    await reply(sock, from, \"‚ùå Precisa ter pelo menos 2 pessoas no grupo!\");\n                    break;\n                }\n\n                // Escolhe duas pessoas aleat√≥rias\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                const pessoa1 = shuffled[0];\n                const pessoa2 = shuffled[1];\n                const compatibility = Math.floor(Math.random() * 100) + 1;\n                const love1 = Math.floor(Math.random() * 100) + 1;\n                const love2 = Math.floor(Math.random() * 100) + 1;\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/1G69wkJD/d32b5cfe067aa82bf2a5356c39499539.jpg\" },\n                    caption: `üíï *RANK CASAL*\\n\\n` +\n                        `üë´ Casal formado:\\n` +\n                        `üíù @${pessoa1.split('@')[0]} ‚ù§Ô∏è @${pessoa2.split('@')[0]}\\n\\n` +\n                        `üìä Compatibilidade: ${compatibility}%\\n` +\n                        `üíñ @${pessoa1.split('@')[0]} gosta ${love1}% de @${pessoa2.split('@')[0]}\\n` +\n                        `üíò @${pessoa2.split('@')[0]} gosta ${love2}% de @${pessoa1.split('@')[0]}\\n\\n` +\n                        `${compatibility > 80 ? 'üî• Casal perfeito!' : compatibility > 60 ? 'üòç Muito amor!' : compatibility > 40 ? 'üòä Pode dar certo!' : 'üíî Melhor s√≥ amigos!'}`,\n                    mentions: [pessoa1, pessoa2]\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking de casal.\");\n            }\n        }\n        break;\n\n        case \"prender\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                await reply(sock, from, `‚ùå Marque algu√©m para prender!\\n\\nExemplo: ${config.prefix}prender @usuario`);\n                break;\n            }\n\n            const crimes = [\n                \"roubo de cora√ß√£o\", \"excesso de beleza\", \"ser muito gostoso(a)\", \"causar suspiros\",\n                \"roubar olhares\", \"ser irresist√≠vel\", \"crime de sedu√ß√£o\", \"atentado ao pudor\",\n                \"porte ilegal de charme\", \"forma√ß√£o de quadrilha do amor\", \"assalto ao cora√ß√£o\",\n                \"tr√°fico de sorrisos\", \"porte de sorriso fatal\", \"estelionato sentimental\"\n            ];\n\n            const target = mentioned[0];\n            const crime = crimes[Math.floor(Math.random() * crimes.length)];\n\n            await sock.sendMessage(from, {\n                image: { url: \"https://i.ibb.co/XfrfGk3n/bfde95077068d135cbcf9e039147b2c0.jpg\" },\n                caption: `üöî *PRIS√ÉO!*\\n\\n@${target.split('@')[0]} foi preso(a) por @${sender.split('@')[0]}!\\n\\n‚õìÔ∏è Crime: ${crime}\\nüîí Fian√ßa: 10 beijinhos!`,\n                mentions: [sender, target]\n            });\n        }\n        break;\n\n        case \"beijar\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Modo Gamer est√° desativado neste grupo! Use \\`${botConfig.prefix}modogamer on\\` para ativar.`);\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Marque algu√©m para beijar!\\n\\nExemplo: ${botConfig.prefix}beijar @usuario`);\n                break;\n            }\n\n            const target = mentioned[0];\n\n            // Envia texto diretamente com emojis, mais confi√°vel\n            await reply(sock, from, `üíã *BEIJINHO!*\\n\\n@${sender.split('@')[0]} deu um beijinho em @${target.split('@')[0]}! üòò\\n\\nüíï Que fofo! üíãüíãüíã`, [sender, target]);\n        }\n        break;\n\n        case \"atropelar\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Modo Gamer est√° desativado neste grupo! Use \\`${botConfig.prefix}modogamer on\\` para ativar.`);\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Marque algu√©m para atropelar!\\n\\nExemplo: ${botConfig.prefix}atropelar @usuario`);\n                break;\n            }\n\n            const target = mentioned[0];\n\n            await reply(sock, from, `üöóüí® *ATROPELAMENTO!*\\n\\n@${target.split('@')[0]} foi atropelado(a) por @${sender.split('@')[0]}! üöë\\n\\nüòµ‚Äçüí´ Chamem o SAMU! üö®üö®üö®`, [sender, target]);\n        }\n        break;\n\n        case \"dedo\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Modo Gamer est√° desativado neste grupo! Use \\`${botConfig.prefix}modogamer on\\` para ativar.`);\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Marque algu√©m para fazer dedo!\\n\\nExemplo: ${botConfig.prefix}dedo @usuario`);\n                break;\n            }\n\n            const target = mentioned[0];\n\n            await reply(sock, from, `üñï *DEDO!*\\n\\n@${sender.split('@')[0]} fez dedo para @${target.split('@')[0]}! üò†\\n\\nü§¨ Vai se lascar! üñïüñïüñï`, [sender, target]);\n        }\n        break;\n\n        case \"sarra\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Modo Gamer est√° desativado neste grupo! Use \\`${botConfig.prefix}modogamer on\\` para ativar.`);\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                const botConfig = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Marque algu√©m para sarrar!\\n\\nExemplo: ${botConfig.prefix}sarra @usuario`);\n                break;\n            }\n\n            const target = mentioned[0];\n\n            await reply(sock, from, `üçë *SARRADA!*\\n\\n@${sender.split('@')[0]} deu uma sarrada em @${target.split('@')[0]}! üî•\\n\\nüòà Que safadeza! üî•üî•üî•`, [sender, target]);\n        }\n        break;\n\n        case \"rankgay\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üè≥Ô∏è‚Äçüåà`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/9mzjcW0b/4f5a6af5b0375c87e9a3e63143e231fe.jpg\" },\n                    caption: `üè≥Ô∏è‚Äçüåà *RANKING GAY*\\n\\n${ranking}\\n\\n‚ú® Pride sem julgamentos! üåà`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"rankburro\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üß†`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/0VV96XgJ/7760232d1a909d291a3231e720bf5ec9.jpg\" },\n                    caption: `üß† *RANKING DOS BURROS*\\n\\n${ranking}\\n\\nü§™ Burrice extrema! üìâ`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"ranklesbica\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üè≥Ô∏è‚Äçüåà`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/jkwgSYYK/0607b00f9464319df28dcbe3b4a965dd.jpg\" },\n                    caption: `üè≥Ô∏è‚Äçüåà *RANKING L√âSBICA*\\n\\n${ranking}\\n\\nüíú Love is love! üåà`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"impostor\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                if (participants.length < 2) {\n                    await reply(sock, from, \"‚ùå Precisa ter pelo menos 2 pessoas no grupo!\");\n                    break;\n                }\n\n                const impostor = participants[Math.floor(Math.random() * participants.length)];\n                const cores = [\"Vermelho\", \"Azul\", \"Verde\", \"Rosa\", \"Laranja\", \"Amarelo\", \"Preto\", \"Branco\", \"Roxo\", \"Marrom\"];\n                const cor = cores[Math.floor(Math.random() * cores.length)];\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/Q7Xb0Pxg/59f4312f9142a3529e1465a636a92ec7.jpg\" },\n                    caption: `üî¥ *IMPOSTOR DETECTADO!*\\n\\n@${impostor.split('@')[0]} √© o IMPOSTOR! üö®\\n\\nüé® Cor: ${cor}\\n‚ö†Ô∏è EJETEM ESSA PESSOA!\\n\\nüöÄ Among Us Vibes!`,\n                    mentions: [impostor]\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao escolher impostor.\");\n            }\n        }\n        break;\n\n        case \"rankmaconheiro\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üåø`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/NdvLNTPN/15026da7ed842481343ded7960a8f8d5.jpg\" },\n                    caption: `üåø *RANKING DOS MACONHEIROS*\\n\\n${ranking}\\n\\nüí® Os chapados! üçÉ`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"rankbonito\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üòç`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/CKNS2Frr/150f9a8e0becc71f9c20113addb3d433.jpg\" },\n                    caption: `üòç *RANKING DOS BONITOS*\\n\\n${ranking}\\n\\n‚ú® Os gostosos do grupo! üî•`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"rankemo\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üñ§`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/9mtKb5rC/92e9188040a0728af1a49c61dd0c9279.jpg\" },\n                    caption: `üñ§ *RANKING DOS EMOS*\\n\\n${ranking}\\n\\nüíÄ Os depressivos! üò≠`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"rankfeio\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üëπ`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/3x06vHm/7760232d1a909d291a3231e720bf5ec9.jpg\" },\n                    caption: `üëπ *RANKING DOS FEIOS*\\n\\n${ranking}\\n\\nü§Æ Os horrorosos! üò±`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"jogodaforca\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const palavras = [\n                \"JAVASCRIPT\", \"PROGRAMACAO\", \"COMPUTADOR\", \"TELEFONE\", \"INTERNET\",\n                \"WHATSAPP\", \"BRASIL\", \"FUTEBOL\", \"CHOCOLATE\", \"PIZZA\",\n                \"MUSICA\", \"CINEMA\", \"ESCOLA\", \"TRABALHO\", \"FAMILIA\",\n                \"AMIZADE\", \"VIAGEM\", \"DINHEIRO\", \"SAUDE\", \"FELICIDADE\"\n            ];\n\n            const palavra = palavras[Math.floor(Math.random() * palavras.length)];\n            const palavraOculta = palavra.replace(/./g, \"_ \");\n            const erros = 0;\n            const letrasUsadas = [];\n\n            // Salva o jogo em um sistema simples (pode ser expandido)\n            global.jogoDaForca = global.jogoDaForca || {};\n            global.jogoDaForca[from] = {\n                palavra: palavra,\n                palavraOculta: palavraOculta,\n                erros: erros,\n                letrasUsadas: letrasUsadas,\n                ativo: true\n            };\n\n            const desenhos = [\n                \"```\\n  +---+\\n  |   |\\n      |\\n      |\\n      |\\n      |\\n=========```\",\n                \"```\\n  +---+\\n  |   |\\n  O   |\\n      |\\n      |\\n      |\\n=========```\",\n                \"```\\n  +---+\\n  |   |\\n  O   |\\n  |   |\\n      |\\n      |\\n=========```\",\n                \"```\\n  +---+\\n  |   |\\n  O   |\\n /|   |\\n      |\\n      |\\n=========```\",\n                \"```\\n  +---+\\n  |   |\\n  O   |\\n /|\\\\  |\\n      |\\n      |\\n=========```\",\n                \"```\\n  +---+\\n  |   |\\n  O   |\\n /|\\\\  |\\n /    |\\n      |\\n=========```\",\n                \"```\\n  +---+\\n  |   |\\n  O   |\\n /|\\\\  |\\n / \\\\  |\\n      |\\n=========```\"\n            ];\n\n            await reply(sock, from,\n                `üéØ *JOGO DA FORCA INICIADO!*\\n\\n` +\n                `${desenhos[0]}\\n\\n` +\n                `üìù Palavra: ${palavraOculta}\\n` +\n                `‚ùå Erros: ${erros}/6\\n` +\n                `üî§ Letras usadas: Nenhuma\\n\\n` +\n                `üí° Digite uma letra para tentar adivinhar!\\n` +\n                `‚ö†Ô∏è Apenas letras A-Z s√£o aceitas`\n            );\n        }\n        break;\n\n        case \"jogodavelha\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                await reply(sock, from, `‚ùå Marque algu√©m para jogar!\\n\\nExemplo: ${config.prefix}jogodavelha @usuario`);\n                break;\n            }\n\n            const oponente = mentioned[0];\n            if (oponente === sender) {\n                await reply(sock, from, \"‚ùå Voc√™ n√£o pode jogar contra si mesmo!\");\n                break;\n            }\n\n            // Inicializa o jogo\n            global.jogoDaVelha = global.jogoDaVelha || {};\n            global.jogoDaVelha[from] = {\n                jogador1: sender,\n                jogador2: oponente,\n                vezDe: sender,\n                tabuleiro: [\"1Ô∏è‚É£\", \"2Ô∏è‚É£\", \"3Ô∏è‚É£\", \"4Ô∏è‚É£\", \"5Ô∏è‚É£\", \"6Ô∏è‚É£\", \"7Ô∏è‚É£\", \"8Ô∏è‚É£\", \"9Ô∏è‚É£\"],\n                ativo: true\n            };\n\n            const tabuleiro =\n                `${global.jogoDaVelha[from].tabuleiro[0]} ${global.jogoDaVelha[from].tabuleiro[1]} ${global.jogoDaVelha[from].tabuleiro[2]}\\n` +\n                `${global.jogoDaVelha[from].tabuleiro[3]} ${global.jogoDaVelha[from].tabuleiro[4]} ${global.jogoDaVelha[from].tabuleiro[5]}\\n` +\n                `${global.jogoDaVelha[from].tabuleiro[6]} ${global.jogoDaVelha[from].tabuleiro[7]} ${global.jogoDaVelha[from].tabuleiro[8]}`;\n\n            await reply(sock, from,\n                `‚≠ï *JOGO DA VELHA INICIADO!*\\n\\n` +\n                `üë§ **Jogador 1:** @${sender.split('@')[0]} (‚ùå)\\n` +\n                `üë§ **Jogador 2:** @${oponente.split('@')[0]} (‚≠ï)\\n\\n` +\n                `üé≤ **Tabuleiro:**\\n${tabuleiro}\\n\\n` +\n                `üéØ **Vez de:** @${sender.split('@')[0]}\\n\\n` +\n                `üí° **Como jogar:** Digite o n√∫mero de 1 a 9 para marcar sua posi√ß√£o`,\n                [sender, oponente]\n            );\n        }\n        break;\n\n        case \"resetjogodavelha\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n\n            if (!global.jogoDaVelha || !global.jogoDaVelha[from]) {\n                await reply(sock, from, \"‚ùå N√£o h√° jogo da velha ativo neste grupo.\");\n                break;\n            }\n\n            // Verifica se √© um dos jogadores ou admin\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n            const ehJogador = global.jogoDaVelha[from].jogador1 === sender || global.jogoDaVelha[from].jogador2 === sender;\n\n            if (ehJogador || ehAdmin || ehDono) {\n                delete global.jogoDaVelha[from];\n                await reply(sock, from, \"üîÑ *JOGO DA VELHA RESETADO!*\\n\\nO jogo foi finalizado e pode ser iniciado novamente.\");\n                await reagirMensagem(sock, message, \"‚úÖ\");\n            } else {\n                await reply(sock, from, \"‚ùå Apenas os jogadores participantes ou admins podem resetar o jogo.\");\n            }\n        }\n        break;\n\n        // ================== COMANDOS EXTRAS ==================\n\n        case \"rankfumante\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üö¨`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/qYDN9Q7z/70c6ff9e2b8b8ae8a5b6f4a3e8c2e42a.jpg\" },\n                    caption: `üö¨ *RANKING DOS FUMANTES*\\n\\n${ranking}\\n\\nüí® Os viciados em nicotina! üö≠`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"rankpobre\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üí∏`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/1G69wkJD/d32b5cfe067aa82bf2a5356c39499539.jpg\" },\n                    caption: `üí∏ *RANKING DOS POBRES*\\n\\n${ranking}\\n\\nü™ô Os sem dinheiro! üí∞`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        case \"ranksad\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participants = groupMetadata.participants.map(p => p.id);\n\n                const shuffled = [...participants].sort(() => Math.random() - 0.5);\n                let ranking = shuffled.slice(0, Math.min(10, participants.length)).map((participant, index) => {\n                    const percentage = Math.floor(Math.random() * 100) + 1;\n                    return `${index + 1}. @${participant.split('@')[0]} - ${percentage}% üò≠`;\n                }).join('\\n');\n\n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/9mtKb5rC/92e9188040a0728af1a49c61dd0c9279.jpg\" },\n                    caption: `üò≠ *RANKING DOS TRISTES*\\n\\n${ranking}\\n\\nüíî Os deprimidos! üò¢`,\n                    mentions: participants\n                });\n            } catch (err) {\n                await reply(sock, from, \"‚ùå Erro ao gerar ranking.\");\n            }\n        }\n        break;\n\n        // ================== RODAR WORKFLOWS ==================\n\n        case \"roletarussa\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const mentioned = message.message?.extendedTextMessage?.contextInfo?.mentionedJid;\n\n            if (!mentioned || mentioned.length === 0) {\n                await reply(sock, from, `‚ùå Marque algu√©m para jogar roleta russa!\\n\\nExemplo: ${config.prefix}roletarussa @usuario`);\n                break;\n            }\n\n            const oponente = mentioned[0];\n            if (oponente === sender) {\n                await reply(sock, from, \"‚ùå Voc√™ n√£o pode jogar roleta russa contra si mesmo!\");\n                break;\n            }\n\n            // Inicializa o jogo\n            global.roletaRussa = global.roletaRussa || {};\n            global.roletaRussa[from] = {\n                jogador1: sender,\n                jogador2: oponente,\n                vezDe: sender,\n                balaPosition: Math.floor(Math.random() * 6) + 1, // Posi√ß√£o da bala (1-6)\n                tiroAtual: 1,\n                ativo: true\n            };\n\n            await reply(sock, from,\n                `üî´ *ROLETA RUSSA INICIADA!*\\n\\n` +\n                `üë§ **Jogadores:**\\n` +\n                `üéØ @${sender.split('@')[0]}\\n` +\n                `üéØ @${oponente.split('@')[0]}\\n\\n` +\n                `üíÄ **Regras:**\\n` +\n                `‚Ä¢ H√° 1 bala em 6 c√¢maras\\n` +\n                `‚Ä¢ Digite \\`.disparar\\` para atirar\\n` +\n                `‚Ä¢ Quem pegar a bala... üíÄ\\n\\n` +\n                `üé≤ **Vez de:** @${sender.split('@')[0]}\\n` +\n                `üî´ **Tiro:** 1/6`,\n                [sender, oponente]\n            );\n        }\n        break;\n\n        case \"disparar\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n\n            if (!global.roletaRussa || !global.roletaRussa[from]) {\n                await reply(sock, from, \"‚ùå N√£o h√° jogo de roleta russa ativo neste grupo. Use `.roletarussa @usuario` para come√ßar.\");\n                break;\n            }\n\n            const jogo = global.roletaRussa[from];\n\n            // Verifica se √© a vez do jogador\n            if (jogo.vezDe !== sender) {\n                const vezDeNome = jogo.vezDe === jogo.jogador1 ? jogo.jogador1.split('@')[0] : jogo.jogador2.split('@')[0];\n                await reply(sock, from, `‚ùå N√£o √© sua vez! √â a vez de @${vezDeNome}`, [jogo.vezDe]);\n                break;\n            }\n\n            // Verifica se pegou a bala\n            if (jogo.tiroAtual === jogo.balaPosition) {\n                // MORTE!\n                delete global.roletaRussa[from];\n                \n                await sock.sendMessage(from, {\n                    image: { url: \"https://i.ibb.co/DgWJjj0K/58712ef364b6fdef5ae9bcbb48fc0fdb.gif\" },\n                    caption: `üíÄ *BANG! VOC√ä MORREU!* üíÄ\\n\\n@${sender.split('@')[0]} pegou a bala! üî´üí•\\n\\n‚ö∞Ô∏è Game Over! RIP...\\n\\nüèÜ **Vencedor:** @${jogo.vezDe === jogo.jogador1 ? jogo.jogador2.split('@')[0] : jogo.jogador1.split('@')[0]}`,\n                    mentions: [jogo.jogador1, jogo.jogador2]\n                });\n                \n                await reagirMensagem(sock, message, \"üíÄ\");\n                break;\n            }\n\n            // Seguro! Pr√≥ximo jogador\n            jogo.tiroAtual++;\n            jogo.vezDe = jogo.vezDe === jogo.jogador1 ? jogo.jogador2 : jogo.jogador1;\n\n            const proximoJogador = jogo.vezDe.split('@')[0];\n\n            await reply(sock, from,\n                `üî´ *CLICK!* Voc√™ teve sorte!\\n\\n` +\n                `‚úÖ @${sender.split('@')[0]} sobreviveu!\\n\\n` +\n                `üé≤ **Vez de:** @${proximoJogador}\\n` +\n                `üî´ **Tiro:** ${jogo.tiroAtual}/6\\n\\n` +\n                `üí° Digite \\`.disparar\\` para atirar`,\n                [jogo.jogador1, jogo.jogador2]\n            );\n\n            await reagirMensagem(sock, message, \"üòÖ\");\n        }\n        break;\n\n        case \"resetroleta\": {\n            // Verifica se modo gamer est√° ativo\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const config = antiSpam.carregarConfigGrupo(from);\n            if (!config || !config.modogamer) {\n                await reply(sock, from, \"‚ùå Modo Gamer est√° desativado neste grupo! Use `.modogamer on` para ativar.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n\n            if (!global.roletaRussa || !global.roletaRussa[from]) {\n                await reply(sock, from, \"‚ùå N√£o h√° jogo de roleta russa ativo neste grupo.\");\n                break;\n            }\n\n            // Verifica se √© um dos jogadores ou admin\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n            const ehJogador = global.roletaRussa[from].jogador1 === sender || global.roletaRussa[from].jogador2 === sender;\n\n            if (ehJogador || ehAdmin || ehDono) {\n                delete global.roletaRussa[from];\n                await reply(sock, from, \"üîÑ *ROLETA RUSSA RESETADA!*\\n\\nO jogo foi finalizado e pode ser iniciado novamente.\");\n                await reagirMensagem(sock, message, \"‚úÖ\");\n            } else {\n                await reply(sock, from, \"‚ùå Apenas os jogadores participantes ou admins podem resetar o jogo.\");\n            }\n        }\n        break;\n\n        case \"promover\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para promover usu√°rios.\");\n                break;\n            }\n\n            // Verifica se h√° usu√°rio mencionado ou mensagem marcada\n            let targetUser = null;\n            \n            if (message.message.extendedTextMessage?.contextInfo?.mentionedJid?.length > 0) {\n                // Se mencionou algu√©m\n                targetUser = message.message.extendedTextMessage.contextInfo.mentionedJid[0];\n            } else if (message.message.extendedTextMessage?.contextInfo?.quotedMessage) {\n                // Se marcou uma mensagem, pega o autor da mensagem\n                targetUser = message.message.extendedTextMessage.contextInfo.participant;\n            } else {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Use o comando marcando uma mensagem ou mencionando algu√©m!\\n\\nExemplo: ${config.prefix}promover @usuario`);\n                break;\n            }\n\n            if (!targetUser) {\n                await reply(sock, from, \"‚ùå Usu√°rio n√£o identificado.\");\n                break;\n            }\n\n            // Verifica se o usu√°rio j√° √© admin\n            const jaEhAdmin = await isAdmin(sock, from, targetUser);\n            if (jaEhAdmin) {\n                await reply(sock, from, `‚ö†Ô∏è @${targetUser.split('@')[0]} j√° √© administrador do grupo!`, [targetUser]);\n                break;\n            }\n\n            try {\n                await sock.groupParticipantsUpdate(from, [targetUser], \"promote\");\n                await reagirMensagem(sock, message, \"‚¨ÜÔ∏è\");\n                await reply(sock, from, `‚¨ÜÔ∏è *USU√ÅRIO PROMOVIDO!*\\n\\n‚úÖ @${targetUser.split('@')[0]} agora √© administrador do grupo!\\n\\nüë§ Promovido por: @${sender.split('@')[0]}`, [targetUser, sender]);\n                console.log(`‚¨ÜÔ∏è Usu√°rio ${targetUser.split('@')[0]} promovido a admin por ${sender.split('@')[0]} no grupo ${from}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao promover usu√°rio:\", err);\n                await reply(sock, from, \"‚ùå Erro ao promover usu√°rio. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"rebaixar\": {\n            // S√≥ funciona em grupos\n            if (!from.endsWith('@g.us') && !from.endsWith('@lid')) {\n                await reply(sock, from, \"‚ùå Este comando s√≥ pode ser usado em grupos.\");\n                break;\n            }\n\n            const sender = message.key.participant || from;\n            const ehAdmin = await isAdmin(sock, from, sender);\n            const ehDono = isDono(sender);\n\n            if (!ehAdmin && !ehDono) {\n                await reply(sock, from, \"‚ùå Apenas admins podem usar este comando.\");\n                break;\n            }\n\n            // Verifica se bot √© admin\n            const botAdmin = await botEhAdmin(sock, from);\n            if (!botAdmin) {\n                await reply(sock, from, \"‚ùå O bot precisa ser admin para rebaixar usu√°rios.\");\n                break;\n            }\n\n            // Verifica se h√° usu√°rio mencionado ou mensagem marcada\n            let targetUser = null;\n            \n            if (message.message.extendedTextMessage?.contextInfo?.mentionedJid?.length > 0) {\n                // Se mencionou algu√©m\n                targetUser = message.message.extendedTextMessage.contextInfo.mentionedJid[0];\n            } else if (message.message.extendedTextMessage?.contextInfo?.quotedMessage) {\n                // Se marcou uma mensagem, pega o autor da mensagem\n                targetUser = message.message.extendedTextMessage.contextInfo.participant;\n            } else {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Use o comando marcando uma mensagem ou mencionando algu√©m!\\n\\nExemplo: ${config.prefix}rebaixar @usuario`);\n                break;\n            }\n\n            if (!targetUser) {\n                await reply(sock, from, \"‚ùå Usu√°rio n√£o identificado.\");\n                break;\n            }\n\n            // Verifica se o usu√°rio √© admin\n            const ehAdminTarget = await isAdmin(sock, from, targetUser);\n            if (!ehAdminTarget) {\n                await reply(sock, from, `‚ö†Ô∏è @${targetUser.split('@')[0]} n√£o √© administrador do grupo!`, [targetUser]);\n                break;\n            }\n\n            try {\n                await sock.groupParticipantsUpdate(from, [targetUser], \"demote\");\n                await reagirMensagem(sock, message, \"‚¨áÔ∏è\");\n                await reply(sock, from, `‚¨áÔ∏è *USU√ÅRIO REBAIXADO!*\\n\\n‚úÖ @${targetUser.split('@')[0]} n√£o √© mais administrador do grupo!\\n\\nüë§ Rebaixado por: @${sender.split('@')[0]}`, [targetUser, sender]);\n                console.log(`‚¨áÔ∏è Usu√°rio ${targetUser.split('@')[0]} rebaixado por ${sender.split('@')[0]} no grupo ${from}`);\n            } catch (err) {\n                console.error(\"‚ùå Erro ao rebaixar usu√°rio:\", err);\n                await reply(sock, from, \"‚ùå Erro ao rebaixar usu√°rio. Verifique se o bot tem permiss√µes de admin.\");\n            }\n        }\n        break;\n\n        case \"transmiss√£o\":\n        case \"transmissao\": {\n            const sender = message.key.participant || from;\n            const ehDono = isDono(sender);\n\n            if (!ehDono) {\n                await reply(sock, from, \"‚ùå Apenas o dono pode usar este comando.\");\n                break;\n            }\n\n            const mensagem = args.join(' ').trim();\n            if (!mensagem) {\n                const config = obterConfiguracoes();\n                await reply(sock, from, `‚ùå Digite a mensagem para transmitir!\\n\\nExemplo: ${config.prefix}transmiss√£o Ol√° pessoal! Esta √© uma mensagem importante.`);\n                break;\n            }\n\n            try {\n                await reagirMensagem(sock, message, \"‚è≥\");\n\n                // Busca todos os grupos que o bot participa\n                const allGroups = await sock.groupFetchAllParticipating();\n                const groups = Object.keys(allGroups).filter(id => id.endsWith('@g.us'));\n                \n                if (groups.length === 0) {\n                    await reply(sock, from, \"‚ùå O bot n√£o est√° em nenhum grupo para transmitir.\");\n                    break;\n                }\n\n                const config = obterConfiguracoes();\n                const nomeTransmissor = config.nickDoDono;\n\n                let sucessos = 0;\n                let falhas = 0;\n\n                for (const groupId of groups) {\n                    try {\n                        const mensagemTransmissao = `üì¢ *TRANSMISS√ÉO OFICIAL*\\n\\n` +\n                                                   `üìù *Mensagem:* ${mensagem}\\n\\n` +\n                                                   `üë§ *Enviado por:* ${nomeTransmissor}\\n` +\n                                                   `ü§ñ *Via:* NEEXT BOT\\n\\n` +\n                                                   `¬© NEEXT LTDA`;\n\n                        await sock.sendMessage(groupId, {\n                            text: mensagemTransmissao,\n                            contextInfo: {\n                                forwardingScore: 100000,\n                                isForwarded: true,\n                                forwardedNewsletterMessageInfo: {\n                                    newsletterJid: \"120363289739581116@newsletter\",\n                                    newsletterName: \"üê¶‚Äçüî•‚Éù ùÜÖ‡øô‚µø◊ÇùÜÜùù¢ùù£ùù£ùù¨ùóßìãåùóüùóßùóóùóî‚¶ô‚¶ôÍú£‡æÄ\"\n                                },\n                                externalAdReply: {\n                                    title: \"üì¢ TRANSMISS√ÉO OFICIAL\",\n                                    body: `¬© NEEXT LTDA ‚Ä¢ ${nomeTransmissor}`,\n                                    thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n                                    mediaType: 1,\n                                    sourceUrl: \"https://www.neext.online\"\n                                }\n                            }\n                        });\n\n                        sucessos++;\n                        console.log(`üì¢ Transmiss√£o enviada para grupo: ${groupId}`);\n\n                        // Rate limiting - aguarda entre envios para evitar spam/rate limits\n                        await new Promise(resolve => setTimeout(resolve, 1500));\n\n                    } catch (err) {\n                        console.error(`‚ùå Erro ao enviar transmiss√£o para ${groupId}:`, err);\n                        falhas++;\n                    }\n                }\n\n                await reagirMensagem(sock, message, \"‚úÖ\");\n                await reply(sock, from, \n                    `‚úÖ *TRANSMISS√ÉO CONCLU√çDA!*\\n\\n` +\n                    `üìä *Estat√≠sticas:*\\n` +\n                    `‚úÖ **Sucessos:** ${sucessos} grupos\\n` +\n                    `‚ùå **Falhas:** ${falhas} grupos\\n` +\n                    `üì± **Total:** ${groups.length} grupos\\n\\n` +\n                    `üìù **Mensagem:** ${mensagem}\\n\\n` +\n                    `¬© NEEXT LTDA`\n                );\n\n                console.log(`üì¢ Transmiss√£o conclu√≠da: ${sucessos} sucessos, ${falhas} falhas de ${groups.length} grupos`);\n\n            } catch (err) {\n                console.error(\"‚ùå Erro na transmiss√£o:\", err);\n                await reagirMensagem(sock, message, \"‚ùå\");\n                await reply(sock, from, \"‚ùå Erro ao realizar transmiss√£o. Tente novamente.\");\n            }\n        }\n        break;\n    }\n}\n\n// Fun√ß√£o para configurar os listeners do bot\nfunction setupListeners(sock) {\n    sock.ev.on('messages.upsert', async ({ messages, type }) => {\n        if (type !== 'notify') return;\n        \n        for (const message of messages) {\n            try {\n                // Ignora mensagens pr√≥prias\n                if (message.key.fromMe) continue;\n                \n                // Verifica se j√° foi processada\n                const messageId = message.key.id;\n                if (processedMessages.has(messageId)) continue;\n                processedMessages.add(messageId);\n                \n                // Log da mensagem recebida\n                const from = message.key.remoteJid;\n                const isGroup = from.endsWith('@g.us');\n                const sender = isGroup ? message.key.participant : from;\n                const messageText = getMessageText(message.message);\n                \n                logMensagem(from, sender, messageText, isGroup);\n                \n                // Normaliza a mensagem\n                const { normalized, quoted } = normalizeMessage(message);\n                \n                // Verifica antipv (bloqueio de PV para n√£o-donos)\n                if (!isGroup) {\n                    const config = require('./settings/settings.json');\n                    if (config.antipv && !isDono(sender)) {\n                        console.log(`üö´ PV bloqueado: ${sender.split('@')[0]} (ANTIPV ativo)`);\n                        continue; // Ignora completamente mensagens de PV de n√£o-donos\n                    }\n                }\n\n                // Processa anti-spam primeiro\n                const bloqueado = await processarAntiSpam(sock, normalized);\n                if (bloqueado) continue;\n\n                // Rastreamento de atividades para ranking (apenas em grupos)\n                if (isGroup) {\n                    const configGrupo = antiSpam.carregarConfigGrupo(from);\n                    if (configGrupo && configGrupo.rankativo) {\n                        // Determina o tipo de atividade\n                        let tipoAtividade = '';\n                        \n                        // Verifica se √© sticker\n                        if (normalized.message.stickerMessage) {\n                            tipoAtividade = 'sticker';\n                        }\n                        // Verifica se √© m√≠dia (foto, v√≠deo, √°udio)\n                        else if (normalized.message.imageMessage || normalized.message.videoMessage || \n                                normalized.message.audioMessage || normalized.message.documentMessage) {\n                            tipoAtividade = 'midia';\n                        }\n                        // Se tem texto, √© mensagem\n                        else if (messageText && messageText.trim()) {\n                            // Verifica se vai ser um comando\n                            const config = obterConfiguracoes();\n                            const prefix = config.prefix;\n                            if (messageText.trim().startsWith(prefix)) {\n                                tipoAtividade = 'comando';\n                            } else {\n                                tipoAtividade = 'mensagem';\n                            }\n                        }\n\n                        // Registra a atividade se foi identificada\n                        if (tipoAtividade) {\n                            rankAtivo.registrarAtividade(from, sender, tipoAtividade);\n                            console.log(`üìä Atividade registrada: ${sender.split('@')[0]} -> ${tipoAtividade} no grupo ${from.split('@')[0]}`);\n                        }\n                    }\n                }\n                \n                // Extrai texto da mensagem\n                const text = messageText.trim();\n                if (!text) continue;\n                \n                // Verifica se √© comando\n                const config = obterConfiguracoes();\n                const prefix = config.prefix;\n                \n                if (text.startsWith(prefix)) {\n                    const args = text.slice(prefix.length).trim().split(/ +/);\n                    const command = args.shift().toLowerCase();\n                    \n                    console.log(`ü§ñ Comando recebido: ${command} de ${sender.split('@')[0]}`);\n                    \n                    // Executa o comando\n                    await handleCommand(sock, normalized, command, args, from, quoted);\n                } else {\n                    // Processa mensagens que n√£o s√£o comandos\n                    if (text.toLowerCase() === 'prefixo') {\n                        await reply(sock, from, `ü§ñ *Prefixo atual:* \\`${prefix}\\`\\n\\nüí° Use ${prefix}menu para ver os comandos dispon√≠veis.`);\n                    }\n                }\n                \n            } catch (error) {\n                console.error('‚ùå Erro ao processar mensagem:', error);\n            }\n        }\n    });\n\n    // Listener para atualiza√ß√µes de grupo\n    sock.ev.on('group-participants.update', async ({ id, participants, action }) => {\n        try {\n            await processarListaNegra(sock, participants, id, action);\n            \n            // Processa welcome para novos membros\n            if (action === 'add') {\n                for (const participant of participants) {\n                    await welcomeSystem.processarWelcome(sock, id, participant);\n                }\n            }\n        } catch (error) {\n            console.error('‚ùå Erro ao processar participantes do grupo:', error);\n        }\n    });\n\n    // Listener para chamadas (anticall)\n    sock.ev.on('call', async ({ content, isGroup, id, from, date, accepted }) => {\n        try {\n            const config = require('./settings/settings.json');\n            \n            // Se anticall estiver ativo, rejeita automaticamente\n            if (config.anticall && !accepted) {\n                console.log(`üìû Chamada rejeitada automaticamente: ${from.split('@')[0]} (ANTICALL ativo)`);\n                \n                // Rejeita a chamada\n                await sock.rejectCall(id, from);\n                \n                // Log da a√ß√£o\n                console.log(`üö´ Chamada de ${from.split('@')[0]} foi rejeitada pelo ANTICALL`);\n                \n                // Opcional: notifica o dono sobre a chamada rejeitada\n                const donoDM = isDono(from) ? null : settings.numeroDoDono + '@s.whatsapp.net';\n                if (donoDM && donoDM !== from) {\n                    try {\n                        await sock.sendMessage(donoDM, {\n                            text: `üö´ *ANTICALL ATIVO*\\n\\nüìû Chamada rejeitada de: @${from.split('@')[0]}\\n‚è∞ Hor√°rio: ${new Date(date).toLocaleString()}\\nüõ°Ô∏è Sistema de prote√ß√£o funcionando!`,\n                            mentions: [from]\n                        });\n                    } catch (err) {\n                        console.log('‚ùå Erro ao notificar dono sobre chamada rejeitada:', err);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error('‚ùå Erro ao processar chamada:', error);\n        }\n    });\n\n    console.log('üîß Listeners configurados com sucesso!');\n}\n\n// Exporta a fun√ß√£o\nmodule.exports = { setupListeners };","size_bytes":267835},"main.js":{"content":"#!/usr/bin/env node\n\n/**\n * WhatsApp Bot - Main Entry Point\n * This file handles the bot startup with proper error handling and reconnection logic\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\n// Console colors for better output\nconst colors = {\n    reset: '\\x1b[0m',\n    bright: '\\x1b[1m',\n    red: '\\x1b[31m',\n    green: '\\x1b[32m',\n    yellow: '\\x1b[33m',\n    blue: '\\x1b[34m',\n    magenta: '\\x1b[35m',\n    cyan: '\\x1b[36m'\n};\n\nfunction log(message, color = colors.reset) {\n    console.log(`${color}${message}${colors.reset}`);\n}\n\nfunction logError(error) {\n    console.error(`${colors.red}‚ùå ERROR: ${error.message}${colors.reset}`);\n    if (process.env.DEBUG) {\n        console.error(error.stack);\n    }\n}\n\nfunction logInfo(message) {\n    log(`${colors.blue}‚ÑπÔ∏è  ${message}`, colors.blue);\n}\n\nfunction logSuccess(message) {\n    log(`${colors.green}‚úÖ ${message}`, colors.green);\n}\n\nfunction logWarning(message) {\n    log(`${colors.yellow}‚ö†Ô∏è  ${message}`, colors.yellow);\n}\n\nfunction ensureDirectoryExists(dir) {\n    if (!fs.existsSync(dir)) {\n        fs.mkdirSync(dir, { recursive: true });\n        logInfo(`Created directory: ${dir}`);\n    }\n}\n\nfunction validateDependencies() {\n    const requiredDeps = [\n        '@whiskeysockets/baileys',\n        'axios',\n        'fs',\n        'path'\n    ];\n    \n    const packageJson = require('./package.json');\n    const installedDeps = { ...packageJson.dependencies, ...packageJson.devDependencies };\n    \n    for (const dep of requiredDeps) {\n        if (!installedDeps[dep] && dep !== 'fs' && dep !== 'path') {\n            throw new Error(`Required dependency \"${dep}\" is not installed. Run: npm install ${dep}`);\n        }\n    }\n    logSuccess('All dependencies validated');\n}\n\nasync function startBot() {\n    try {\n        logInfo('Starting WhatsApp Bot...');\n        \n        // Validate environment\n        validateDependencies();\n        \n        // Ensure connection directory exists\n        ensureDirectoryExists('./conexao');\n        \n        // Start the actual bot\n        require('./connect.js');\n        \n    } catch (error) {\n        logError(error);\n        process.exit(1);\n    }\n}\n\n// Handle process signals gracefully\nprocess.on('SIGINT', () => {\n    logWarning('Received SIGINT, shutting down gracefully...');\n    process.exit(0);\n});\n\nprocess.on('SIGTERM', () => {\n    logWarning('Received SIGTERM, shutting down gracefully...');\n    process.exit(0);\n});\n\nprocess.on('uncaughtException', (error) => {\n    logError(error);\n    logError(new Error('Uncaught Exception - Bot will restart'));\n    process.exit(1);\n});\n\nprocess.on('unhandledRejection', (reason, promise) => {\n    logError(new Error(`Unhandled Rejection at: ${promise}, reason: ${reason}`));\n    logError(new Error('Unhandled Promise Rejection - Bot will restart'));\n    process.exit(1);\n});\n\n// Start the bot\nstartBot();","size_bytes":2873},"replit.md":{"content":"# WhatsApp Bot - NEEXT LTDA\n\n## Vis√£o Geral\nBot WhatsApp automatizado constru√≠do com Baileys, com sistema de antilink avan√ßado e funcionalidades de administra√ß√£o de grupos.\n\n## Funcionalidades Principais\n\n### ü§ñ Comandos do Bot\n- **`.ping`** - Verifica status do bot e informa√ß√µes do sistema\n- **`.hora`** - Mostra hor√°rio atual\n- **`.dono`** - Identifica o dono do bot\n- **`.marca`** - Menciona todos os membros do grupo (apenas em grupos)\n- **`.recado`** - Confirma que bot est√° ativo\n- **`.s`** - Converte imagem/v√≠deo para sticker\n- **`.hermitwhite`** - Cria ID no sistema NEEXT (requer dados pessoais)\n- **`prefixo`** - Mostra o prefixo do bot (sem prefixo)\n\n### ‚ö° Comandos Administrativos\n**Comandos exclusivos para administradores que exigem que o bot tamb√©m seja admin:**\n\n#### üîí Controle do Grupo\n- **`.fechargrupo`** ou **`.fechar`** - Fecha o grupo (apenas admins podem enviar mensagens)\n- **`.abrirgrupo`** ou **`.abrir`** - Abre o grupo (todos podem enviar mensagens)\n- **`.soloadmin`** ou **`.adminonly`** - Permite apenas admins editarem informa√ß√µes do grupo\n\n#### üóëÔ∏è Modera√ß√£o de Mensagens\n- **`.delmsg`**, **`.del`** ou **`.delete`** - Deleta mensagem marcada (use respondendo a uma mensagem)\n\n#### üîó Gerenciamento de Link\n- **`.resetlink`**, **`.resetarlink`** ou **`.novolink`** - Gera novo link de convite e invalida o anterior\n\n#### üë• Controle de Entrada\n- **`.ativarsolicitacao`**, **`.ativarjoin`** ou **`.reqon`** - Ativa aprova√ß√£o obrigat√≥ria para novos membros\n- **`.desativarsolicitacao`**, **`.desativarjoin`** ou **`.reqoff`** - Desativa aprova√ß√£o obrigat√≥ria\n\n#### ‚úèÔ∏è Edi√ß√£o do Grupo\n- **`.mudargrupo`**, **`.mudarnome`** ou **`.renamegroup [nome]`** - Altera o nome do grupo\n\n**Requisitos:**\n- ‚úÖ Usu√°rio deve ser admin do grupo\n- ‚úÖ Bot deve ser admin do grupo\n- ‚úÖ Funciona apenas em grupos\n- ‚ö†Ô∏è Se o bot n√£o for admin, ser√° exibido aviso espec√≠fico\n\n### üÜî Sistema de Cria√ß√£o de ID - NEEXT\nComando para criar IDs √∫nicos no sistema da NEEXT LTDA:\n\n#### Como Usar:\n- **`.hermitwhite [nome] [idade] [telefone] [instagram] [email]`** - Cria um novo ID\n\n#### Exemplo:\n```\n.hermitwhite Jo√£o Silva 25 5527999999999 @joao_silva joao@gmail.com\n```\n\n#### Valida√ß√µes:\n- ‚úÖ Todos os campos s√£o obrigat√≥rios\n- ‚úÖ Instagram deve incluir o @ (ex: @usuario)\n- ‚úÖ Telefone deve ter 10-15 d√≠gitos (ex: 5527999999999)\n- ‚úÖ Email deve ser v√°lido (ex: usuario@provedor.com)\n\n#### Recursos:\n- ‚úÖ Integra√ß√£o com API Google Sheets\n- ‚úÖ Gera√ß√£o autom√°tica de ID sequencial\n- ‚úÖ Valida√ß√£o completa de dados\n- ‚úÖ Mensagem de confirma√ß√£o com ID gerado\n- ‚úÖ Tratamento de erros robusto\n\n### üéÆ Jogo Akinator\nSistema de jogo interativo do Akinator (g√™nio da l√¢mpada):\n\n#### Como Usar:\n- **`.akinator`** - Inicia uma nova partida do jogo\n- **`.resetaki`** - Reseta/cancela a partida atual\n\n#### Como Jogar:\n1. Digite `.akinator` em um grupo para iniciar\n2. Responda as perguntas com: **Sim**, **N√£o**, **N√£o sei**, **Provavelmente sim** ou **Provavelmente n√£o**\n3. O Akinator tentar√° adivinhar o personagem que voc√™ est√° pensando\n4. Use `.resetaki` para cancelar o jogo a qualquer momento\n\n#### Recursos:\n- ‚úÖ Funciona apenas em grupos\n- ‚úÖ Uma partida por grupo por vez\n- ‚úÖ Controle de acesso por jogador\n- ‚úÖ Limite de uma partida por dia\n- ‚úÖ Sistema de reset para admins e quem iniciou o jogo\n- ‚úÖ Respostas inteligentes em portugu√™s\n- ‚ö†Ô∏è API pode estar sujeita a limita√ß√µes de Cloudflare\n\n### üí∞ Sistema RPG - NeextCity\nSistema completo de economia virtual com loja, trabalhos, jogos e invent√°rio:\n\n#### üë§ Cadastro no RPG:\n- **`.rpg on/off`** - Ativa/desativa RPG no grupo (apenas admins)\n- **`.registrar [nome] [banco]`** - Cadastro inicial no sistema\n\n#### üíº Comandos para Ganhar Gold:\n- **`.pescar`** - Pescar para ganhar gold (cooldown: 15 min)\n- **`.minerar`** - Minerar recursos preciosos (cooldown: 20 min)\n- **`.trabalhar`** - Trabalhar por gold (cooldown: 25 min)\n- **`.cacar`** - Ca√ßar animais selvagens (cooldown: 20 min)\n- **`.coletar`** - Coletar itens da natureza (cooldown: 10 min)\n- **`.agricultura`** - Plantar e colher (cooldown: 25 min)\n- **`.entrega`** - Fazer entregas na cidade (cooldown: 30 min)\n\n#### üõí Sistema de Loja e Invent√°rio:\n- **`.loja`** - Ver todas as categorias dispon√≠veis\n- **`.loja [categoria]`** - Ver itens de categoria espec√≠fica\n- **`.comprar [item] [quantidade]`** - Comprar itens (qtd: 1-10)\n- **`.inventario`** - Ver seus itens comprados\n\n#### üè™ Categorias da Loja:\n- **Propriedades** - Casas, fazendas, empresas\n- **Animais** - Galinhas, cavalos, gatos\n- **Ve√≠culos** - Motos, carros, avi√µes\n- **Ferramentas** - Varas, picaretas, tratores\n- **Neg√≥cios** - Lanchonetes, academias\n\n#### üé∞ Jogos e Divers√£o:\n- **`.tigrinho [valor]`** - Ca√ßa-n√≠quel\n- **`.assalto @user`** - Assaltar jogador\n- **`.apostar [valor]`** - Apostar na sorte\n- **`.investir [tipo] [valor]`** - Investimentos\n\n#### üéì Educa√ß√£o e Crescimento:\n- **`.estudar`** - Ver cursos dispon√≠veis\n- **`.estudar [num]`** - Fazer curso espec√≠fico\n\n#### üí∏ Sistema Banc√°rio:\n- **`.pix @user [valor]`** - Transferir gold\n- **`.saldo`** - Ver saldo e estat√≠sticas\n- **`.rank`** - Ranking dos mais ricos\n\n#### Recursos do Sistema:\n- ‚úÖ Economia balanceada com cooldowns\n- ‚úÖ Sistema de invent√°rio persistente\n- ‚úÖ Loja com 5 categorias e 25+ itens\n- ‚úÖ 7 formas diferentes de ganhar gold\n- ‚úÖ Sistema banc√°rio completo\n- ‚úÖ Prote√ß√£o contra spam com cooldowns\n- ‚úÖ Dados salvos em JSON (database/grupos/rpg_data.json)\n\n### üõ°Ô∏è Sistema Anti-Spam Avan√ßado\nSistema completo de prote√ß√£o contra diversos tipos de conte√∫do:\n\n#### üîó Prote√ß√£o Contra Links:\n- **`.antilink on/off`** - Anti-links b√°sico\n- **`.antilinkhard on/off`** - Anti-links avan√ßado (detecta w.w.w, bit(.)ly, etc)\n\n#### üîû Prote√ß√£o de Conte√∫do:\n- **`.antiporno on/off`** - Detecta e bloqueia conte√∫do pornogr√°fico\n- **`.antipalavrao on/off`** - Detecta e bloqueia palavr√µes\n\n#### üì± Outras Prote√ß√µes:\n- **`.anticontato on/off`** - Anti-contatos\n- **`.antidocumento on/off`** - Anti-documentos\n- **`.antivideo on/off`** - Anti-v√≠deos\n- **`.antiaudio on/off`** - Anti-√°udios\n- **`.antisticker on/off`** - Anti-stickers\n- **`.antiflod on/off`** - Anti-flood\n- **`.antifake on/off`** - Anti-n√∫meros fake\n- **`.x9 on/off`** - Anti-X9 Monitor\n\n#### üõ°Ô∏è Prote√ß√µes do Dono:\n- **`.antipv on/off`** - Bloqueia PVs de n√£o-donos (apenas dono)\n- **`.anticall on/off`** - Rejeita chamadas automaticamente (apenas dono)\n\n#### ‚ú® Comando Especial:\n- **`.hidetag [texto]`** - Marca√ß√£o oculta (admins) - menciona todos sem mostrar as men√ß√µes\n\n#### Recursos:\n- ‚úÖ Detecta automaticamente conte√∫do proibido\n- ‚úÖ Remove mensagens e bane usu√°rios instantaneamente\n- ‚úÖ Protege admins e dono (n√£o remove suas mensagens)\n- ‚úÖ Configura√ß√£o por grupo (salva em JSON)\n- ‚úÖ Apenas admins podem ativar/desativar (exceto antipv/anticall)\n- ‚úÖ Feedback visual com rea√ß√µes e mensagens\n- ‚úÖ Normaliza√ß√£o de acentos para detec√ß√£o precisa\n- ‚úÖ Suporte a texto e legendas de m√≠dia\n\n### üîß Configura√ß√µes\nAs configura√ß√µes do bot est√£o em `settings/settings.json`:\n- **prefix**: Prefixo dos comandos (padr√£o: \".\")\n- **nomeDoBot**: Nome do bot\n- **numeroDoDono**: N√∫mero do dono do bot\n- **nickDoDono**: Apelido do dono\n\n### üìÅ Estrutura do Projeto\n- `main.js` - Script principal com tratamento de erros\n- `connect.js` - Gerenciamento de conex√£o WhatsApp\n- `index.js` - L√≥gica do bot e comandos\n- `settings/settings.json` - Configura√ß√µes do bot\n- `arquivos/` - Fun√ß√µes utilit√°rias e assets\n- `conexao/` - Arquivos de sess√£o WhatsApp (auto-gerados)\n\n### üöÄ Como Executar\nO bot √© executado automaticamente via Workflow do Replit:\n1. Conecta automaticamente ao WhatsApp\n2. Se primeira vez, solicita m√©todo de conex√£o (QR Code ou Pareamento)\n3. Processa mensagens e comandos em tempo real\n\n### üìä Logs e Monitoramento\n- Logs detalhados de todas as mensagens processadas\n- Identifica√ß√£o de comandos vs mensagens normais\n- Rastreamento de a√ß√µes do antilink\n- Tratamento de erros robusto\n\n### üîê Seguran√ßa\n- Arquivos de sess√£o exclu√≠dos do Git\n- Verifica√ß√£o de permiss√µes para comandos administrativos\n- Prote√ß√£o contra spam com cache de mensagens processadas\n\n## Altera√ß√µes Recentes\n- ‚úÖ Implementado sistema completo de antilink\n- ‚úÖ Adicionadas verifica√ß√µes de admin e dono\n- ‚úÖ Criado sistema de configura√ß√£o por grupo\n- ‚úÖ Melhorado tratamento de erros\n- ‚úÖ Adicionadas rea√ß√µes visuais aos comandos\n- ‚úÖ Configurado para funcionar no ambiente Replit\n- ‚úÖ Melhorada implementa√ß√£o do comando Pinterest\n- ‚úÖ Instaladas todas as depend√™ncias necess√°rias\n- ‚úÖ **NOVO**: Implementado jogo do Akinator com aki-api\n- ‚úÖ **NOVO**: Adicionados comandos .akinator e .resetaki\n- ‚úÖ **NOVO**: Sistema de gest√£o de partidas por grupo\n- ‚úÖ **NOVO**: Processamento inteligente de respostas do usu√°rio\n- ‚úÖ **NOVO**: Estrutura de banco de dados para jogos\n- ‚úÖ **RECENTE**: Implementados 8 comandos administrativos completos\n- ‚úÖ **RECENTE**: Sistema autom√°tico de contagem de comandos\n- ‚úÖ **RECENTE**: Controle total de grupos (abrir/fechar/resetar link)\n- ‚úÖ **RECENTE**: Modera√ß√£o avan√ßada (deletar mensagens, controlar entrada)\n- ‚úÖ **RECENTE**: Verifica√ß√µes robustas de permiss√µes admin\n- ‚úÖ **MAIS RECENTE**: Implementado sistema de loja RPG completo\n- ‚úÖ **MAIS RECENTE**: Adicionados 4 novos comandos para ganhar gold (cacar, coletar, agricultura, entrega)\n- ‚úÖ **MAIS RECENTE**: Sistema de invent√°rio com 5 categorias e 25+ itens\n- ‚úÖ **MAIS RECENTE**: Backend robusto com cooldowns e persist√™ncia de dados\n- ‚úÖ **MAIS RECENTE**: Menu RPG atualizado com todas as funcionalidades\n- ‚úÖ **√öLTIMO**: Implementados 6 comandos de modera√ß√£o avan√ßada (antiporno, antilinkhard, antipalavrao, antipv, anticall, hidetag)\n- ‚úÖ **√öLTIMO**: Sistema anti-spam expandido com detec√ß√£o de pornografia e palavr√µes\n- ‚úÖ **√öLTIMO**: Normaliza√ß√£o de acentos para detec√ß√£o precisa em portugu√™s\n- ‚úÖ **√öLTIMO**: Prote√ß√µes do dono (bloqueio de PV e chamadas)\n- ‚úÖ **√öLTIMO**: Comando hidetag para marca√ß√£o oculta\n- ‚úÖ **√öLTIMO**: Menus atualizados com todas as novas funcionalidades\n\n## Estado Atual\n‚úÖ **Bot Online e Funcionando no Replit**\n‚úÖ **Antilink Implementado e Testado**\n‚úÖ **Todos os Comandos Operacionais**\n‚úÖ **Comando Pinterest Melhorado**\n‚úÖ **Workflow Configurado e Rodando**\n‚úÖ **Depend√™ncias Instaladas e Funcionando**\n‚úÖ **Stickers com Selinho Quotado Implementado**\n‚úÖ **Deployment Configurado para Produ√ß√£o (VM)**\n‚úÖ **Bot Conectado e Processando Comandos Ativamente**\n‚úÖ **Menu Principal Reformulado com Estat√≠sticas Din√¢micas**\n‚úÖ **Sistema de Configura√ß√£o Seguro Implementado**\n‚úÖ **Importa√ß√£o GitHub Configurada Completamente**\n‚úÖ **Detec√ß√£o Autom√°tica de Ambiente Replit**\n‚úÖ **QR Code Autom√°tico em Ambiente N√£o-Interativo**\n\n### üÜï Funcionalidades Recentes\n- **Menu Principal Avan√ßado**: Novo design com contadores de comandos, grupos e registros\n- **Configura√ß√£o de Seguran√ßa**: Template `.env.example` para configura√ß√£o segura\n- **Estat√≠sticas Din√¢micas**: Contagem autom√°tica de comandos, grupos e usu√°rios registrados\n- **Sistema de Cargo**: Detec√ß√£o autom√°tica de cargo (Dono, Admin, Membro)\n- **Sauda√ß√£o Inteligente**: Sauda√ß√µes baseadas no hor√°rio atual\n\n### üöÄ Ambiente de Produ√ß√£o\n- **Deployment Target**: VM (para conex√£o persistente)\n- **Comando de Produ√ß√£o**: `node main.js`\n- **Status**: Pronto para deploy\n\n### üîß Configura√ß√£o GitHub Import (Setembro 2025)\n- **Importa√ß√£o Autom√°tica**: ‚úÖ Bot configurado para funcionar ap√≥s importa√ß√£o do GitHub\n- **Detec√ß√£o Replit**: ‚úÖ Sistema detecta automaticamente ambiente Replit/n√£o-interativo\n- **Depend√™ncias**: ‚úÖ Todas as depend√™ncias do npm instaladas automaticamente\n- **Workflow**: ‚úÖ Configurado para executar `node main.js` no console\n- **Deploy**: ‚úÖ Configurado para VM (conex√£o persistente necess√°ria para WhatsApp)\n- **Ambiente**: ‚úÖ Pronto para uso imediato ap√≥s importa√ß√£o\n- **Status**: ‚úÖ IMPORTA√á√ÉO CONCLU√çDA COM SUCESSO\n\n## Configura√ß√£o para Replit\nEste projeto foi configurado para funcionar no ambiente Replit com as seguintes otimiza√ß√µes:\n\n### ‚úÖ Configura√ß√£o Realizada\n- **Workflow Configurado**: Bot executa via `node main.js` no console\n- **Depend√™ncias Instaladas**: Todas as depend√™ncias do package.json instaladas com sucesso\n- **Arquivos Corrompidos Corrigidos**: Removidos duplicatas e erros de sintaxe do index.js\n- **Configura√ß√£o de Seguran√ßa**: Settings.json configurado com valores seguros (placeholders)\n- **Estrutura de Pastas**: Todas as pastas necess√°rias criadas automaticamente\n\n### üîê Configura√ß√£o de Ambiente\nPara usar o bot, configure as seguintes vari√°veis de ambiente baseadas no arquivo `.env.example`:\n\n- `BOT_OWNER_NUMBER`: Seu n√∫mero de WhatsApp (formato: 5527999999999)\n- `BOT_OWNER_NICKNAME`: Seu apelido\n- `BOT_NAME`: Nome do bot\n- `BOT_PREFIX`: Prefixo dos comandos (padr√£o: .)\n- `BOT_PHOTO_URL`: URL da foto do bot\n\n### üöÄ Como Iniciar no Replit\n1. O bot inicia automaticamente quando o projeto √© executado\n2. Na primeira execu√ß√£o, escolha o m√©todo de conex√£o:\n   - **QR Code**: Para conectar via computador\n   - **Pareamento**: Para conectar via celular (digite seu n√∫mero)\n3. Ap√≥s conectar, o bot ficar√° online e processar√° comandos automaticamente\n\n### üìÅ Arquivos de Sess√£o\n- Pasta `conexao/`: Cont√©m arquivos de sess√£o do WhatsApp (gerados automaticamente)\n- Estes arquivos mant√™m a sess√£o ativa entre reinicializa√ß√µes\n- **Importante**: N√£o compartilhar estes arquivos pois cont√™m credenciais de acesso","size_bytes":13797},"start.sh":{"content":"#!/bin/bash\n\nGREEN='\\033[1;32m'\nBLUE='\\033[0;34m'\n\nwhile :\ndo\n    # Texto de conex√£o\n    printf \"${BLUE} NEEXT LTDA ùêÇùêéùêçùêÑùêÇùêìùêÄùêçùêÉùêé, ùêÄùêÜùêîùêÄùêëùêÉùêÑ\\n\"\n\n    # Chama index.js com par√¢metro opcional\n    if [ \"$1\" = \"sim\" ]; then\n        node index.js sim\n    elif [ \"$1\" = \"n√£o\" ]; then\n        node connect.js n√£o\n    else\n        node connect.js\n    fi\n\n    # Texto de inicializa√ß√£o\n    printf \"${GREEN}„Äé NEEXT LTDA „ÄèùêàùêçùêàùêÇùêàùêÄùêçùêÉùêé  ùêçùêéùêïùêÄùêåùêÑùêçùêìùêÑ\\n\"\n\n    sleep 1\ndone","size_bytes":560},"arquivos/exif.js":{"content":"const fs = require('fs');\nconst { writeExif } = require('./sticker.js');\n\n// Fun√ß√£o para converter imagem para WebP\nasync function imageToWebp(buffer, customMetadata = {}) {\n    try {\n        // Usa a fun√ß√£o existente do sticker.js\n        const media = { data: buffer, mimetype: 'image/jpeg' };\n        const metadata = { \n            packname: customMetadata.packname || \"NEEXT LTDA\", \n            author: customMetadata.author || \"NEEXT BOT\" \n        };\n        return await writeExif(media, metadata);\n    } catch (error) {\n        console.error('Erro ao converter imagem para WebP:', error);\n        throw error;\n    }\n}\n\n// Fun√ß√£o para converter v√≠deo para WebP\nasync function videoToWebp(buffer, customMetadata = {}) {\n    try {\n        // Usa a fun√ß√£o existente do sticker.js para v√≠deos\n        const media = { data: buffer, mimetype: 'video/mp4' };\n        const metadata = { \n            packname: customMetadata.packname || \"NEEXT LTDA\", \n            author: customMetadata.author || \"NEEXT BOT\" \n        };\n        return await writeExif(media, metadata);\n    } catch (error) {\n        console.error('Erro ao converter v√≠deo para WebP:', error);\n        throw error;\n    }\n}\n\n// Fun√ß√£o para escrever EXIF em imagens com dados personalizados\nasync function writeExifImg(buffer, options = {}) {\n    try {\n        // Marca como rename para usar APENAS valores do usu√°rio\n        const packname = options.packname;\n        const author = options.author;\n        const media = { data: buffer, mimetype: 'image/jpeg' };\n        const metadata = { packname, author, _isRename: true };\n        return await writeExif(media, metadata);\n    } catch (error) {\n        console.error('Erro ao escrever EXIF na imagem:', error);\n        throw error;\n    }\n}\n\n// Fun√ß√£o para escrever EXIF em v√≠deos com dados personalizados\nasync function writeExifVid(buffer, options = {}) {\n    try {\n        // Marca como rename para usar APENAS valores do usu√°rio\n        const packname = options.packname;\n        const author = options.author;\n        const media = { data: buffer, mimetype: 'video/mp4' };\n        const metadata = { packname, author, _isRename: true };\n        return await writeExif(media, metadata);\n    } catch (error) {\n        console.error('Erro ao escrever EXIF no v√≠deo:', error);\n        console.log('üîÑ Tentando processar como imagem est√°tica...');\n        \n        // Fallback: tenta processar como imagem se falhar como v√≠deo\n        try {\n            const packname = options.packname;\n            const author = options.author;\n            const media = { data: buffer, mimetype: 'image/webp' };\n            const metadata = { packname, author, _isRename: true };\n            return await writeExif(media, metadata);\n        } catch (fallbackError) {\n            console.error('‚ùå Fallback tamb√©m falhou:', fallbackError);\n            throw error; // Lan√ßa o erro original\n        }\n    }\n}\n\nmodule.exports = {\n    imageToWebp,\n    videoToWebp,\n    writeExifImg,\n    writeExifVid\n};","size_bytes":3027},"arquivos/rename.js":{"content":"const fs = require('fs-extra');\nconst {\nimageToWebp,\nvideoToWebp,\nwriteExifImg,\nwriteExifVid\n} = require('./exif');\nconst {\ngetBuffer\n} = require('./funcoes/function.js');\n\n// Selinho para usar como quoted nos stickers\nconst selinho = {\n    key: { fromMe: false, participant: `13135550002@s.whatsapp.net`, remoteJid: 'status@broadcast' },\n    message: { contactMessage: { displayName: 'NEEXT LTDA', vcard: `BEGIN:VCARD\\nVERSION:3.0\\nN:Kuun;Flash;;;\\nFN:Flash Kuun\\nitem1.TEL;waid=13135550002:+1 (313) 555-0002\\nitem1.X-ABLabel:Mobile\\nEND:VCARD`, sendEphemeral: true } }\n};\n\nconst sendImageAsSticker = async (conn, jid, path, quoted, options = {}) => {\nlet buff = Buffer.isBuffer(path) ? path : /^data:.*?\\/.*?;base64,/i.test(path) ? Buffer.from(path.split`,`[1], 'base64') : /^https?:\\/\\//.test(path) ? await (await getBuffer(path)) : fs.existsSync(path) ? fs.readFileSync(path) : Buffer.alloc(0);\n let buffer;\n // SEMPRE usa writeExifImg para preservar metadados personalizados\n buffer = await writeExifImg(buff, options);\n\n// ContextInfo para fazer aparecer como \"enviada via an√∫ncio\"\nconst contextAnuncio = {\n    externalAdReply: {\n        title: \"¬© NEEXT LTDA\",\n        body: \"üì± Instagram: @neet.tk\",\n        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n        mediaType: 1,\n        sourceUrl: \"https://www.neext.online\",\n        showAdAttribution: true\n    }\n};\n\nawait conn.sendMessage(jid, {\n    sticker: {url: buffer}, \n    contextInfo: contextAnuncio,\n    ...options\n}, {quoted: selinho})\nreturn buffer;\n};\n\n\n\nconst sendVideoAsSticker = async (conn, jid, path, quoted, options = {}) => {\nlet buff = Buffer.isBuffer(path) ? path : /^data:.*?\\/.*?;base64,/i.test(path) ? Buffer.from(path.split`,`[1], 'base64') : /^https?:\\/\\//.test(path) ? await (await getBuffer(path)) : fs.existsSync(path) ? fs.readFileSync(path) : Buffer.alloc(0);\n let buffer;\n // SEMPRE usa writeExifVid para preservar metadados personalizados\n buffer = await writeExifVid(buff, options);\n\n// ContextInfo para fazer aparecer como \"enviada via an√∫ncio\"\nconst contextAnuncio = {\n    externalAdReply: {\n        title: \"¬© NEEXT LTDA\",\n        body: \"üì± Instagram: @neet.tk\",\n        thumbnailUrl: \"https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg\",\n        mediaType: 1,\n        sourceUrl: \"https://www.neext.online\",\n        showAdAttribution: true\n    }\n};\n\nawait conn.sendMessage(jid, { \n    sticker: { url: buffer }, \n    contextInfo: contextAnuncio,\n    ...options \n}, { quoted: selinho })\nreturn buffer;\n}\n\nmodule.exports = {\nsendVideoAsSticker,\nsendImageAsSticker\n};","size_bytes":2586},"arquivos/sticker.js":{"content":"const fs = require(\"fs\");\nconst { tmpdir } = require(\"os\");\nconst path = require(\"path\");\nconst Crypto = require(\"crypto\");\nconst ff = require(\"fluent-ffmpeg\");\nconst webp = require(\"node-webpmux\");\n\n// Gera arquivo tempor√°rio\nfunction getRandomFile(ext) {\n    return path.join(tmpdir(), `${Crypto.randomBytes(6).readUIntLE(0, 6).toString(36)}${ext}`);\n}\n\n// Converte Buffer para WebP preservando transpar√™ncia\nasync function bufferToWebp(buffer, isVideo = false, mimetype = null) {\n    // Detecta extens√£o correta baseada no mimetype para preservar transpar√™ncia\n    let inputExt;\n    if (isVideo) {\n        inputExt = \".mp4\";\n    } else if (mimetype) {\n        if (mimetype.includes('png')) inputExt = \".png\";\n        else if (mimetype.includes('webp')) inputExt = \".webp\";\n        else if (mimetype.includes('gif')) inputExt = \".gif\";\n        else inputExt = \".jpg\";\n    } else {\n        inputExt = \".jpg\";\n    }\n\n    const input = getRandomFile(inputExt);\n    const output = getRandomFile(\".webp\");\n\n    fs.writeFileSync(input, buffer);\n\n    await new Promise((resolve, reject) => {\n        const ffmpegCommand = ff(input)\n            .on(\"error\", (err) => {\n                // Cleanup input file on error\n                if (fs.existsSync(input)) fs.unlinkSync(input);\n                reject(err);\n            })\n            .on(\"end\", () => resolve());\n\n        if (isVideo) {\n            // Para v√≠deos: m√°ximo 6 segundos, 512px, preserva transpar√™ncia\n            ffmpegCommand\n                .duration(6)\n                .addOutputOptions([\n                    \"-vcodec\", \"libwebp\",\n                    \"-vf\", \"fps=15,scale=512:512:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=0x00000000,setsar=1\",\n                    \"-loop\", \"0\",\n                    \"-preset\", \"default\",\n                    \"-an\",\n                    \"-vsync\", \"0\",\n                    \"-q:v\", \"80\",\n                    \"-lossless\", \"0\"\n                ]);\n        } else {\n            // Para imagens: 512px, preserva transpar√™ncia, sem fps\n            ffmpegCommand\n                .addOutputOptions([\n                    \"-vcodec\", \"libwebp\",\n                    \"-vf\", \"scale=512:512:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=0x00000000,setsar=1\",\n                    \"-loop\", \"0\",\n                    \"-preset\", \"default\",\n                    \"-an\",\n                    \"-vsync\", \"0\",\n                    \"-q:v\", \"90\"\n                ]);\n        }\n\n        ffmpegCommand\n            .toFormat(\"webp\")\n            .save(output);\n    });\n\n    // Cleanup input file\n    if (fs.existsSync(input)) fs.unlinkSync(input);\n    return output;\n}\n\n// Fun√ß√£o writeExif para compatibilidade com index.js\nasync function writeExif(media, metadata) {\n    const { mimetype, data } = media;\n    \n    // Para comando RENAME: usa EXATAMENTE os valores fornecidos sem fallbacks\n    // Para outros comandos: usa fallbacks NEEXT se n√£o houver valores\n    let packname, author, categories;\n    \n    if (metadata._isRename) {\n        // Comando rename: usa APENAS os valores fornecidos pelo usu√°rio\n        packname = metadata.packname;\n        author = metadata.author;\n        categories = metadata.categories || [\"üòé\"];\n    } else {\n        // Outros comandos: pode usar fallbacks NEEXT\n        packname = metadata.packname || \"NEEXT LTDA\";\n        author = metadata.author || \"NEEXT BOT\";\n        categories = metadata.categories || [\"üòé\"];\n    }\n    \n    // Detecta se √© v√≠deo/GIF\n    const isVideo = mimetype && (\n        mimetype.includes('video') || \n        mimetype.includes('gif') ||\n        mimetype === 'image/gif'\n    );\n    \n    const webpFile = await bufferToWebp(data, isVideo, mimetype);\n    const img = new webp.Image();\n    await img.load(webpFile);\n\n    const json = {\n        \"sticker-pack-id\": `${packname}-${Date.now()}`,\n        \"sticker-pack-name\": packname,\n        \"sticker-pack-publisher\": author,\n        \"sticker-pack-categories\": categories\n    };\n\n    const exifAttr = Buffer.from([0x49,0x49,0x2A,0x00,0x08,0x00,0x00,0x00,0x01,0x00,0x41,0x57,0x07,0x00,0x00,0x00,0x00,0x00,0x16,0x00,0x00,0x00]);\n    const jsonBuff = Buffer.from(JSON.stringify(json), \"utf-8\");\n    const exif = Buffer.concat([exifAttr, jsonBuff]);\n    exif.writeUIntLE(jsonBuff.length, 14, 4);\n\n    img.exif = exif;\n    await img.save(webpFile);\n\n    return webpFile;\n}\n\n// Cria sticker e envia (vers√£o melhorada)\nasync function createSticker(buffer, sock, from, isVideo = false) {\n    try {\n        const agora = new Date();\n        const dataHora = `${agora.toLocaleDateString('pt-BR')} ${agora.toLocaleTimeString('pt-BR')}`;\n        \n        const webpFile = await writeExif(\n            { mimetype: isVideo ? 'video/mp4' : 'image/jpeg', data: buffer },\n            { \n                packname: \"NEEXT LTDA\", \n                author: `NEEXT BOT - ${dataHora}`, \n                categories: [\"üî•\"] \n            }\n        );\n        \n        const stickerBuffer = fs.readFileSync(webpFile);\n        await sock.sendMessage(from, { sticker: stickerBuffer });\n        fs.unlinkSync(webpFile);\n        \n        console.log(\"‚úÖ Figurinha criada com sucesso!\");\n    } catch (err) {\n        console.log(\"‚ùå Erro ao criar figurinha:\", err);\n        await sock.sendMessage(from, { text: \"‚ùå Erro ao criar figurinha.\" });\n    }\n}\n\nmodule.exports = { createSticker, writeExif };","size_bytes":5439},"menus/menu.js":{"content":"// menu.js - Sistema de menus organizados do bot NEEXT LTDA\n\n// Fun√ß√£o para obter configura√ß√µes atualizadas em tempo real\nfunction obterConfiguracoes() {\n    delete require.cache[require.resolve('../settings/settings.json')];\n    return require('../settings/settings.json');\n}\n\n// Importa fun√ß√µes utilit√°rias\nconst { obterSaudacao, contarGrupos, contarComandos } = require('../arquivos/funcoes/function.js');\nconst { obterEstatisticas } = require('../arquivos/registros.js');\n\n// Fun√ß√£o para determinar cargo do usu√°rio\nasync function obterCargoUsuario(sock, from, sender) {\n    try {\n        // Verifica se √© o dono\n        const config = obterConfiguracoes();\n        const numeroDono = config.numeroDoDono + \"@s.whatsapp.net\";\n        if (sender === numeroDono) {\n            return \"üëë Dono\";\n        }\n\n        // Se estiver em grupo, verifica se √© admin\n        if (from.endsWith('@g.us') || from.endsWith('@lid')) {\n            try {\n                const groupMetadata = await sock.groupMetadata(from);\n                const participant = groupMetadata.participants.find(p => p.id === sender);\n                if (participant && (participant.admin === 'admin' || participant.admin === 'superadmin')) {\n                    return \"üõ°Ô∏è Admin\";\n                }\n            } catch (err) {\n                // Se der erro, assume membro\n            }\n        }\n\n        return \"üë§ Membro\";\n    } catch (err) {\n        return \"üë§ Membro\";\n    }\n}\n\n// ========================\n// MENU PRINCIPAL - NOVO FORMATO\n// ========================\nasync function obterMenuPrincipal(sock, from, sender, pushName) {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    \n    try {\n        // Obter informa√ß√µes din√¢micas\n        const saudacao = obterSaudacao();\n        const totalComandos = contarComandos();\n        const totalGrupos = await contarGrupos(sock);\n        const estatisticasRegistros = obterEstatisticas();\n        const cargoUsuario = await obterCargoUsuario(sock, from, sender);\n        const nomeUsuario = pushName || \"Usu√°rio\";\n        \n        return `${saudacao}! üëã\n\n‚ï≠‚îÄ‚îÄ„Äî ñ¶π‚àòÃ•‚∏Ω‚Éü INFORMA√á√ïES „Äï‚îÄ‚îÄ‚™©\n‚îÇ ñ¶π‚àòÃ•‚∏ΩüéØ‚Éü Prefixo: „Äå ${prefix} „Äç\n‚îÇ ñ¶π‚àòÃ•‚∏Ωüìä‚Éü Total de Comandos: ${totalComandos}\n‚îÇ ñ¶π‚àòÃ•‚∏Ωü§ñ‚Éü Nome do Bot: ${nomeDoBot}\n‚îÇ ñ¶π‚àòÃ•‚∏Ωüë§‚Éü Usu√°rio: ${nomeUsuario}\n‚îÇ ñ¶π‚àòÃ•‚∏Ωüõ†Ô∏è‚Éü Vers√£o: ^7.0.0-rc.3\n‚îÇ ñ¶π‚àòÃ•‚∏Ωüëë‚Éü Dono: ${nickDoDono}\n‚îÇ ñ¶π‚àòÃ•‚∏Ωüìà‚Éü Total de Grupos: ${totalGrupos}\n‚îÇ ñ¶π‚àòÃ•‚∏Ωüìù‚Éü Total Registrado: ${estatisticasRegistros.totalRegistros}\n‚îÇ ñ¶π‚àòÃ•‚∏ΩüéóÔ∏è‚Éü Cargo: ${cargoUsuario.split(' ')[1]}\n‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚™®\n\n‚ï≠‚îÄ‚îÄ„Äî MENUS DISPON√çVEIS „Äï‚îÄ‚îÄ‚™©\n‚îÇ ñßà‚àòÃ•‚∏Ωüè†‚Éü menuPrincipal\n‚îÇ ñßà‚àòÃ•‚∏Ωüé¨‚Éü menudownload\n‚îÇ ñßà‚àòÃ•‚∏ΩüñºÔ∏è‚Éü menufigurinhas\n‚îÇ ñßà‚àòÃ•‚∏Ωüîû‚Éü menuhentai\n‚îÇ ñßà‚àòÃ•‚∏Ωüõ†Ô∏è‚Éü menuadm\n‚îÇ ñßà‚àòÃ•‚∏Ωüëë‚Éü menudono\n‚îÇ ñßà‚àòÃ•‚∏Ωüéâ‚Éü menubrincadeira\n‚îÇ ñßà‚àòÃ•‚∏Ωüßë‚Äçü§ù‚Äçüßë‚Éü menuMembro\n‚îÇ ñßà‚àòÃ•‚∏ΩüéÆ‚Éü menuGamer\n‚îÇ ñßà‚àòÃ•‚∏Ωüåê‚Éü menuNeext\n‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚™®\n\n¬© NEEXT LTDA`;\n    } catch (error) {\n        console.error('Erro ao gerar menu principal:', error);\n        // Fallback para menu simples\n        return `ü§ñ *${nomeDoBot} - MENU PRINCIPAL*\\n\\nüìã *CATEGORIAS DISPON√çVEIS:*\\n\\nüë• \\`${prefix}menumembro\\` - Comandos para membros\\nüõ°Ô∏è \\`${prefix}menuadmin\\` - Comandos administrativos\\nüëë \\`${prefix}menudono\\` - Comandos do dono\\n\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n¬© NEEXT LTDA - ${nickDoDono}`;\n    }\n}\n\n// ========================\n// MENU MEMBRO (comandos b√°sicos)\n// ========================\nfunction obterMenuMembro() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüë• *COMANDOS PARA MEMBROS*\n\nü§ñ *INFORMA√á√ïES DO BOT:*\n‚Ä¢ \\`${prefix}ping\\` - Status e informa√ß√µes do sistema\n‚Ä¢ \\`${prefix}hora\\` - Hor√°rio atual\n‚Ä¢ \\`${prefix}dono\\` - Informa√ß√µes do dono\n‚Ä¢ \\`${prefix}recado\\` - Confirma que o bot est√° ativo\n‚Ä¢ \\`prefixo\\` - Mostra o prefixo atual\n\nüìù *UTILIT√ÅRIOS:*\n‚Ä¢ \\`${prefix}status [texto]\\` - Atualiza status do bot\n‚Ä¢ \\`${prefix}rg\\` - Registra-se no sistema do bot\n‚Ä¢ \\`${prefix}hermitwhite [dados]\\` - Cria ID no sistema NEEXT\n\nüè∑Ô∏è *STICKERS:*\n‚Ä¢ \\`${prefix}s\\` - Converte m√≠dia em sticker\n‚Ä¢ \\`${prefix}rename [pack|author]\\` - Renomeia sticker\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU ADMIN (comandos administrativos)\n// ========================\nfunction obterMenuAdmin() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüõ°Ô∏è *COMANDOS ADMINISTRATIVOS*\n\nüë• *GERENCIAMENTO DE GRUPO:*\n‚Ä¢ \\`${prefix}marca\\` - Menciona todos os membros\n‚Ä¢ \\`${prefix}fechargrupo\\` / \\`${prefix}fechar\\` - Fecha o grupo\n‚Ä¢ \\`${prefix}abrirgrupo\\` / \\`${prefix}abrir\\` - Abre o grupo\n‚Ä¢ \\`${prefix}mudargrupo [nome]\\` - Altera nome do grupo\n‚Ä¢ \\`${prefix}resetlink\\` - Gera novo link do grupo\n\nüóëÔ∏è *MODERA√á√ÉO:*\n‚Ä¢ \\`${prefix}del\\` - Deleta mensagem marcada\n‚Ä¢ \\`${prefix}ativarsolicitacao\\` - Ativa aprova√ß√£o de membros\n‚Ä¢ \\`${prefix}desativarsolicitacao\\` - Desativa aprova√ß√£o\n‚Ä¢ \\`${prefix}soloadmin\\` - Apenas admins editam grupo\n\n‚öôÔ∏è *CONFIGURA√á√ïES:*\n‚Ä¢ \\`${prefix}antilink on/off\\` - Liga/desliga antilink\n‚Ä¢ \\`${prefix}modogamer on/off\\` - Liga/desliga modo gamer\n‚Ä¢ \\`${prefix}rpg on/off\\` - Liga/desliga sistema RPG\n\nüìä *STATUS:*\n‚Ä¢ \\`${prefix}grupo-status\\` - Status do grupo\n‚Ä¢ \\`${prefix}status-anti\\` - Status sistemas anti-spam\n\n‚ö†Ô∏è *Requer: Admin do grupo + Bot admin*\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU DONO (comandos exclusivos)\n// ========================\nfunction obterMenuDono() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüëë *COMANDOS DO DONO*\n\n‚öôÔ∏è *CONFIGURA√á√ïES DO BOT:*\n‚Ä¢ \\`${prefix}trocar-prefixo [novo]\\` - Altera prefixo\n‚Ä¢ \\`${prefix}trocar-nome [novo]\\` - Altera nome do bot\n‚Ä¢ \\`${prefix}trocar-nick [novo]\\` - Altera nick do dono\n‚Ä¢ \\`${prefix}configurar-bot\\` - Guia de configura√ß√µes\n\nüõ°Ô∏è *PROTE√á√ÉO AVAN√áADA:*\n‚Ä¢ \\`${prefix}antipv on/off\\` - Bloqueia PVs de n√£o-donos\n‚Ä¢ \\`${prefix}anticall on/off\\` - Rejeita chamadas automaticamente\n\nüîß *CONTROLE TOTAL:*\n‚Ä¢ Todos os comandos de admin funcionam\n‚Ä¢ Bypass de todas as restri√ß√µes\n‚Ä¢ Controle completo sobre configura√ß√µes\n\n‚ö†Ô∏è *Acesso exclusivo para: ${nickDoDono}*\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU DOWNLOAD (m√≠dia e downloads)\n// ========================\nfunction obterMenuDownload() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüì• *DOWNLOADS E M√çDIA*\n\nüéµ *M√öSICA:*\n‚Ä¢ \\`${prefix}play [nome]\\` - Busca m√∫sica no YouTube\n‚Ä¢ \\`${prefix}spotify [link]\\` - Download do Spotify\n\nüì∑ *IMAGENS:*\n‚Ä¢ \\`${prefix}pinterest [busca]\\` - Imagens do Pinterest\n‚Ä¢ \\`${prefix}brat [texto]\\` - Gera imagem BRAT\n\nüì± *REDES SOCIAIS:*\n‚Ä¢ \\`${prefix}ig [link]\\` - Download Instagram\n‚Ä¢ \\`${prefix}instagram [link]\\` - Download Instagram\n\nüè∑Ô∏è *STICKERS:*\n‚Ä¢ \\`${prefix}s\\` - Criar sticker de m√≠dia\n‚Ä¢ \\`${prefix}rename [pack|author]\\` - Editar sticker\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU GAMER (jogos e entretenimento)\n// ========================\nfunction obterMenuGamer() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüéÆ *JOGOS E ENTRETENIMENTO*\n\n‚ö†Ô∏è *Requer \\`${prefix}modogamer on\\` ativo no grupo*\n\nüéØ *JOGOS INTERATIVOS:*\n‚Ä¢ \\`${prefix}jogodavelha @user\\` - Jogo da velha\n‚Ä¢ \\`${prefix}roletarussa @user\\` - Roleta russa\n‚Ä¢ \\`${prefix}disparar\\` - Atirar na roleta russa\n‚Ä¢ \\`${prefix}resetjogodavelha\\` - Reset jogo da velha\n‚Ä¢ \\`${prefix}resetroleta\\` - Reset roleta russa\n\nüé≤ *DIVERS√ÉO:*\n‚Ä¢ \\`${prefix}eununca\\` - Eu nunca poll\n‚Ä¢ \\`${prefix}impostor\\` - Escolhe impostor aleat√≥rio\n\nüí• *A√á√ïES DIVERTIDAS:*\n‚Ä¢ \\`${prefix}tapa @user\\` - Dar tapa\n‚Ä¢ \\`${prefix}matar @user\\` - Matar algu√©m\n‚Ä¢ \\`${prefix}atirar @user\\` - Atirar em algu√©m\n‚Ä¢ \\`${prefix}atropelar @user\\` - Atropelar\n‚Ä¢ \\`${prefix}beijar @user\\` - Beijar algu√©m\n‚Ä¢ \\`${prefix}prender @user\\` - Prender algu√©m\n‚Ä¢ \\`${prefix}sarra @user\\` - Sarrar em algu√©m\n‚Ä¢ \\`${prefix}dedo @user\\` - Mostrar dedo\n\nüìä *RANKINGS DIVERTIDOS:*\n‚Ä¢ \\`${prefix}rankcorno\\` - Rank dos cornos\n‚Ä¢ \\`${prefix}rankgay\\` - Rank dos gays\n‚Ä¢ \\`${prefix}ranklesbica\\` - Rank das l√©sbicas\n‚Ä¢ \\`${prefix}rankburro\\` - Rank dos burros\n‚Ä¢ \\`${prefix}rankfeio\\` - Rank dos feios\n‚Ä¢ \\`${prefix}rankbonito\\` - Rank dos bonitos\n‚Ä¢ \\`${prefix}rankfumante\\` - Rank dos fumantes\n‚Ä¢ \\`${prefix}rankmaconheiro\\` - Rank dos maconheiros\n‚Ä¢ \\`${prefix}rankpobre\\` - Rank dos pobres\n‚Ä¢ \\`${prefix}ranksad\\` - Rank dos tristes\n‚Ä¢ \\`${prefix}rankemo\\` - Rank dos emos\n‚Ä¢ \\`${prefix}rankcasal\\` - Rank de casais\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU ADM (todos os comandos de administradores)\n// ========================\nfunction obterMenuAdm() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüõ°Ô∏è *COMANDOS DE ADMINISTRADORES*\n\n‚ö†Ô∏è *Requer: Admin do grupo + Bot admin*\n\nüîó *SISTEMA ANTI-SPAM:*\n‚Ä¢ \\`${prefix}x9 on/off\\` - Anti-X9 Monitor\n‚Ä¢ \\`${prefix}antilink on/off\\` - Anti-links\n‚Ä¢ \\`${prefix}antilinkhard on/off\\` - Anti-links avan√ßado\n‚Ä¢ \\`${prefix}anticontato on/off\\` - Anti-contatos\n‚Ä¢ \\`${prefix}antidocumento on/off\\` - Anti-documentos\n‚Ä¢ \\`${prefix}antivideo on/off\\` - Anti-v√≠deos\n‚Ä¢ \\`${prefix}antiaudio on/off\\` - Anti-√°udios\n‚Ä¢ \\`${prefix}antisticker on/off\\` - Anti-stickers\n‚Ä¢ \\`${prefix}antiflod on/off\\` - Anti-flood\n‚Ä¢ \\`${prefix}antifake on/off\\` - Anti-n√∫meros fake\n‚Ä¢ \\`${prefix}antiporno on/off\\` - Anti-pornografia\n‚Ä¢ \\`${prefix}antipalavrao on/off\\` - Anti-palavr√µes\n\nüìã *LISTA NEGRA:*\n‚Ä¢ \\`${prefix}listanegra add @user\\` - Adicionar usu√°rio\n‚Ä¢ \\`${prefix}listanegra remove @user\\` - Remover usu√°rio\n‚Ä¢ \\`${prefix}listanegra list\\` - Ver lista negra\n\nüóëÔ∏è *MODERA√á√ÉO:*\n‚Ä¢ \\`${prefix}del\\` - Deleta mensagem marcada\n‚Ä¢ \\`${prefix}marca\\` - Menciona todos os membros\n‚Ä¢ \\`${prefix}hidetag [texto]\\` - Marca√ß√£o oculta\n\nüîí *CONTROLE DO GRUPO:*\n‚Ä¢ \\`${prefix}fechargrupo\\` - Fecha o grupo\n‚Ä¢ \\`${prefix}abrirgrupo\\` - Abre o grupo\n‚Ä¢ \\`${prefix}mudargrupo [nome]\\` - Altera nome do grupo\n‚Ä¢ \\`${prefix}soloadmin\\` - S√≥ admin edita grupo\n‚Ä¢ \\`${prefix}resetlink\\` - Gera novo link do grupo\n\nüë• *CONTROLE DE ENTRADA:*\n‚Ä¢ \\`${prefix}ativarsolicitacao\\` - Ativa aprova√ß√£o\n‚Ä¢ \\`${prefix}desativarsolicitacao\\` - Desativa aprova√ß√£o\n\nüéÆ *CONFIGURA√á√ïES:*\n‚Ä¢ \\`${prefix}modogamer on/off\\` - Modo gamer\n‚Ä¢ \\`${prefix}grupo-status\\` - Status do grupo\n\nüì∏ *PERSONALIZA√á√ÉO:*\n‚Ä¢ \\`${prefix}fotodogrupo\\` - Troca foto do grupo\n‚Ä¢ \\`${prefix}fotodobot\\` - Troca foto do bot\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU ANTI-SPAM\n// ========================\nfunction obterMenuAnti() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüõ°Ô∏è *SISTEMA ANTI-SPAM*\n\n‚ö†Ô∏è *Requer: Admin + Bot admin*\n\nüîó *PROTE√á√ïES DISPON√çVEIS:*\n‚Ä¢ \\`${prefix}antilink on/off\\` - Anti-links\n‚Ä¢ \\`${prefix}antilinkhard on/off\\` - Anti-links avan√ßado\n‚Ä¢ \\`${prefix}anticontato on/off\\` - Anti-contatos\n‚Ä¢ \\`${prefix}antidocumento on/off\\` - Anti-documentos\n‚Ä¢ \\`${prefix}antivideo on/off\\` - Anti-v√≠deos\n‚Ä¢ \\`${prefix}antiaudio on/off\\` - Anti-√°udios\n‚Ä¢ \\`${prefix}antisticker on/off\\` - Anti-stickers\n‚Ä¢ \\`${prefix}antiflod on/off\\` - Anti-flood\n‚Ä¢ \\`${prefix}antifake on/off\\` - Anti-n√∫meros fake\n‚Ä¢ \\`${prefix}antiporno on/off\\` - Anti-pornografia\n‚Ä¢ \\`${prefix}antipalavrao on/off\\` - Anti-palavr√µes\n‚Ä¢ \\`${prefix}x9 on/off\\` - Anti-X9\n\nüìã *LISTA NEGRA:*\n‚Ä¢ \\`${prefix}listanegra add @user\\` - Adicionar √† lista\n‚Ä¢ \\`${prefix}listanegra remove @user\\` - Remover da lista\n‚Ä¢ \\`${prefix}listanegra list\\` - Ver lista negra\n\nüìä *STATUS:*\n‚Ä¢ \\`${prefix}status-anti\\` - Ver todas as prote√ß√µes ativas\n\nüî¥ *A√á√ÉO: Delete autom√°tico + Ban (se bot for admin)*\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU RPG (sistema NeextCity)\n// ========================\nfunction obterMenuRPG() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüí∞ *SISTEMA RPG - NEEXTCITY MEGA 2.0*\n\n‚ö†Ô∏è *Requer \\`${prefix}rpg on\\` ativo no grupo*\n\nüë§ *CADASTRO:*\n‚Ä¢ \\`${prefix}registrar [nome] [banco]\\` - Registrar no RPG\n‚Ä¢ \\`${prefix}saldo\\` - Ver saldo e estat√≠sticas\n‚Ä¢ \\`${prefix}perfil\\` - Ver perfil completo\n‚Ä¢ \\`${prefix}rank\\` - Ranking dos mais ricos\n\nüíº *TRABALHOS (GANHAR GOLD):*\n‚Ä¢ \\`${prefix}pescar\\` - Pescar para ganhar gold (vara necess√°ria)\n‚Ä¢ \\`${prefix}minerar\\` - Minerar recursos preciosos (picareta necess√°ria)\n‚Ä¢ \\`${prefix}trabalhar\\` - Trabalhar com base nos seus itens\n‚Ä¢ \\`${prefix}cacar\\` - Ca√ßar animais selvagens (rifle necess√°rio)\n‚Ä¢ \\`${prefix}coletar\\` - Coletar itens da natureza\n‚Ä¢ \\`${prefix}agricultura\\` - Plantar e colher (sementes e fazenda necess√°rias)\n‚Ä¢ \\`${prefix}entrega\\` - Fazer entregas na cidade\n\nüè¥‚Äç‚ò†Ô∏è *ATIVIDADES ILEGAIS:*\n‚Ä¢ \\`${prefix}assalto @user\\` - Assaltar outro jogador\n‚Ä¢ \\`${prefix}roubar [local]\\` - Roubar locais (casas, lojas, bancos)\n\nüõí *LOJA E INVENT√ÅRIO (8 CATEGORIAS):*\n‚Ä¢ \\`${prefix}loja\\` - Ver todas as 8 categorias\n‚Ä¢ \\`${prefix}loja propriedades\\` - Casas, fazendas, hot√©is, ilhas\n‚Ä¢ \\`${prefix}loja animais\\` - Pets, cria√ß√µes, drag√µes\n‚Ä¢ \\`${prefix}loja ferramentas\\` - Picaretas, varas, rifles, sementes\n‚Ä¢ \\`${prefix}loja veiculos\\` - Carros, motos, avi√µes, foguetes\n‚Ä¢ \\`${prefix}loja negocios\\` - Empresas, restaurantes, multinacionais\n‚Ä¢ \\`${prefix}loja tecnologia\\` - Computadores, setups, est√∫dios\n‚Ä¢ \\`${prefix}loja decoracao\\` - M√≥veis, arte, piscinas\n‚Ä¢ \\`${prefix}loja seguranca\\` - Prote√ß√µes, blindagem, bunkers\n‚Ä¢ \\`${prefix}comprar [item_id] [qtd]\\` - Comprar itens (1-10)\n‚Ä¢ \\`${prefix}inventario\\` - Ver seus itens\n\nüé• *INFLUENCIADOR DIGITAL:*\n‚Ä¢ \\`${prefix}youtube\\` - Criar v√≠deo no YouTube (setup necess√°rio)\n‚Ä¢ \\`${prefix}tiktok\\` - Criar v√≠deo no TikTok (setup necess√°rio)\n‚Ä¢ \\`${prefix}twitch\\` - Fazer stream na Twitch (setup necess√°rio)\n\nüé∞ *JOGOS E INVESTIMENTOS:*\n‚Ä¢ \\`${prefix}tigrinho [valor]\\` - Ca√ßa-n√≠quel\n‚Ä¢ \\`${prefix}apostar [valor]\\` - Apostar na sorte\n‚Ä¢ \\`${prefix}investir [tipo] [valor]\\` - 7 tipos de investimentos\n\nüìö *EDUCA√á√ÉO E CRESCIMENTO:*\n‚Ä¢ \\`${prefix}estudar\\` - Ver cursos dispon√≠veis\n‚Ä¢ \\`${prefix}estudar [num]\\` - Fazer curso espec√≠fico\n\nüí∏ *SISTEMA BANC√ÅRIO:*\n‚Ä¢ \\`${prefix}pix @user [valor]\\` - Transferir gold (18 bancos dispon√≠veis)\n\n‚ö†Ô∏è *RECURSOS AVAN√áADOS:*\n‚Ä¢ Limites di√°rios realistas (8 pescas, 6 minera√ß√µes, 4 trabalhos)\n‚Ä¢ Sistema de riscos (mortes, acidentes, pris√µes)\n‚Ä¢ 100+ itens √∫nicos com benef√≠cios espec√≠ficos\n‚Ä¢ Progress√£o educacional (7 n√≠veis de estudo)\n‚Ä¢ Cooldowns balanceados para gameplay justo\n\nüåü *NOVIDADES MEGA 2.0:*\n‚úÖ Loja com 8 categorias e 100+ itens\n‚úÖ Sistema YouTuber/TikTok/Twitch\n‚úÖ Comando roubar com 12 locais\n‚úÖ 18 bancos diferentes para escolher\n‚úÖ Riscos realistas (mortes, falhas)\n‚úÖ Ferramentas obrigat√≥rias para trabalhos\n‚úÖ Limites di√°rios para gameplay equilibrado\n\nüí∏ *SISTEMA BANC√ÅRIO:*\n‚Ä¢ \\`${prefix}pix @user [valor]\\` - Transferir gold\n‚Ä¢ \\`${prefix}saldo\\` - Ver saldo e estat√≠sticas\n‚Ä¢ \\`${prefix}rank\\` - Ranking dos mais ricos\n\nüè™ *CATEGORIAS DA LOJA:*\n‚Ä¢ **Propriedades** - Casas, fazendas, empresas\n‚Ä¢ **Animais** - Galinhas, cavalos, gatos\n‚Ä¢ **Ve√≠culos** - Motos, carros, avi√µes\n‚Ä¢ **Ferramentas** - Varas, picaretas, tratores\n‚Ä¢ **Neg√≥cios** - Lanchonetes, academias\n\nüí° *Ganhe gold, compre itens e domine NeextCity!*\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU STICKERS (figurinhas)\n// ========================\nfunction obterMenuSticker() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüè∑Ô∏è *MENU DE STICKERS*\n\n‚ú® *CRIAR STICKERS:*\n‚Ä¢ \\`${prefix}s\\` - Converte m√≠dia em sticker\n‚Ä¢ \\`${prefix}sticker\\` - Criar sticker de imagem/v√≠deo\n‚Ä¢ \\`${prefix}attp [texto]\\` - Sticker de texto animado\n‚Ä¢ \\`${prefix}ttp [texto]\\` - Sticker de texto simples\n\nüé® *EDITAR STICKERS:*\n‚Ä¢ \\`${prefix}rename [pack|author]\\` - Renomear sticker\n‚Ä¢ \\`${prefix}take [pack] [author]\\` - Roubar sticker\n‚Ä¢ \\`${prefix}toimg\\` - Converter sticker em imagem\n\nüé≠ *STICKERS ESPECIAIS:*\n‚Ä¢ \\`${prefix}emoji [emoji]\\` - Sticker de emoji\n‚Ä¢ \\`${prefix}semoji [emoji]\\` - Sticker emoji simples\n\nüìù *COMO USAR:*\n‚Ä¢ Envie uma imagem/v√≠deo com \\`${prefix}s\\`\n‚Ä¢ Marque um sticker e use \\`${prefix}take\\`\n‚Ä¢ Use \\`${prefix}rename\\` para personalizar\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU BRINCADEIRAS (coming soon)\n// ========================\nfunction obterMenuBrincadeira() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüéâ *MENU BRINCADEIRAS*\n\n‚ö†Ô∏è *EM DESENVOLVIMENTO*\n\nüöß Este menu est√° sendo finalizado e em breve ter√°:\n\nüé≠ **Comandos de Divers√£o:**\n‚Ä¢ Roleta de perguntas\n‚Ä¢ Verdade ou desafio\n‚Ä¢ Simulador de namorados\n‚Ä¢ Gerador de casais aleat√≥rios\n\nüé≤ **Intera√ß√µes Divertidas:**\n‚Ä¢ Perguntas para o grupo\n‚Ä¢ Desafios aleat√≥rios\n‚Ä¢ Brincadeiras de grupo\n\nüìÖ **Status:** Em desenvolvimento\n‚è∞ **Previs√£o:** Pr√≥xima atualiza√ß√£o\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU HENTAI (coming soon)\n// ========================\nfunction obterMenuHentai() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüîû *MENU HENTAI*\n\n‚ö†Ô∏è *EM DESENVOLVIMENTO*\n\nüöß Este menu est√° sendo finalizado e em breve ter√°:\n\nüé® **Conte√∫do Art√≠stico:**\n‚Ä¢ Imagens de anime\n‚Ä¢ Wallpapers tem√°ticos\n‚Ä¢ Arte digital\n\n‚ö†Ô∏è **Importante:**\n‚Ä¢ Conte√∫do ser√° adequado √†s diretrizes\n‚Ä¢ Uso respons√°vel obrigat√≥rio\n‚Ä¢ Apenas em grupos privados\n\nüìÖ **Status:** Em desenvolvimento\n‚è∞ **Previs√£o:** Pr√≥xima atualiza√ß√£o\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// MENU DONO AVAN√áADO (coming soon)\n// ========================\nfunction obterMenuDonoAvancado() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\nüëë *MENU DONO AVAN√áADO*\n\n‚ö†Ô∏è *EM DESENVOLVIMENTO*\n\nüöß Este menu est√° sendo finalizado e em breve ter√°:\n\nüîß **Controle Total:**\n‚Ä¢ Backup de configura√ß√µes\n‚Ä¢ Gerenciamento de grupos em massa\n‚Ä¢ Logs detalhados do sistema\n‚Ä¢ Controle de usu√°rios globais\n\n‚öôÔ∏è **Configura√ß√µes Avan√ßadas:**\n‚Ä¢ Auto-modera√ß√£o inteligente\n‚Ä¢ Respostas autom√°ticas personalizadas\n‚Ä¢ Sistema de recompensas\n\nüìÖ **Status:** Em desenvolvimento\n‚è∞ **Previs√£o:** Pr√≥xima atualiza√ß√£o\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\n// ========================\n// GUIA DE CONFIGURA√á√ÉO\n// ========================\nfunction obterConfigurarBot() {\n    const { prefix, nomeDoBot, nickDoDono } = obterConfiguracoes();\n    return `\n‚öôÔ∏è *CONFIGURAR BOT - GUIA COMPLETO*\n\nüîß *COMANDOS DE CONFIGURA√á√ÉO (Apenas Dono):*\n\nüìù *ALTERAR PREFIXO:*\n\\`${prefix}trocar-prefixo [novo]\\`\n*Exemplo:* \\`${prefix}trocar-prefixo !\\`\n*Resultado:* Prefixo mudar√° de \"${prefix}\" para \"!\"\n\nü§ñ *ALTERAR NOME DO BOT:*\n\\`${prefix}trocar-nome [novo nome]\\`\n*Exemplo:* \\`${prefix}trocar-nome MeuBot Incr√≠vel\\`\n*Resultado:* Nome mudar√° de \"${nomeDoBot}\"\n\nüë§ *ALTERAR NICK DO DONO:*\n\\`${prefix}trocar-nick [novo nick]\\`\n*Exemplo:* \\`${prefix}trocar-nick Administrador\\`\n*Resultado:* Nick mudar√° de \"${nickDoDono}\"\n\nüìã *CONFIGURA√á√ïES ATUAIS:*\n‚Ä¢ **Prefixo:** ${prefix}\n‚Ä¢ **Nome do Bot:** ${nomeDoBot}\n‚Ä¢ **Nick do Dono:** ${nickDoDono}\n\n‚ö†Ô∏è *IMPORTANTE:*\n‚Ä¢ Apenas o dono pode usar esses comandos\n‚Ä¢ As mudan√ßas s√£o aplicadas instantaneamente\n‚Ä¢ Configura√ß√µes s√£o salvas automaticamente\n\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n¬© NEEXT LTDA - ${nickDoDono}\n`;\n}\n\nmodule.exports = {\n    obterMenuPrincipal,\n    obterMenuMembro,\n    obterMenuAdmin,\n    obterMenuAdm,\n    obterMenuDono,\n    obterMenuDownload,\n    obterMenuGamer,\n    obterMenuAnti,\n    obterMenuRPG,\n    obterMenuSticker,\n    obterMenuBrincadeira,\n    obterMenuHentai,\n    obterMenuDonoAvancado,\n    obterConfigurarBot\n};","size_bytes":21207},"arquivos/funcoes/function.js":{"content":"// ---------------------------\n// Pacotes\n// ---------------------------\nconst cfonts = require(\"cfonts\");\n\n// ---------------------------\n// Configura√ß√µes do Bot\n// ---------------------------\nconst settings = require(\"../../settings/settings.json\");\nconst prefix = settings.prefix || \".\";\nconst botNome = settings.nomeDoBot || \"NEEXT BOT\";\n\n// ---------------------------\n// Banner do bot\n// ---------------------------\nfunction mostrarBanner() {\n    console.clear();\n\n    // NEEXT em roxo s√≥lido\n    cfonts.say(\"NEEXT\", {\n        font: \"block\",\n        align: \"center\",\n        colors: [\"#800080\"], // roxo real\n        background: \"transparent\",\n        letterSpacing: 1,\n        space: true\n    });\n\n    // LTDA em roxo s√≥lido\n    cfonts.say(\"LTDA\", {\n        font: \"block\",\n        align: \"center\",\n        colors: [\"#800080\"], // roxo real\n        background: \"transparent\",\n        letterSpacing: 1,\n        space: true\n    });\n\n    console.log(\"\\n\");\n}\n\n// ---------------------------\n// Logs simples (sem duplica√ß√£o e sem criar arquivos)\n// ---------------------------\nconst mensagensRegistradas = new Set();\n\nfunction logMensagem(m, text = \"\", isCommand = false) {\n    const fromMe = m?.key?.fromMe || false;\n    const jid = m?.key?.remoteJid || \"\";\n    const isGroup = jid.endsWith(\"@g.us\") || jid.endsWith(\"@lid\");\n    const sender = (m?.key?.participant || jid)?.split(\"@\")[0] || \"desconhecido\";\n    const pushName = m?.pushName || \"Sem nome\";\n\n    const conteudo = text || (() => {\n        if (m?.message?.conversation) return m.message.conversation;\n        if (m?.message?.extendedTextMessage?.text) return m.message.extendedTextMessage.text;\n        if (m?.message?.imageMessage?.caption) return m.message.imageMessage.caption;\n        if (m?.message?.videoMessage?.caption) return m.message.videoMessage.caption;\n        return \"[conte√∫do n√£o suportado]\";\n    })();\n\n    // Evita duplica√ß√£o\n    const logKey = `${fromMe}-${jid}-${conteudo}`;\n    if (mensagensRegistradas.has(logKey)) return;\n    mensagensRegistradas.add(logKey);\n\n    const tipo = isCommand || (conteudo.startsWith(prefix)) ? \"[COMANDO]\" : \"[MENSAGEM]\";\n    const local = isGroup ? \"GRUPO\" : \"PV\";\n    const remetente = `${pushName} (${sender})${fromMe ? \" [EU]\" : \"\"}`;\n\n    const logText = `\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n${tipo} ${local}\nDe: ${remetente}\nConte√∫do: ${conteudo}\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`;\n\n    console.log(logText);\n}\n\n// ---------------------------\n// Fun√ß√£o para buscar buffer de URL\n// ---------------------------\nasync function getBuffer(url) {\n    try {\n        const response = await require('axios').get(url, { responseType: 'arraybuffer' });\n        return Buffer.from(response.data);\n    } catch (error) {\n        console.error('Erro ao buscar buffer da URL:', error);\n        throw error;\n    }\n}\n\n// Fun√ß√£o para formatar JID\nfunction formatJid(jid) {\n    return String(jid || \"\").replace(/@s\\.whatsapp\\.net|@g\\.us|@lid/g,'');\n}\n\n// ---------------------------\n// Fun√ß√£o para sauda√ß√£o baseada no hor√°rio\n// ---------------------------\nfunction obterSaudacao() {\n    const moment = require('moment-timezone');\n    const hora = moment().tz('America/Sao_Paulo').hour();\n    \n    if (hora >= 6 && hora < 12) {\n        return \"üåÖ Bom dia\";\n    } else if (hora >= 12 && hora < 18) {\n        return \"‚òÄÔ∏è Boa tarde\";\n    } else if (hora >= 18 && hora < 24) {\n        return \"üåô Boa noite\";\n    } else {\n        return \"üåÉ Boa madrugada\";\n    }\n}\n\n// ---------------------------\n// Fun√ß√£o para contar grupos\n// ---------------------------\nasync function contarGrupos(sock) {\n    try {\n        const grupos = await sock.groupFetchAllParticipating();\n        return Object.keys(grupos).length;\n    } catch (error) {\n        console.error('Erro ao contar grupos:', error);\n        return 0;\n    }\n}\n\n// ---------------------------\n// Fun√ß√£o para contar comandos automaticamente\n// ---------------------------\nfunction contarComandos() {\n    try {\n        const fs = require('fs');\n        const path = require('path');\n        \n        // L√™ o arquivo index.js\n        const indexPath = path.join(__dirname, '../../index.js');\n        const indexContent = fs.readFileSync(indexPath, 'utf8');\n        \n        // Procura por todos os cases no switch da fun√ß√£o handleCommand\n        const casePattern = /case\\s+\"([^\"]+)\"/g;\n        const matches = [];\n        let match;\n        \n        while ((match = casePattern.exec(indexContent)) !== null) {\n            // Evita duplicatas e ignora cases internos como break cases\n            if (!matches.includes(match[1])) {\n                matches.push(match[1]);\n            }\n        }\n        \n        console.log(`üìä Total de comandos encontrados automaticamente: ${matches.length}`);\n        return matches.length;\n    } catch (error) {\n        console.error('‚ùå Erro ao contar comandos automaticamente:', error);\n        // Fallback para contagem manual se houver erro\n        return 25; // estimativa atual\n    }\n}\n\n// ---------------------------\n// Exporta√ß√µes\n// ---------------------------\nmodule.exports = {\n    mostrarBanner,\n    logMensagem,\n    formatJid,\n    getBuffer,\n    obterSaudacao,\n    contarGrupos,\n    contarComandos\n};","size_bytes":5361},"arquivos/antispam.js":{"content":"// Sistema Anti-Spam Completo para WhatsApp Bot\nconst fs = require('fs');\nconst path = require('path');\n\n// Diret√≥rios do sistema\nconst GRUPOS_DIR = path.join(__dirname, '../database/grupos/ativadogrupo');\nconst CACHE_FLOOD = new Map(); // Cache para controle de flood\n\n// Utilit√°rios\nfunction formatGroupId(groupId) {\n    return groupId.replace('@g.us', '').replace('@lid', '').replace(/[^a-zA-Z0-9]/g, '_');\n}\n\n// Verifica se n√∫mero √© brasileiro\nfunction isNumeroBrasileiro(jid) {\n    if (!jid || typeof jid !== 'string') return false;\n    \n    // Remove o @s.whatsapp.net para pegar apenas o n√∫mero\n    const numero = jid.replace('@s.whatsapp.net', '');\n    \n    // Verifica se come√ßa com 55 (c√≥digo do Brasil)\n    // Formatos aceitos: 55XXXXXXXXXXX (13 d√≠gitos) ou 5511XXXXXXXXX (12 d√≠gitos para alguns casos)\n    const brasileiroRegex = /^55[1-9][0-9]{8,9}$/;\n    \n    return brasileiroRegex.test(numero);\n}\n\nfunction getGroupConfigPath(groupId) {\n    const formattedId = formatGroupId(groupId);\n    return path.join(GRUPOS_DIR, `${formattedId}.json`);\n}\n\n// Carrega configura√ß√£o de um grupo\nfunction carregarConfigGrupo(groupId) {\n    try {\n        const configPath = getGroupConfigPath(groupId);\n        if (!fs.existsSync(configPath)) {\n            return {\n                antilink: false,\n                anticontato: false,\n                antidocumento: false,\n                antivideo: false,\n                antiaudio: false,\n                antisticker: false,\n                antiflod: false,\n                antifake: false,\n                x9: false,\n                modogamer: false,\n                antiporno: false,\n                antilinkhard: false,\n                antipalavrao: false,\n                antipv: false,\n                anticall: false,\n                rankativo: false,\n                welcome1: false,\n                listanegra: [],\n                floodConfig: {\n                    maxMensagens: 5,\n                    tempoSegundos: 10\n                }\n            };\n        }\n        const data = fs.readFileSync(configPath, 'utf-8');\n        return JSON.parse(data);\n    } catch (err) {\n        console.error(`‚ùå Erro ao carregar config do grupo ${groupId}:`, err);\n        return null;\n    }\n}\n\n// Salva configura√ß√£o de um grupo\nfunction salvarConfigGrupo(groupId, config) {\n    try {\n        // Garante que o diret√≥rio existe\n        if (!fs.existsSync(GRUPOS_DIR)) {\n            fs.mkdirSync(GRUPOS_DIR, { recursive: true });\n        }\n        \n        const configPath = getGroupConfigPath(groupId);\n        fs.writeFileSync(configPath, JSON.stringify(config, null, 2));\n        return true;\n    } catch (err) {\n        console.error(`‚ùå Erro ao salvar config do grupo ${groupId}:`, err);\n        return false;\n    }\n}\n\n// Detecta links na mensagem\nfunction detectarLinks(texto) {\n    if (!texto) return false;\n    const linkRegex = /((https?:\\/\\/)|(www\\.))[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)|wa.me\\/|whatsapp.com\\/|t.me\\/|chat.whatsapp.com\\/|instagram.com\\/|facebook.com\\/|twitter.com\\/|tiktok.com\\/|youtube.com\\/|discord.gg\\//i;\n    return linkRegex.test(texto);\n}\n\n// Detecta links dif√≠ceis de encontrar (antilinkhard)\nfunction detectarLinksHard(texto) {\n    if (!texto) return false;\n    // Remove espa√ßos e caracteres especiais\n    const textoLimpo = texto.replace(/[\\s\\-_\\.]/g, '');\n    \n    const linksHardRegex = [\n        // Links com separadores: w.w.w, h.t.t.p.s\n        /w\\.w\\.w|h\\.t\\.t\\.p\\.s|h\\.t\\.t\\.p/i,\n        // Links com espa√ßos: w w w . , h t t p s : / /\n        /w\\s*w\\s*w\\s*\\.|h\\s*t\\s*t\\s*p\\s*s?\\s*:/i,\n        // Links com underscore: w_w_w_, http_s\n        /w_w_w_|h_t_t_p_s?/i,\n        // Links camuflados: ÔΩóÔΩóÔΩó (unicode), Ôº®Ôº¥Ôº¥Ôº∞s\n        /ÔΩóÔΩóÔΩó|Ôº®Ôº¥Ôº¥Ôº∞/i,\n        // N√∫meros como letras: w4atsapp, 1nstagram\n        /w4atsapp|1nstagram|f4cebook|t1ktok/i,\n        // Links com h√≠fen excessivo: w-w-w, h-t-t-p\n        /w-w-w|h-t-t-p/i,\n        // Links espelhados ou invertidos\n        /ptt\\.|moc\\.|gro\\./i,\n        // Dom√≠nios disfar√ßados: bit.ly > b1t.ly, tinyurl > t1nyurl\n        /b1t\\.ly|t1nyurl|sh0rt|l1nk|ur\\.l/i,\n        // WhatsApp camuflado: \n        /chat.*whats.*app|wa.*me|whats.*app.*chat/i\n    ];\n    \n    return linksHardRegex.some(regex => regex.test(textoLimpo));\n}\n\n// Detecta conte√∫do pornogr√°fico\nfunction detectarPorno(texto, message) {\n    if (!texto && !message) return false;\n    \n    // Lista de palavras relacionadas a pornografia\n    const palavrasPorno = [\n        // Palavras expl√≠citas\n        'porno', 'pornografia', 'porn√¥', 'xxx', 'sexo', 'nude', 'nua', 'pelada',\n        'buceta', 'pau', 'p√™nis', 'vagina', 'peitos', 'seios', 'rola', 'piru',\n        'xota', 'xereca', 'ppk', 'penis', 'tesao', 'tes√£o', 'gozar', 'gozo',\n        'masturba√ß√£o', 'masturbar', 'punheta', 'siririca', 'puta', 'putaria',\n        'safada', 'safado', 'gostosa', 'gostoso', 'bund√£o', 'bunduda',\n        // Sites porn√¥s conhecidos\n        'pornhub', 'xvideos', 'redtube', 'xhamster', 'youporn', 'tube8',\n        'spankbang', 'xnxx', 'brazzers', 'realitykings', 'bangbros',\n        // Termos relacionados\n        'hentai', 'ecchi', 'ahegao', 'futanari', 'yaoi', 'yuri',\n        'onlyfans', 'privacy', 'webcam', 'camgirl', 'stripper',\n        // Varia√ß√µes com n√∫meros/s√≠mbolos\n        'p0rno', 'p0rn', 's3xo', 'x x x', 'p.o.r.n', 's.e.x.o'\n    ];\n    \n    // Fun√ß√£o para normalizar texto removendo acentos mas preservando caracteres\n    function normalizarTexto(texto) {\n        return texto\n            .toLowerCase()\n            .normalize('NFD') // Decomp√µe caracteres acentuados\n            .replace(/[\\u0300-\\u036f]/g, '') // Remove os diacr√≠ticos (acentos)\n            .replace(/[^a-zA-Z0-9\\s]/g, '') // Remove caracteres especiais exceto espa√ßos\n            .replace(/\\s+/g, ' ') // Normaliza espa√ßos m√∫ltiplos\n            .trim();\n    }\n\n    // Verifica no texto\n    if (texto) {\n        const textoLimpo = normalizarTexto(texto);\n        for (const palavra of palavrasPorno) {\n            const palavraNormalizada = normalizarTexto(palavra);\n            if (textoLimpo.includes(palavraNormalizada)) {\n                return true;\n            }\n        }\n    }\n    \n    // Verifica em legendas de m√≠dia\n    if (message) {\n        const caption = message.imageMessage?.caption || message.videoMessage?.caption || '';\n        if (caption) {\n            const captionLimpa = normalizarTexto(caption);\n            for (const palavra of palavrasPorno) {\n                const palavraNormalizada = normalizarTexto(palavra);\n                if (captionLimpa.includes(palavraNormalizada)) {\n                    return true;\n                }\n            }\n        }\n        \n        // Verifica se √© m√≠dia suspeita (imagem/v√≠deo sem caption em contexto suspeito)\n        if (message.imageMessage || message.videoMessage) {\n            // Por seguran√ßa, se n√£o houver caption mas for m√≠dia, pode ser verificado por moderador\n            return false; // Por enquanto n√£o bloqueia automaticamente m√≠dia sem caption\n        }\n    }\n    \n    return false;\n}\n\n// Detecta palavr√µes\nfunction detectarPalavrao(texto) {\n    if (!texto) return false;\n    \n    const palavroes = [\n        // Palavr√µes comuns\n        'filho da puta', 'fdp', 'porra', 'caralho', 'merda', 'cu', 'bosta',\n        'desgra√ßa', 'desgra√ßado', 'puto', 'puta', 'cacete', 'cuz√£o', 'cuzao',\n        'ot√°rio', 'otario', 'babaca', 'imbecil', 'idiota', 'burro', 'est√∫pido',\n        'estupido', 'retardado', 'mongol√≥ide', 'mongoloide', 'd√©bil', 'debil',\n        'trouxa', 'lesado', 'les√£o', 'lesao', 'vagabundo', 'vagabunda',\n        'safado', 'safada', 'corno', 'cornudo', 'chifrudo', 'cuckold',\n        // Palavr√µes com varia√ß√µes\n        'p0rra', 'c4ralho', 'm3rda', 'c@ralho', 'p0uta', 'put@',\n        'fdp', 'f.d.p', 'f d p', 'filhodaputa', 'filho-da-puta',\n        // Xingamentos racistas/preconceituosos\n        'macaco', 'negro', 'preto', 'mulata', 'crioulo', 'neguinho',\n        'favelado', 'favelada', 'nordestino', 'para√≠ba', 'baiano',\n        // Ofensas religiosas\n        'dem√¥nio', 'diabo', 'capeta', 'inferno', 'satan√°s', 'satanas',\n        // Palavr√µes regionais\n        'baitola', 'viado', 'bicha', 'boiola', 'fresco', 'maricas',\n        'piranha', 'galinha', 'vadia', 'rameira', 'prostituta'\n    ];\n    \n    // Fun√ß√£o para normalizar texto removendo acentos mas preservando caracteres\n    function normalizarTexto(texto) {\n        return texto\n            .toLowerCase()\n            .normalize('NFD') // Decomp√µe caracteres acentuados\n            .replace(/[\\u0300-\\u036f]/g, '') // Remove os diacr√≠ticos (acentos)\n            .replace(/[^a-zA-Z0-9\\s]/g, ' ') // Remove caracteres especiais exceto espa√ßos\n            .replace(/\\s+/g, ' ') // Normaliza espa√ßos m√∫ltiplos\n            .trim();\n    }\n\n    const textoLimpo = normalizarTexto(texto);\n    \n    for (const palavrao of palavroes) {\n        // Verifica palavra exata\n        const palavraoNormalizado = normalizarTexto(palavrao);\n        if (textoLimpo.includes(palavraoNormalizado)) {\n            return true;\n        }\n        \n        // Verifica palavra com espa√ßos\n        const palavraoComEspacos = palavraoNormalizado.split('').join('\\\\s*');\n        const regex = new RegExp(palavraoComEspacos, 'i');\n        if (regex.test(textoLimpo)) {\n            return true;\n        }\n    }\n    \n    return false;\n}\n\n// Verifica se √© contact/contato\nfunction isContactMessage(message) {\n    return !!(message.contactMessage || message.contactsArrayMessage);\n}\n\n// Verifica se √© documento\nfunction isDocumentMessage(message) {\n    return !!(message.documentMessage);\n}\n\n// Verifica se √© v√≠deo\nfunction isVideoMessage(message) {\n    return !!(message.videoMessage);\n}\n\n// Verifica se √© √°udio\nfunction isAudioMessage(message) {\n    return !!(message.audioMessage || message.pttMessage);\n}\n\n// Verifica se √© sticker\nfunction isStickerMessage(message) {\n    return !!(message.stickerMessage);\n}\n\n// Controle de flood\nfunction verificarFlood(userId, groupId, config) {\n    if (!config.antiflod) return false;\n    \n    const key = `${groupId}_${userId}`;\n    const agora = Date.now();\n    const limite = config.floodConfig.tempoSegundos * 1000;\n    \n    if (!CACHE_FLOOD.has(key)) {\n        CACHE_FLOOD.set(key, []);\n    }\n    \n    const mensagens = CACHE_FLOOD.get(key);\n    \n    // Remove mensagens antigas\n    const mensagensRecentes = mensagens.filter(timestamp => agora - timestamp < limite);\n    \n    // Adiciona nova mensagem\n    mensagensRecentes.push(agora);\n    CACHE_FLOOD.set(key, mensagensRecentes);\n    \n    // Verifica se excedeu o limite\n    return mensagensRecentes.length > config.floodConfig.maxMensagens;\n}\n\n// Limpa cache de flood periodicamente\nsetInterval(() => {\n    const agora = Date.now();\n    for (const [key, mensagens] of CACHE_FLOOD.entries()) {\n        const mensagensRecentes = mensagens.filter(timestamp => agora - timestamp < 60000); // 1 minuto\n        if (mensagensRecentes.length === 0) {\n            CACHE_FLOOD.delete(key);\n        } else {\n            CACHE_FLOOD.set(key, mensagensRecentes);\n        }\n    }\n}, 60000);\n\n// Verifica se usu√°rio est√° na lista negra\nfunction isUsuarioListaNegra(userId, groupId) {\n    const config = carregarConfigGrupo(groupId);\n    if (!config || !config.listanegra) return false;\n    return config.listanegra.includes(userId);\n}\n\n// Adiciona usu√°rio √† lista negra\nfunction adicionarListaNegra(userId, groupId) {\n    const config = carregarConfigGrupo(groupId);\n    if (!config) return false;\n    \n    if (!config.listanegra) config.listanegra = [];\n    \n    if (!config.listanegra.includes(userId)) {\n        config.listanegra.push(userId);\n        return salvarConfigGrupo(groupId, config);\n    }\n    return true; // J√° estava na lista\n}\n\n// Remove usu√°rio da lista negra\nfunction removerListaNegra(userId, groupId) {\n    const config = carregarConfigGrupo(groupId);\n    if (!config || !config.listanegra) return false;\n    \n    const index = config.listanegra.indexOf(userId);\n    if (index > -1) {\n        config.listanegra.splice(index, 1);\n        return salvarConfigGrupo(groupId, config);\n    }\n    return true; // N√£o estava na lista\n}\n\n// Ativa/desativa funcionalidade anti\nfunction toggleAntiFeature(groupId, feature, estado) {\n    const config = carregarConfigGrupo(groupId);\n    if (!config) return false;\n    \n    const validFeatures = ['antilink', 'anticontato', 'antidocumento', 'antivideo', 'antiaudio', 'antisticker', 'antiflod', 'antifake', 'x9', 'antiporno', 'antilinkhard', 'antipalavrao', 'antipv', 'anticall', 'rankativo'];\n    \n    if (!validFeatures.includes(feature)) return false;\n    \n    if (estado === 'on' || estado === 'ativar' || estado === '1') {\n        config[feature] = true;\n    } else if (estado === 'off' || estado === 'desativar' || estado === '0') {\n        config[feature] = false;\n    } else {\n        return config[feature]; // Retorna estado atual\n    }\n    \n    return salvarConfigGrupo(groupId, config) ? config[feature] : false;\n}\n\n// Processa mensagem para verificar viola√ß√µes\nfunction processarMensagem(message, groupId, userId) {\n    const config = carregarConfigGrupo(groupId);\n    if (!config) return { violacao: false };\n    \n    const violations = [];\n    \n    // Extrai texto da mensagem\n    let texto = '';\n    if (message.conversation) texto = message.conversation;\n    if (message.extendedTextMessage?.text) texto = message.extendedTextMessage.text;\n    if (message.imageMessage?.caption) texto = message.imageMessage.caption;\n    if (message.videoMessage?.caption) texto = message.videoMessage.caption;\n    \n    // Verifica antilink\n    if (config.antilink && detectarLinks(texto)) {\n        violations.push('antilink');\n    }\n    \n    // Verifica antilinkhard\n    if (config.antilinkhard && detectarLinksHard(texto)) {\n        violations.push('antilinkhard');\n    }\n    \n    // Verifica antiporno\n    if (config.antiporno && detectarPorno(texto, message)) {\n        violations.push('antiporno');\n    }\n    \n    // Verifica antipalavrao\n    if (config.antipalavrao && detectarPalavrao(texto)) {\n        violations.push('antipalavrao');\n    }\n    \n    // Verifica anticontato\n    if (config.anticontato && isContactMessage(message)) {\n        violations.push('anticontato');\n    }\n    \n    // Verifica antidocumento\n    if (config.antidocumento && isDocumentMessage(message)) {\n        violations.push('antidocumento');\n    }\n    \n    // Verifica antivideo\n    if (config.antivideo && isVideoMessage(message)) {\n        violations.push('antivideo');\n    }\n    \n    // Verifica antiaudio\n    if (config.antiaudio && isAudioMessage(message)) {\n        violations.push('antiaudio');\n    }\n    \n    // Verifica antisticker\n    if (config.antisticker && isStickerMessage(message)) {\n        violations.push('antisticker');\n    }\n    \n    // Verifica antiflod\n    if (verificarFlood(userId, groupId, config)) {\n        violations.push('antiflod');\n    }\n    \n    return {\n        violacao: violations.length > 0,\n        tipos: violations,\n        config\n    };\n}\n\n// Exporta todas as fun√ß√µes\nmodule.exports = {\n    // Gerenciamento de configura√ß√£o\n    carregarConfigGrupo,\n    salvarConfigGrupo,\n    \n    // Toggle de funcionalidades\n    toggleAntiFeature,\n    \n    // Lista negra\n    isUsuarioListaNegra,\n    adicionarListaNegra,\n    removerListaNegra,\n    \n    // Processamento\n    processarMensagem,\n    \n    // Detec√ß√µes espec√≠ficas\n    detectarLinks,\n    detectarLinksHard,\n    detectarPorno,\n    detectarPalavrao,\n    isContactMessage,\n    isDocumentMessage,\n    isVideoMessage,\n    isAudioMessage,\n    isStickerMessage,\n    verificarFlood,\n    isNumeroBrasileiro,\n    \n    // Utilit√°rios\n    formatGroupId,\n    getGroupConfigPath\n};","size_bytes":15840},"arquivos/rpg.js":{"content":"\n// Sistema RPG NeextCity - NOVA GERA√á√ÉO COMPLETA\nconst fs = require('fs');\nconst path = require('path');\nconst moment = require('moment-timezone');\n\n// Caminho para o arquivo de dados do RPG\nconst rpgDataFile = path.join(__dirname, '../database/grupos/rpg_data.json');\n\n// Sistema de Mutex para evitar race conditions\nlet rpgLock = false;\n\nasync function withLock(fn) {\n    while (rpgLock) {\n        await new Promise(resolve => setTimeout(resolve, 10));\n    }\n    rpgLock = true;\n    try {\n        return await fn();\n    } finally {\n        rpgLock = false;\n    }\n}\n\n// ==================== CONSTANTES DO JOGO ====================\n\n// Bancos dispon√≠veis (18 op√ß√µes)\nconst bancos = [\n    { id: 'nubank', nome: 'üíú Nubank', emoji: 'üíú' },\n    { id: 'inter', nome: 'üß° Inter', emoji: 'üß°' },\n    { id: 'santander', nome: 'üî¥ Santander', emoji: 'üî¥' },\n    { id: 'bradesco', nome: 'üîµ Bradesco', emoji: 'üîµ' },\n    { id: 'itau', nome: 'üü† Ita√∫', emoji: 'üü†' },\n    { id: 'bb', nome: 'üü° Banco do Brasil', emoji: 'üü°' },\n    { id: 'caixa', nome: 'üè¶ Caixa', emoji: 'üè¶' },\n    { id: 'picpay', nome: 'üíö PicPay', emoji: 'üíö' },\n    { id: 'c6bank', nome: '‚ö´ C6 Bank', emoji: '‚ö´' },\n    { id: 'next', nome: '‚ö™ Next', emoji: '‚ö™' },\n    { id: 'neon', nome: 'üî∫ Neon', emoji: 'üî∫' },\n    { id: 'original', nome: 'üü§ Original', emoji: 'üü§' },\n    { id: 'safra', nome: 'üü£ Safra', emoji: 'üü£' },\n    { id: 'will', nome: 'üî∏ Will Bank', emoji: 'üî∏' },\n    { id: 'c6', nome: '‚ö™ C6 Bank', emoji: '‚ö™' },\n    { id: 'bs2', nome: 'üü® BS2', emoji: 'üü®' },\n    { id: 'bmg', nome: 'üü´ BMG', emoji: 'üü´' },\n    { id: 'sicoob', nome: 'üü¢ Sicoob', emoji: 'üü¢' }\n];\n\n// N√≠veis de educa√ß√£o com progress√£o realista\nconst educacao = {\n    1: { nome: 'Ensino Fundamental', custo: 0, tempo: 1, salarioMin: 50 },\n    2: { nome: 'Ensino M√©dio', custo: 1000, tempo: 2, salarioMin: 100 },\n    3: { nome: 'Curso T√©cnico', custo: 3000, tempo: 3, salarioMin: 200 },\n    4: { nome: 'Gradua√ß√£o', custo: 8000, tempo: 4, salarioMin: 400 },\n    5: { nome: 'P√≥s-gradua√ß√£o', custo: 15000, tempo: 5, salarioMin: 600 },\n    6: { nome: 'Mestrado', custo: 25000, tempo: 6, salarioMin: 800 },\n    7: { nome: 'Doutorado', custo: 40000, tempo: 8, salarioMin: 1200 }\n};\n\n// Cursos universit√°rios espec√≠ficos\nconst faculdades = {\n    medicina: { nome: 'Medicina', custo: 100000, tempo: 12, salario: 2000 },\n    engenharia: { nome: 'Engenharia', custo: 60000, tempo: 10, salario: 1500 },\n    direito: { nome: 'Direito', custo: 50000, tempo: 10, salario: 1300 },\n    administracao: { nome: 'Administra√ß√£o', custo: 35000, tempo: 8, salario: 1000 },\n    ti: { nome: 'Tecnologia da Informa√ß√£o', custo: 45000, tempo: 8, salario: 1800 },\n    psicologia: { nome: 'Psicologia', custo: 40000, tempo: 10, salario: 900 },\n    odontologia: { nome: 'Odontologia', custo: 80000, tempo: 10, salario: 1600 },\n    veterinaria: { nome: 'Veterin√°ria', custo: 70000, tempo: 10, salario: 1400 }\n};\n\n// Loja completa com 8 categorias e +100 itens\nconst loja = {\n    // CATEGORIA 1: PROPRIEDADES (15 itens)\n    propriedades: {\n        barraca: { \n            id: 'barraca', nome: '‚õ∫ Barraca', preco: 500, categoria: 'propriedades', emoji: '‚õ∫',\n            durabilidade: 50, durabilidade_max: 50, beneficio: '+10 gold/dia (renda passiva)', renda_passiva: 10,\n            descricao: 'Abrigo b√°sico para come√ßar'\n        },\n        casa_madeira: { \n            id: 'casa_madeira', nome: 'üè† Casa de Madeira', preco: 15000, categoria: 'propriedades', emoji: 'üè†',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+50 gold/dia (renda passiva)', renda_passiva: 50,\n            descricao: 'Casa simples mas confort√°vel'\n        },\n        casa_alvenaria: { \n            id: 'casa_alvenaria', nome: 'üèòÔ∏è Casa de Alvenaria', preco: 50000, categoria: 'propriedades', emoji: 'üèòÔ∏è',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+150 gold/dia (renda passiva)', renda_passiva: 150,\n            descricao: 'Casa resistente e espa√ßosa'\n        },\n        apartamento: { \n            id: 'apartamento', nome: 'üè¢ Apartamento', preco: 80000, categoria: 'propriedades', emoji: 'üè¢',\n            durabilidade: 800, durabilidade_max: 800, beneficio: '+200 gold/dia (renda passiva)', renda_passiva: 200,\n            descricao: 'Apartamento moderno na cidade'\n        },\n        mansao: { \n            id: 'mansao', nome: 'üè∞ Mans√£o', preco: 300000, categoria: 'propriedades', emoji: 'üè∞',\n            durabilidade: 1500, durabilidade_max: 1500, beneficio: '+500 gold/dia (renda passiva)', renda_passiva: 500,\n            descricao: 'Casa de luxo para os ricos'\n        },\n        fazenda: { \n            id: 'fazenda', nome: 'üöú Fazenda', preco: 150000, categoria: 'propriedades', emoji: 'üöú',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+300 gold/dia (agricultura)', renda_passiva: 300,\n            descricao: 'Propriedade rural produtiva'\n        },\n        hotel: { \n            id: 'hotel', nome: 'üè® Hotel', preco: 500000, categoria: 'propriedades', emoji: 'üè®',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+800 gold/dia (turismo)', renda_passiva: 800,\n            descricao: 'Neg√≥cio de hospedagem lucrativo'\n        },\n        shopping: { \n            id: 'shopping', nome: 'üè¨ Shopping Center', preco: 1000000, categoria: 'propriedades', emoji: 'üè¨',\n            durabilidade: 3000, durabilidade_max: 3000, beneficio: '+1500 gold/dia (com√©rcio)', renda_passiva: 1500,\n            descricao: 'Centro comercial gigantesco'\n        },\n        ilha_privada: { \n            id: 'ilha_privada', nome: 'üèùÔ∏è Ilha Privada', preco: 5000000, categoria: 'propriedades', emoji: 'üèùÔ∏è',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+3000 gold/dia (para√≠so)', renda_passiva: 3000,\n            descricao: 'Seu pr√≥prio para√≠so particular'\n        },\n        cidade: { \n            id: 'cidade', nome: 'üåÜ Cidade Inteira', preco: 20000000, categoria: 'propriedades', emoji: 'üåÜ',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+10000 gold/dia (prefeito)', renda_passiva: 10000,\n            descricao: 'Voc√™ √© o dono de uma cidade!'\n        },\n        castelo: { \n            id: 'castelo', nome: 'üèØ Castelo Medieval', preco: 2000000, categoria: 'propriedades', emoji: 'üèØ',\n            durabilidade: 5000, durabilidade_max: 5000, beneficio: '+1200 gold/dia (realeza)', renda_passiva: 1200,\n            descricao: 'Castelo hist√≥rico majestoso'\n        },\n        bunker: { \n            id: 'bunker', nome: 'üè¢ Bunker Nuclear', preco: 3000000, categoria: 'propriedades', emoji: 'üè¢',\n            durabilidade: 8000, durabilidade_max: 8000, beneficio: 'Prote√ß√£o total contra ataques', protecao: 100,\n            descricao: 'Abrigo √† prova de tudo'\n        },\n        predio: { \n            id: 'predio', nome: 'üèóÔ∏è Pr√©dio Comercial', preco: 800000, categoria: 'propriedades', emoji: 'üèóÔ∏è',\n            durabilidade: 2500, durabilidade_max: 2500, beneficio: '+1000 gold/dia (aluguel)', renda_passiva: 1000,\n            descricao: 'Pr√©dio para alugar escrit√≥rios'\n        },\n        universidade: { \n            id: 'universidade', nome: 'üéì Universidade Pr√≥pria', preco: 10000000, categoria: 'propriedades', emoji: 'üéì',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+5000 gold/dia (educa√ß√£o)', renda_passiva: 5000,\n            descricao: 'Sua pr√≥pria institui√ß√£o de ensino'\n        },\n        porto: { \n            id: 'porto', nome: '‚öì Porto Mar√≠timo', preco: 8000000, categoria: 'propriedades', emoji: '‚öì',\n            durabilidade: 6000, durabilidade_max: 6000, beneficio: '+4000 gold/dia (com√©rcio)', renda_passiva: 4000,\n            descricao: 'Porto para navios cargueiros'\n        }\n    },\n\n    // CATEGORIA 2: ANIMAIS (15 itens)\n    animais: {\n        galinha: { \n            id: 'galinha', nome: 'üêî Galinha', preco: 200, categoria: 'animais', emoji: 'üêî',\n            durabilidade: 60, durabilidade_max: 60, beneficio: '+30 gold/dia (ovos)', renda_passiva: 30,\n            descricao: 'Produz ovos diariamente'\n        },\n        vaca: { \n            id: 'vaca', nome: 'üêÑ Vaca', preco: 3000, categoria: 'animais', emoji: 'üêÑ',\n            durabilidade: 120, durabilidade_max: 120, beneficio: '+100 gold/dia (leite)', renda_passiva: 100,\n            descricao: 'Produz leite fresco'\n        },\n        porco: { \n            id: 'porco', nome: 'üê∑ Porco', preco: 1500, categoria: 'animais', emoji: 'üê∑',\n            durabilidade: 80, durabilidade_max: 80, beneficio: '+80 gold/dia (carne)', renda_passiva: 80,\n            descricao: 'Cria√ß√£o para consumo'\n        },\n        cavalo: { \n            id: 'cavalo', nome: 'üê¥ Cavalo', preco: 8000, categoria: 'animais', emoji: 'üê¥',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+25% velocidade trabalhos', bonus_velocidade: 25,\n            descricao: 'Animal de transporte nobre'\n        },\n        cachorro: { \n            id: 'cachorro', nome: 'üêï Cachorro', preco: 1000, categoria: 'animais', emoji: 'üêï',\n            durabilidade: 150, durabilidade_max: 150, beneficio: '+30% prote√ß√£o assaltos', bonus_defesa: 30,\n            descricao: 'Fiel guardi√£o da fam√≠lia'\n        },\n        gato: { \n            id: 'gato', nome: 'üê± Gato', preco: 500, categoria: 'animais', emoji: 'üê±',\n            durabilidade: 120, durabilidade_max: 120, beneficio: '+10 gold/dia (companionship)', renda_passiva: 10,\n            descricao: 'Pet carinhoso e independente'\n        },\n        ovelha: { \n            id: 'ovelha', nome: 'üêë Ovelha', preco: 2000, categoria: 'animais', emoji: 'üêë',\n            durabilidade: 100, durabilidade_max: 100, beneficio: '+70 gold/dia (l√£)', renda_passiva: 70,\n            descricao: 'Produz l√£ de qualidade'\n        },\n        tigre: { \n            id: 'tigre', nome: 'üêÖ Tigre', preco: 50000, categoria: 'animais', emoji: 'üêÖ',\n            durabilidade: 300, durabilidade_max: 300, beneficio: '+50% prote√ß√£o + intimida√ß√£o', bonus_defesa: 50,\n            descricao: 'Predador ex√≥tico impressionante'\n        },\n        leao: { \n            id: 'leao', nome: 'ü¶Å Le√£o', preco: 80000, categoria: 'animais', emoji: 'ü¶Å',\n            durabilidade: 350, durabilidade_max: 350, beneficio: '+60% prote√ß√£o + status', bonus_defesa: 60,\n            descricao: 'Rei da selva como pet'\n        },\n        elefante: { \n            id: 'elefante', nome: 'üêò Elefante', preco: 150000, categoria: 'animais', emoji: 'üêò',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+40% ganhos trabalho pesado', bonus_trabalho: 40,\n            descricao: 'Gigante gentil e trabalhador'\n        },\n        dragao: { \n            id: 'dragao', nome: 'üê≤ Drag√£o', preco: 1000000, categoria: 'animais', emoji: 'üê≤',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+100% prote√ß√£o + voo', bonus_defesa: 100,\n            descricao: 'Criatura m√≠tica lend√°ria'\n        },\n        unicornio: { \n            id: 'unicornio', nome: 'ü¶Ñ Unic√≥rnio', preco: 800000, categoria: 'animais', emoji: 'ü¶Ñ',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+500 gold/dia (magia)', renda_passiva: 500,\n            descricao: 'Ser m√°gico que traz sorte'\n        },\n        aguia: { \n            id: 'aguia', nome: 'ü¶Ö √Åguia', preco: 10000, categoria: 'animais', emoji: 'ü¶Ö',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+20% chance cr√≠tica trabalhos', bonus_critico: 20,\n            descricao: 'Ave de rapina majestosa'\n        },\n        lobo: { \n            id: 'lobo', nome: 'üê∫ Lobo', preco: 25000, categoria: 'animais', emoji: 'üê∫',\n            durabilidade: 250, durabilidade_max: 250, beneficio: '+40% prote√ß√£o noturna', bonus_defesa: 40,\n            descricao: 'Predador feroz e leal'\n        },\n        tubarao: { \n            id: 'tubarao', nome: 'ü¶à Tubar√£o', preco: 100000, categoria: 'animais', emoji: 'ü¶à',\n            durabilidade: 400, durabilidade_max: 400, beneficio: '+200% ganhos pesca', bonus_pesca: 200,\n            descricao: 'Predador aqu√°tico tem√≠vel'\n        }\n    },\n\n    // CATEGORIA 3: FERRAMENTAS (20 itens)\n    ferramentas: {\n        // Pesca\n        vara_bambu: { \n            id: 'vara_bambu', nome: 'üéã Vara de Bambu', preco: 100, categoria: 'ferramentas', emoji: 'üéã',\n            durabilidade: 30, durabilidade_max: 30, beneficio: 'Pesca b√°sica (+20% sucesso)', bonus_pesca: 20,\n            descricao: 'Vara simples para iniciantes'\n        },\n        vara_carbono: { \n            id: 'vara_carbono', nome: 'üé£ Vara de Carbono', preco: 2000, categoria: 'ferramentas', emoji: 'üé£',\n            durabilidade: 150, durabilidade_max: 150, beneficio: 'Pesca avan√ßada (+60% sucesso)', bonus_pesca: 60,\n            descricao: 'Vara profissional de alta qualidade'\n        },\n        rede_pesca: { \n            id: 'rede_pesca', nome: 'üï∏Ô∏è Rede de Pesca', preco: 5000, categoria: 'ferramentas', emoji: 'üï∏Ô∏è',\n            durabilidade: 100, durabilidade_max: 100, beneficio: 'Pesca em massa (+100% ganhos)', bonus_pesca: 100,\n            descricao: 'Captura m√∫ltiplos peixes'\n        },\n        \n        // Minera√ß√£o\n        picareta_ferro: { \n            id: 'picareta_ferro', nome: '‚õèÔ∏è Picareta de Ferro', preco: 500, categoria: 'ferramentas', emoji: '‚õèÔ∏è',\n            durabilidade: 50, durabilidade_max: 50, beneficio: 'Minera√ß√£o b√°sica (+30% sucesso)', bonus_mineracao: 30,\n            descricao: 'Ferramenta padr√£o de minera√ß√£o'\n        },\n        picareta_diamante: { \n            id: 'picareta_diamante', nome: 'üíé Picareta de Diamante', preco: 10000, categoria: 'ferramentas', emoji: 'üíé',\n            durabilidade: 200, durabilidade_max: 200, beneficio: 'Minera√ß√£o avan√ßada (+80% sucesso)', bonus_mineracao: 80,\n            descricao: 'A melhor picareta dispon√≠vel'\n        },\n        britadeira: { \n            id: 'britadeira', nome: 'üî® Britadeira Industrial', preco: 50000, categoria: 'ferramentas', emoji: 'üî®',\n            durabilidade: 300, durabilidade_max: 300, beneficio: 'Minera√ß√£o industrial (+150% ganhos)', bonus_mineracao: 150,\n            descricao: 'M√°quina pesada para grandes extra√ß√µes'\n        },\n        \n        // Ca√ßa\n        rifle_caca: { \n            id: 'rifle_caca', nome: 'üî´ Rifle de Ca√ßa', preco: 3000, categoria: 'ferramentas', emoji: 'üî´',\n            durabilidade: 80, durabilidade_max: 80, beneficio: 'Ca√ßa b√°sica (+40% sucesso)', bonus_caca: 40,\n            descricao: 'Arma padr√£o para ca√ßa'\n        },\n        espingarda: { \n            id: 'espingarda', nome: 'üí• Espingarda 12', preco: 8000, categoria: 'ferramentas', emoji: 'üí•',\n            durabilidade: 120, durabilidade_max: 120, beneficio: 'Ca√ßa avan√ßada (+70% sucesso)', bonus_caca: 70,\n            descricao: 'Arma poderosa para grandes presas'\n        },\n        rifle_sniper: { \n            id: 'rifle_sniper', nome: 'üéØ Rifle Sniper', preco: 25000, categoria: 'ferramentas', emoji: 'üéØ',\n            durabilidade: 200, durabilidade_max: 200, beneficio: 'Ca√ßa de precis√£o (+120% sucesso)', bonus_caca: 120,\n            descricao: 'Precis√£o milim√©trica para alvos distantes'\n        },\n        \n        // Agricultura\n        enxada: { \n            id: 'enxada', nome: 'ü™ì Enxada B√°sica', preco: 200, categoria: 'ferramentas', emoji: 'ü™ì',\n            durabilidade: 40, durabilidade_max: 40, beneficio: 'Plantio b√°sico (+25% produ√ß√£o)', bonus_agricultura: 25,\n            descricao: 'Ferramenta essencial para agricultura'\n        },\n        trator: { \n            id: 'trator', nome: 'üöú Trator Agr√≠cola', preco: 80000, categoria: 'ferramentas', emoji: 'üöú',\n            durabilidade: 500, durabilidade_max: 500, beneficio: 'Agricultura industrial (+200% produ√ß√£o)', bonus_agricultura: 200,\n            descricao: 'M√°quina para grandes planta√ß√µes'\n        },\n        drone_agricola: { \n            id: 'drone_agricola', nome: 'üõ∏ Drone Agr√≠cola', preco: 150000, categoria: 'ferramentas', emoji: 'üõ∏',\n            durabilidade: 300, durabilidade_max: 300, beneficio: 'Agricultura de precis√£o (+300% produ√ß√£o)', bonus_agricultura: 300,\n            descricao: 'Tecnologia avan√ßada para fazendas'\n        },\n        \n        // Prote√ß√£o\n        colete_kevlar: { \n            id: 'colete_kevlar', nome: 'ü¶∫ Colete √† Prova de Balas', preco: 15000, categoria: 'ferramentas', emoji: 'ü¶∫',\n            durabilidade: 100, durabilidade_max: 100, beneficio: '+60% prote√ß√£o contra ataques', bonus_defesa: 60,\n            descricao: 'Prote√ß√£o corporal avan√ßada'\n        },\n        capacete_seguranca: { \n            id: 'capacete_seguranca', nome: '‚õëÔ∏è Capacete de Seguran√ßa', preco: 800, categoria: 'ferramentas', emoji: '‚õëÔ∏è',\n            durabilidade: 60, durabilidade_max: 60, beneficio: '+30% prote√ß√£o acidentes trabalho', bonus_defesa: 30,\n            descricao: 'Prote√ß√£o para trabalhos perigosos'\n        },\n        \n        // Medicina\n        kit_medico: { \n            id: 'kit_medico', nome: 'üè• Kit M√©dico Avan√ßado', preco: 5000, categoria: 'ferramentas', emoji: 'üè•',\n            durabilidade: 20, durabilidade_max: 20, beneficio: 'Cura 100% da vida', cura: 100,\n            descricao: 'Kit completo para emerg√™ncias m√©dicas'\n        },\n        desfibrilador: { \n            id: 'desfibrilador', nome: '‚ö° Desfibrilador', preco: 30000, categoria: 'ferramentas', emoji: '‚ö°',\n            durabilidade: 50, durabilidade_max: 50, beneficio: 'Revive automaticamente ap√≥s morte', revive: true,\n            descricao: 'Equipamento que pode salvar vidas'\n        },\n        \n        // Diversos\n        lupa_detetive: { \n            id: 'lupa_detetive', nome: 'üîç Lupa de Detetive', preco: 2000, categoria: 'ferramentas', emoji: 'üîç',\n            durabilidade: 100, durabilidade_max: 100, beneficio: '+50% chance encontrar itens raros', bonus_sorte: 50,\n            descricao: 'Aumenta chances de descobertas'\n        },\n        ima_poderoso: { \n            id: 'ima_poderoso', nome: 'üß≤ √çm√£ Poderoso', preco: 8000, categoria: 'ferramentas', emoji: 'üß≤',\n            durabilidade: 80, durabilidade_max: 80, beneficio: 'Atrai metais preciosos (+100% minera√ß√£o)', bonus_mineracao: 100,\n            descricao: 'Atrai metais valiosos automaticamente'\n        },\n        detector_metais: { \n            id: 'detector_metais', nome: 'üì° Detector de Metais', preco: 12000, categoria: 'ferramentas', emoji: 'üì°',\n            durabilidade: 150, durabilidade_max: 150, beneficio: '+80% chance tesouros enterrados', bonus_sorte: 80,\n            descricao: 'Encontra tesouros escondidos'\n        }\n    },\n\n    // CATEGORIA 4: VE√çCULOS (20 itens)\n    veiculos: {\n        bicicleta: { \n            id: 'bicicleta', nome: 'üö≤ Bicicleta', preco: 800, categoria: 'veiculos', emoji: 'üö≤',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+15% velocidade trabalhos', bonus_velocidade: 15,\n            descricao: 'Transporte ecol√≥gico e saud√°vel'\n        },\n        motocicleta: { \n            id: 'motocicleta', nome: 'üèçÔ∏è Motocicleta', preco: 15000, categoria: 'veiculos', emoji: 'üèçÔ∏è',\n            durabilidade: 300, durabilidade_max: 300, beneficio: '+30% velocidade trabalhos', bonus_velocidade: 30,\n            descricao: 'Moto √°gil para a cidade'\n        },\n        carro_popular: { \n            id: 'carro_popular', nome: 'üöó Carro Popular', preco: 40000, categoria: 'veiculos', emoji: 'üöó',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+25% ganhos trabalho', bonus_trabalho: 25,\n            descricao: 'Carro b√°sico confi√°vel'\n        },\n        carro_luxo: { \n            id: 'carro_luxo', nome: 'üèéÔ∏è Carro de Luxo', preco: 200000, categoria: 'veiculos', emoji: 'üèéÔ∏è',\n            durabilidade: 800, durabilidade_max: 800, beneficio: '+60% ganhos trabalho + status', bonus_trabalho: 60,\n            descricao: 'Ve√≠culo de alto padr√£o'\n        },\n        ferrari: { \n            id: 'ferrari', nome: 'üèÅ Ferrari', preco: 1000000, categoria: 'veiculos', emoji: 'üèÅ',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+100% ganhos + m√°ximo status', bonus_trabalho: 100,\n            descricao: 'Supercarro dos sonhos'\n        },\n        lamborghini: { \n            id: 'lamborghini', nome: 'üöó Lamborghini', preco: 1500000, categoria: 'veiculos', emoji: 'üöó',\n            durabilidade: 1200, durabilidade_max: 1200, beneficio: '+120% ganhos + exclusividade', bonus_trabalho: 120,\n            descricao: 'Supercarro exclusivo italiano'\n        },\n        caminhao: { \n            id: 'caminhao', nome: 'üöõ Caminh√£o', preco: 120000, categoria: 'veiculos', emoji: 'üöõ',\n            durabilidade: 600, durabilidade_max: 600, beneficio: '+80% ganhos trabalho pesado', bonus_trabalho: 80,\n            descricao: 'Ve√≠culo para cargas pesadas'\n        },\n        onibus: { \n            id: 'onibus', nome: 'üöå √înibus', preco: 200000, categoria: 'veiculos', emoji: 'üöå',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+300 gold/dia (transporte p√∫blico)', renda_passiva: 300,\n            descricao: 'Neg√≥cio de transporte urbano'\n        },\n        barco: { \n            id: 'barco', nome: 'üö§ Lancha', preco: 80000, categoria: 'veiculos', emoji: 'üö§',\n            durabilidade: 400, durabilidade_max: 400, beneficio: '+150% ganhos pesca aqu√°tica', bonus_pesca: 150,\n            descricao: 'Embarca√ß√£o para pesca em alto mar'\n        },\n        iate: { \n            id: 'iate', nome: 'üõ•Ô∏è Iate de Luxo', preco: 2000000, categoria: 'veiculos', emoji: 'üõ•Ô∏è',\n            durabilidade: 1500, durabilidade_max: 1500, beneficio: '+800 gold/dia (turismo de luxo)', renda_passiva: 800,\n            descricao: 'Embarca√ß√£o de luxo para os ricos'\n        },\n        jato_particular: { \n            id: 'jato_particular', nome: '‚úàÔ∏è Jato Particular', preco: 10000000, categoria: 'veiculos', emoji: '‚úàÔ∏è',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+200% ganhos trabalho internacional', bonus_trabalho: 200,\n            descricao: 'Avi√£o privado para neg√≥cios globais'\n        },\n        helicoptero: { \n            id: 'helicoptero', nome: 'üöÅ Helic√≥ptero', preco: 5000000, categoria: 'veiculos', emoji: 'üöÅ',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+1500 gold/dia (t√°xi a√©reo)', renda_passiva: 1500,\n            descricao: 'Transporte a√©reo executivo'\n        },\n        navio_carga: { \n            id: 'navio_carga', nome: 'üö¢ Navio Cargueiro', preco: 15000000, categoria: 'veiculos', emoji: 'üö¢',\n            durabilidade: 3000, durabilidade_max: 3000, beneficio: '+5000 gold/dia (com√©rcio mar√≠timo)', renda_passiva: 5000,\n            descricao: 'Embarca√ß√£o para com√©rcio internacional'\n        },\n        submarino: { \n            id: 'submarino', nome: 'üõ∏ Submarino', preco: 8000000, categoria: 'veiculos', emoji: 'üõ∏',\n            durabilidade: 1500, durabilidade_max: 1500, beneficio: '+500% ganhos pesca submarina', bonus_pesca: 500,\n            descricao: 'Explora√ß√£o dos oceanos profundos'\n        },\n        trem: { \n            id: 'trem', nome: 'üöÇ Locomotiva', preco: 3000000, categoria: 'veiculos', emoji: 'üöÇ',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+1000 gold/dia (transporte ferrovi√°rio)', renda_passiva: 1000,\n            descricao: 'Transporte ferrovi√°rio de massa'\n        },\n        foguete: { \n            id: 'foguete', nome: 'üöÄ Foguete Espacial', preco: 50000000, categoria: 'veiculos', emoji: 'üöÄ',\n            durabilidade: 5000, durabilidade_max: 5000, beneficio: '+10000 gold/dia (turismo espacial)', renda_passiva: 10000,\n            descricao: 'Viagens ao espa√ßo sideral'\n        },\n        ovni: { \n            id: 'ovni', nome: 'üõ∏ OVNI', preco: 100000000, categoria: 'veiculos', emoji: 'üõ∏',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+20000 gold/dia (tecnologia alien√≠gena)', renda_passiva: 20000,\n            descricao: 'Tecnologia extraterrestre avan√ßada'\n        },\n        jetpack: { \n            id: 'jetpack', nome: 'üéí Jetpack', preco: 500000, categoria: 'veiculos', emoji: 'üéí',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+100% velocidade + voo pessoal', bonus_velocidade: 100,\n            descricao: 'Mochila voadora futur√≠stica'\n        },\n        hover_board: { \n            id: 'hover_board', nome: 'üõπ Hoverboard', preco: 50000, categoria: 'veiculos', emoji: 'üõπ',\n            durabilidade: 150, durabilidade_max: 150, beneficio: '+40% velocidade + estilo', bonus_velocidade: 40,\n            descricao: 'Skate voador tecnol√≥gico'\n        },\n        robo_transformers: { \n            id: 'robo_transformers', nome: 'ü§ñ Rob√¥ Transformers', preco: 20000000, categoria: 'veiculos', emoji: 'ü§ñ',\n            durabilidade: 3000, durabilidade_max: 3000, beneficio: 'Todos os b√¥nus de ve√≠culos', bonus_universal: 50,\n            descricao: 'Rob√¥ que se transforma em qualquer ve√≠culo'\n        }\n    },\n\n    // CATEGORIA 5: NEG√ìCIOS (15 itens)\n    negocios: {\n        barraquinha: { \n            id: 'barraquinha', nome: 'üè™ Barraquinha', preco: 5000, categoria: 'negocios', emoji: 'üè™',\n            durabilidade: 100, durabilidade_max: 100, beneficio: '+150 gold/dia', renda_passiva: 150,\n            descricao: 'Pequeno com√©rcio de rua'\n        },\n        lanchonete: { \n            id: 'lanchonete', nome: 'üçî Lanchonete', preco: 25000, categoria: 'negocios', emoji: 'üçî',\n            durabilidade: 300, durabilidade_max: 300, beneficio: '+400 gold/dia', renda_passiva: 400,\n            descricao: 'Neg√≥cio de fast food'\n        },\n        restaurante: { \n            id: 'restaurante', nome: 'üçΩÔ∏è Restaurante', preco: 100000, categoria: 'negocios', emoji: 'üçΩÔ∏è',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+800 gold/dia', renda_passiva: 800,\n            descricao: 'Estabelecimento gastron√¥mico refinado'\n        },\n        academia: { \n            id: 'academia', nome: 'üí™ Academia', preco: 80000, categoria: 'negocios', emoji: 'üí™',\n            durabilidade: 600, durabilidade_max: 600, beneficio: '+600 gold/dia', renda_passiva: 600,\n            descricao: 'Centro de fitness e muscula√ß√£o'\n        },\n        loja_roupas: { \n            id: 'loja_roupas', nome: 'üëï Loja de Roupas', preco: 60000, categoria: 'negocios', emoji: 'üëï',\n            durabilidade: 400, durabilidade_max: 400, beneficio: '+500 gold/dia', renda_passiva: 500,\n            descricao: 'Boutique de moda'\n        },\n        posto_gasolina: { \n            id: 'posto_gasolina', nome: '‚õΩ Posto de Gasolina', preco: 300000, categoria: 'negocios', emoji: '‚õΩ',\n            durabilidade: 800, durabilidade_max: 800, beneficio: '+1200 gold/dia', renda_passiva: 1200,\n            descricao: 'Abastecimento automotivo'\n        },\n        supermercado: { \n            id: 'supermercado', nome: 'üè¨ Supermercado', preco: 500000, categoria: 'negocios', emoji: 'üè¨',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+2000 gold/dia', renda_passiva: 2000,\n            descricao: 'Rede de varejo aliment√≠cio'\n        },\n        farmacia: { \n            id: 'farmacia', nome: 'üíä Farm√°cia', preco: 200000, categoria: 'negocios', emoji: 'üíä',\n            durabilidade: 600, durabilidade_max: 600, beneficio: '+900 gold/dia', renda_passiva: 900,\n            descricao: 'Drogaria e produtos de sa√∫de'\n        },\n        banco_proprio: { \n            id: 'banco_proprio', nome: 'üè¶ Banco Pr√≥prio', preco: 10000000, categoria: 'negocios', emoji: 'üè¶',\n            durabilidade: 5000, durabilidade_max: 5000, beneficio: '+8000 gold/dia', renda_passiva: 8000,\n            descricao: 'Institui√ß√£o financeira pr√≥pria'\n        },\n        cassino: { \n            id: 'cassino', nome: 'üé∞ Cassino', preco: 5000000, categoria: 'negocios', emoji: 'üé∞',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+4000 gold/dia', renda_passiva: 4000,\n            descricao: 'Casa de jogos e apostas'\n        },\n        empresa_ti: { \n            id: 'empresa_ti', nome: 'üíª Empresa de TI', preco: 2000000, categoria: 'negocios', emoji: 'üíª',\n            durabilidade: 1500, durabilidade_max: 1500, beneficio: '+3000 gold/dia', renda_passiva: 3000,\n            descricao: 'Desenvolvimento de software'\n        },\n        construtora: { \n            id: 'construtora', nome: 'üèóÔ∏è Construtora', preco: 8000000, categoria: 'negocios', emoji: 'üèóÔ∏è',\n            durabilidade: 3000, durabilidade_max: 3000, beneficio: '+6000 gold/dia', renda_passiva: 6000,\n            descricao: 'Empresa de constru√ß√£o civil'\n        },\n        mineradora: { \n            id: 'mineradora', nome: '‚õèÔ∏è Mineradora', preco: 15000000, categoria: 'negocios', emoji: '‚õèÔ∏è',\n            durabilidade: 4000, durabilidade_max: 4000, beneficio: '+10000 gold/dia', renda_passiva: 10000,\n            descricao: 'Extra√ß√£o industrial de min√©rios'\n        },\n        petroleira: { \n            id: 'petroleira', nome: 'üõ¢Ô∏è Petrol√≠fera', preco: 50000000, categoria: 'negocios', emoji: 'üõ¢Ô∏è',\n            durabilidade: 8000, durabilidade_max: 8000, beneficio: '+25000 gold/dia', renda_passiva: 25000,\n            descricao: 'Extra√ß√£o e refino de petr√≥leo'\n        },\n        multinacional: { \n            id: 'multinacional', nome: 'üåç Multinacional', preco: 100000000, categoria: 'negocios', emoji: 'üåç',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+50000 gold/dia', renda_passiva: 50000,\n            descricao: 'Corpora√ß√£o global dominante'\n        }\n    },\n\n    // CATEGORIA 6: TECNOLOGIA (15 itens)\n    tecnologia: {\n        celular: { \n            id: 'celular', nome: 'üì± Smartphone', preco: 1500, categoria: 'tecnologia', emoji: 'üì±',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+20% ganhos trabalho', bonus_trabalho: 20,\n            descricao: 'Telefone inteligente moderno'\n        },\n        laptop: { \n            id: 'laptop', nome: 'üíª Laptop Gamer', preco: 8000, categoria: 'tecnologia', emoji: 'üíª',\n            durabilidade: 300, durabilidade_max: 300, beneficio: '+50% ganhos programa√ß√£o', bonus_programacao: 50,\n            descricao: 'Computador port√°til de alta performance'\n        },\n        pc_gamer: { \n            id: 'pc_gamer', nome: 'üñ•Ô∏è PC Gamer', preco: 25000, categoria: 'tecnologia', emoji: 'üñ•Ô∏è',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+100% ganhos streaming/programa√ß√£o', bonus_programacao: 100,\n            descricao: 'Computador desktop poderoso'\n        },\n        servidor: { \n            id: 'servidor', nome: 'üñ•Ô∏è Servidor Dedicado', preco: 100000, categoria: 'tecnologia', emoji: 'üñ•Ô∏è',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+500 gold/dia (hosting)', renda_passiva: 500,\n            descricao: 'Servidor para neg√≥cios online'\n        },\n        tablet: { \n            id: 'tablet', nome: 'üì± Tablet Pro', preco: 3000, categoria: 'tecnologia', emoji: 'üì±',\n            durabilidade: 250, durabilidade_max: 250, beneficio: '+30% ganhos design', bonus_trabalho: 30,\n            descricao: 'Tablet profissional para cria√ß√£o'\n        },\n        camera_profissional: { \n            id: 'camera_profissional', nome: 'üì∑ C√¢mera Profissional', preco: 15000, categoria: 'tecnologia', emoji: 'üì∑',\n            durabilidade: 400, durabilidade_max: 400, beneficio: '+200% ganhos fotografia/video', bonus_arte: 200,\n            descricao: 'Equipamento para fotografia profissional'\n        },\n        drone_camera: { \n            id: 'drone_camera', nome: 'üõ∏ Drone com C√¢mera', preco: 12000, categoria: 'tecnologia', emoji: 'üõ∏',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+150% ganhos v√≠deos a√©reos', bonus_arte: 150,\n            descricao: 'Drone para filmagens a√©reas'\n        },\n        setup_streaming: { \n            id: 'setup_streaming', nome: 'üé¨ Setup de Stream', preco: 35000, categoria: 'tecnologia', emoji: 'üé¨',\n            durabilidade: 800, durabilidade_max: 800, beneficio: '+300% ganhos streaming', bonus_streaming: 300,\n            descricao: 'Equipamentos completos para streaming'\n        },\n        estudio_gravacao: { \n            id: 'estudio_gravacao', nome: 'üéµ Est√∫dio de Grava√ß√£o', preco: 200000, categoria: 'tecnologia', emoji: 'üéµ',\n            durabilidade: 1500, durabilidade_max: 1500, beneficio: '+1000 gold/dia (m√∫sica)', renda_passiva: 1000,\n            descricao: 'Est√∫dio profissional de m√∫sica'\n        },\n        impressora_3d: { \n            id: 'impressora_3d', nome: 'üñ®Ô∏è Impressora 3D', preco: 25000, categoria: 'tecnologia', emoji: 'üñ®Ô∏è',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+400 gold/dia (prototipagem)', renda_passiva: 400,\n            descricao: 'Impress√£o tridimensional avan√ßada'\n        },\n        vr_headset: { \n            id: 'vr_headset', nome: 'ü•Ω VR Headset', preco: 8000, categoria: 'tecnologia', emoji: 'ü•Ω',\n            durabilidade: 300, durabilidade_max: 300, beneficio: '+100% ganhos desenvolvimento VR', bonus_programacao: 100,\n            descricao: '√ìculos de realidade virtual'\n        },\n        robo_assistente: { \n            id: 'robo_assistente', nome: 'ü§ñ Rob√¥ Assistente', preco: 500000, categoria: 'tecnologia', emoji: 'ü§ñ',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+50% efici√™ncia todos trabalhos', bonus_universal: 50,\n            descricao: 'Intelig√™ncia artificial pessoal'\n        },\n        hologram_projetor: { \n            id: 'hologram_projetor', nome: 'üåü Projetor de Hologramas', preco: 800000, categoria: 'tecnologia', emoji: 'üåü',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+2000 gold/dia (entretenimento)', renda_passiva: 2000,\n            descricao: 'Tecnologia hologr√°fica futur√≠stica'\n        },\n        quantum_computer: { \n            id: 'quantum_computer', nome: '‚öõÔ∏è Computador Qu√¢ntico', preco: 10000000, categoria: 'tecnologia', emoji: '‚öõÔ∏è',\n            durabilidade: 5000, durabilidade_max: 5000, beneficio: '+10000 gold/dia (pesquisa)', renda_passiva: 10000,\n            descricao: 'Computa√ß√£o qu√¢ntica revolucion√°ria'\n        },\n        satelite_pessoal: { \n            id: 'satelite_pessoal', nome: 'üõ∞Ô∏è Sat√©lite Pessoal', preco: 50000000, categoria: 'tecnologia', emoji: 'üõ∞Ô∏è',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+20000 gold/dia (telecomunica√ß√µes)', renda_passiva: 20000,\n            descricao: 'Seu pr√≥prio sat√©lite em √≥rbita'\n        }\n    },\n\n    // CATEGORIA 7: DECORA√á√ÉO (15 itens)\n    decoracao: {\n        quadro_simples: { \n            id: 'quadro_simples', nome: 'üñºÔ∏è Quadro Simples', preco: 500, categoria: 'decoracao', emoji: 'üñºÔ∏è',\n            durabilidade: 300, durabilidade_max: 300, beneficio: '+5% felicidade em casa', bonus_felicidade: 5,\n            descricao: 'Arte b√°sica para decorar paredes'\n        },\n        vaso_plantas: { \n            id: 'vaso_plantas', nome: 'ü™¥ Vaso de Plantas', preco: 200, categoria: 'decoracao', emoji: 'ü™¥',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+3% purifica√ß√£o do ar', bonus_saude: 3,\n            descricao: 'Plantas decorativas que melhoram o ambiente'\n        },\n        tapete_persa: { \n            id: 'tapete_persa', nome: 'ü™Ü Tapete Persa', preco: 5000, categoria: 'decoracao', emoji: 'ü™Ü',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+10% conforto residencial', bonus_conforto: 10,\n            descricao: 'Tapete artesanal luxuoso'\n        },\n        lustre_cristal: { \n            id: 'lustre_cristal', nome: 'üíé Lustre de Cristal', preco: 25000, categoria: 'decoracao', emoji: 'üíé',\n            durabilidade: 800, durabilidade_max: 800, beneficio: '+20% eleg√¢ncia + ilumina√ß√£o perfeita', bonus_elegancia: 20,\n            descricao: 'Ilumina√ß√£o de alto padr√£o'\n        },\n        estante_livros: { \n            id: 'estante_livros', nome: 'üìö Estante de Livros', preco: 3000, categoria: 'decoracao', emoji: 'üìö',\n            durabilidade: 600, durabilidade_max: 600, beneficio: '+15% b√¥nus estudo', bonus_estudo: 15,\n            descricao: 'Biblioteca pessoal impressionante'\n        },\n        lareira: { \n            id: 'lareira', nome: 'üî• Lareira', preco: 15000, categoria: 'decoracao', emoji: 'üî•',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+25% aconchego + aquecimento', bonus_conforto: 25,\n            descricao: 'Aquecimento aconchegante para casa'\n        },\n        piano_cauda: { \n            id: 'piano_cauda', nome: 'üéπ Piano de Cauda', preco: 80000, categoria: 'decoracao', emoji: 'üéπ',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+100 gold/dia (aulas m√∫sica)', renda_passiva: 100,\n            descricao: 'Instrumento musical refinado'\n        },\n        aquario_gigante: { \n            id: 'aquario_gigante', nome: 'üê† Aqu√°rio Gigante', preco: 12000, categoria: 'decoracao', emoji: 'üê†',\n            durabilidade: 400, durabilidade_max: 400, beneficio: '+30% relaxamento + peixes ex√≥ticos', bonus_relaxamento: 30,\n            descricao: 'Aqu√°rio com peixes tropicais'\n        },\n        escultura_marmore: { \n            id: 'escultura_marmore', nome: 'üóø Escultura de M√°rmore', preco: 50000, categoria: 'decoracao', emoji: 'üóø',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+50% status cultural', bonus_cultura: 50,\n            descricao: 'Arte cl√°ssica em m√°rmore'\n        },\n        fonte_agua: { \n            id: 'fonte_agua', nome: '‚õ≤ Fonte de √Ågua', preco: 20000, categoria: 'decoracao', emoji: '‚õ≤',\n            durabilidade: 1200, durabilidade_max: 1200, beneficio: '+40% tranquilidade', bonus_tranquilidade: 40,\n            descricao: 'Fonte ornamental relaxante'\n        },\n        jardim_zen: { \n            id: 'jardim_zen', nome: 'üßò Jardim Zen', preco: 8000, categoria: 'decoracao', emoji: 'üßò',\n            durabilidade: 800, durabilidade_max: 800, beneficio: '+60% medita√ß√£o e paz', bonus_meditacao: 60,\n            descricao: 'Espa√ßo para medita√ß√£o e reflex√£o'\n        },\n        home_theater: { \n            id: 'home_theater', nome: 'üìΩÔ∏è Home Theater', preco: 100000, categoria: 'decoracao', emoji: 'üìΩÔ∏è',\n            durabilidade: 1500, durabilidade_max: 1500, beneficio: '+200 gold/dia (entretenimento)', renda_passiva: 200,\n            descricao: 'Cinema particular em casa'\n        },\n        mesa_sinuca: { \n            id: 'mesa_sinuca', nome: 'üé± Mesa de Sinuca', preco: 18000, categoria: 'decoracao', emoji: 'üé±',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+80 gold/dia (torneios)', renda_passiva: 80,\n            descricao: 'Mesa profissional para jogos'\n        },\n        adega_vinhos: { \n            id: 'adega_vinhos', nome: 'üç∑ Adega de Vinhos', preco: 60000, categoria: 'decoracao', emoji: 'üç∑',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+300 gold/dia (degusta√ß√µes)', renda_passiva: 300,\n            descricao: 'Cole√ß√£o de vinhos premium'\n        },\n        galeria_arte: { \n            id: 'galeria_arte', nome: 'üé® Galeria de Arte', preco: 200000, categoria: 'decoracao', emoji: 'üé®',\n            durabilidade: 3000, durabilidade_max: 3000, beneficio: '+1000 gold/dia (exposi√ß√µes)', renda_passiva: 1000,\n            descricao: 'Galeria pessoal com obras de arte'\n        }\n    },\n\n    // CATEGORIA 8: SEGURAN√áA (15 itens)\n    seguranca: {\n        cameras_simples: { \n            id: 'cameras_simples', nome: 'üìπ C√¢meras B√°sicas', preco: 2000, categoria: 'seguranca', emoji: 'üìπ',\n            durabilidade: 300, durabilidade_max: 300, beneficio: '+30% prote√ß√£o contra roubos', bonus_protecao: 30,\n            descricao: 'Sistema b√°sico de vigil√¢ncia'\n        },\n        alarme_residencial: { \n            id: 'alarme_residencial', nome: 'üö® Alarme Residencial', preco: 5000, categoria: 'seguranca', emoji: 'üö®',\n            durabilidade: 500, durabilidade_max: 500, beneficio: '+40% alerta contra invas√µes', bonus_alerta: 40,\n            descricao: 'Sistema de alarme autom√°tico'\n        },\n        fechadura_digital: { \n            id: 'fechadura_digital', nome: 'üîê Fechadura Digital', preco: 3000, categoria: 'seguranca', emoji: 'üîê',\n            durabilidade: 800, durabilidade_max: 800, beneficio: '+25% seguran√ßa acesso', bonus_acesso: 25,\n            descricao: 'Controle de acesso biom√©trico'\n        },\n        cerca_eletrica: { \n            id: 'cerca_eletrica', nome: '‚ö° Cerca El√©trica', preco: 8000, categoria: 'seguranca', emoji: '‚ö°',\n            durabilidade: 1000, durabilidade_max: 1000, beneficio: '+60% prote√ß√£o per√≠metro', bonus_perimetro: 60,\n            descricao: 'Barreira el√©trica de prote√ß√£o'\n        },\n        seguranca_armada: { \n            id: 'seguranca_armada', nome: 'üëÆ Seguran√ßa Armada', preco: 15000, categoria: 'seguranca', emoji: 'üëÆ',\n            durabilidade: 200, durabilidade_max: 200, beneficio: '+150 gold/dia + prote√ß√£o m√°xima', renda_passiva: -150,\n            descricao: 'Equipe de seguran√ßa profissional (custo mensal)'\n        },\n        bunker_seguro: { \n            id: 'bunker_seguro', nome: 'üè∞ Bunker Seguro', preco: 500000, categoria: 'seguranca', emoji: 'üè∞',\n            durabilidade: 5000, durabilidade_max: 5000, beneficio: '+95% prote√ß√£o total', bonus_protecao: 95,\n            descricao: 'Abrigo blindado m√°xima seguran√ßa'\n        },\n        drones_vigilancia: { \n            id: 'drones_vigilancia', nome: 'üõ∏ Drones de Vigil√¢ncia', preco: 50000, categoria: 'seguranca', emoji: 'üõ∏',\n            durabilidade: 600, durabilidade_max: 600, beneficio: '+80% monitoramento a√©reo', bonus_monitoramento: 80,\n            descricao: 'Vigil√¢ncia a√©rea automatizada'\n        },\n        radar_movimento: { \n            id: 'radar_movimento', nome: 'üì° Radar de Movimento', preco: 25000, categoria: 'seguranca', emoji: 'üì°',\n            durabilidade: 1200, durabilidade_max: 1200, beneficio: '+70% detec√ß√£o intrusos', bonus_deteccao: 70,\n            descricao: 'Sistema de detec√ß√£o avan√ßado'\n        },\n        sistema_biometrico: { \n            id: 'sistema_biometrico', nome: 'üëÅÔ∏è Sistema Biom√©trico', preco: 40000, categoria: 'seguranca', emoji: 'üëÅÔ∏è',\n            durabilidade: 1500, durabilidade_max: 1500, beneficio: '+85% controle acesso', bonus_biometria: 85,\n            descricao: 'Reconhecimento facial e digital'\n        },\n        blindagem_residencial: { \n            id: 'blindagem_residencial', nome: 'üõ°Ô∏è Blindagem Residencial', preco: 200000, categoria: 'seguranca', emoji: 'üõ°Ô∏è',\n            durabilidade: 3000, durabilidade_max: 3000, beneficio: '+90% resist√™ncia ataques', bonus_blindagem: 90,\n            descricao: 'Refor√ßo estrutural anti-balas'\n        },\n        sistema_contramedidas: { \n            id: 'sistema_contramedidas', nome: '‚öîÔ∏è Sistema de Contramedidas', preco: 800000, categoria: 'seguranca', emoji: '‚öîÔ∏è',\n            durabilidade: 2000, durabilidade_max: 2000, beneficio: '+100% defesa ativa', bonus_contramedidas: 100,\n            descricao: 'Defesas autom√°ticas ativas'\n        },\n        seguranca_ai: { \n            id: 'seguranca_ai', nome: 'ü§ñ IA de Seguran√ßa', preco: 1000000, categoria: 'seguranca', emoji: 'ü§ñ',\n            durabilidade: 5000, durabilidade_max: 5000, beneficio: '+98% predi√ß√£o amea√ßas', bonus_predicao: 98,\n            descricao: 'Intelig√™ncia artificial de prote√ß√£o'\n        },\n        escudo_eletromagnetico: { \n            id: 'escudo_eletromagnetico', nome: 'üåê Escudo Eletromagn√©tico', preco: 5000000, categoria: 'seguranca', emoji: 'üåê',\n            durabilidade: 8000, durabilidade_max: 8000, beneficio: '+99% prote√ß√£o total', bonus_escudo: 99,\n            descricao: 'Campo de for√ßa eletromagn√©tico'\n        },\n        satelite_vigilancia: { \n            id: 'satelite_vigilancia', nome: 'üõ∞Ô∏è Sat√©lite de Vigil√¢ncia', preco: 25000000, categoria: 'seguranca', emoji: 'üõ∞Ô∏è',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: '+100% vigil√¢ncia global', bonus_satelite: 100,\n            descricao: 'Monitoramento via sat√©lite'\n        },\n        exercito_particular: { \n            id: 'exercito_particular', nome: 'ü™ñ Ex√©rcito Particular', preco: 100000000, categoria: 'seguranca', emoji: 'ü™ñ',\n            durabilidade: 9999, durabilidade_max: 9999, beneficio: 'Prote√ß√£o militar total', bonus_militar: 100,\n            descricao: 'For√ßa militar privada completa'\n        }\n    }\n};\n\n// Locais para roubar\nconst locaisRoubo = {\n    casa: { nome: 'Casa Simples', min: 100, max: 500, risco: 20, tempo: 5 },\n    loja: { nome: 'Loja de Conveni√™ncia', min: 200, max: 800, risco: 30, tempo: 8 },\n    mercado: { nome: 'Supermercado', min: 500, max: 1500, risco: 40, tempo: 12 },\n    joalheria: { nome: 'Joalheria', min: 1000, max: 3000, risco: 60, tempo: 15 },\n    banco: { nome: 'Ag√™ncia Banc√°ria', min: 2000, max: 8000, risco: 80, tempo: 20 },\n    mansao: { nome: 'Mans√£o de Luxo', min: 3000, max: 12000, risco: 70, tempo: 25 },\n    cassino: { nome: 'Cassino', min: 5000, max: 15000, risco: 90, tempo: 30 },\n    shopping: { nome: 'Shopping Center', min: 8000, max: 25000, risco: 85, tempo: 40 },\n    aeroporto: { nome: 'Aeroporto', min: 10000, max: 30000, risco: 95, tempo: 50 },\n    banco_central: { nome: 'Banco Central', min: 20000, max: 100000, risco: 99, tempo: 60 },\n    casa_moeda: { nome: 'Casa da Moeda', min: 50000, max: 200000, risco: 99, tempo: 80 },\n    pent√°gono: { nome: 'Pent√°gono', min: 100000, max: 500000, risco: 100, tempo: 120 }\n};\n\n// Tipos de investimentos\nconst investimentos = {\n    poupanca: { nome: 'Poupan√ßa', rendimento: 0.5, risco: 0, tempo: 24 },\n    cdb: { nome: 'CDB', rendimento: 8, risco: 5, tempo: 48 },\n    acoes: { nome: 'A√ß√µes', rendimento: 15, risco: 30, tempo: 72 },\n    bitcoin: { nome: 'Bitcoin', rendimento: 25, risco: 50, tempo: 96 },\n    forex: { nome: 'Forex', rendimento: 40, risco: 70, tempo: 24 },\n    imoveis: { nome: 'Im√≥veis', rendimento: 12, risco: 10, tempo: 168 },\n    ouro: { nome: 'Ouro', rendimento: 6, risco: 8, tempo: 120 }\n};\n\n// ==================== FUN√á√ïES AUXILIARES ====================\n\n// Carrega dados do RPG\nfunction carregarDadosRPG() {\n    try {\n        if (!fs.existsSync(rpgDataFile)) {\n            const dir = path.dirname(rpgDataFile);\n            if (!fs.existsSync(dir)) fs.mkdirSync(dir, { recursive: true });\n            fs.writeFileSync(rpgDataFile, JSON.stringify({ grupos: {}, jogadores: {} }, null, 2));\n        }\n        const data = fs.readFileSync(rpgDataFile, 'utf-8');\n        return JSON.parse(data);\n    } catch (err) {\n        console.error('‚ùå Erro ao carregar dados RPG:', err);\n        return { grupos: {}, jogadores: {} };\n    }\n}\n\n// Salva dados do RPG\nfunction salvarDadosRPG(data) {\n    try {\n        fs.writeFileSync(rpgDataFile, JSON.stringify(data, null, 2));\n        return true;\n    } catch (err) {\n        console.error('‚ùå Erro ao salvar dados RPG:', err);\n        return false;\n    }\n}\n\n// Fun√ß√£o para garantir estrutura completa do usu√°rio\nfunction garantirEstruturaUsuario(usuario) {\n    return {\n        nome: usuario.nome || 'Jogador',\n        banco: usuario.banco || bancos[0],\n        saldo: usuario.saldo || 0,\n        vida: usuario.vida || 100,\n        vida_max: usuario.vida_max || 100,\n        registrado: usuario.registrado || new Date().toISOString(),\n        inventario: usuario.inventario || {},\n        educacao_nivel: usuario.educacao_nivel || 1,\n        faculdades_completas: usuario.faculdades_completas || [],\n        trabalho_atual: usuario.trabalho_atual || null,\n        // Estat√≠sticas\n        pescasFeitas: usuario.pescasFeitas || 0,\n        mineracoesFeitas: usuario.mineracoesFeitas || 0,\n        trabalhosFeitos: usuario.trabalhosFeitos || 0,\n        cacadasFeitas: usuario.cacadasFeitas || 0,\n        roubosFeitos: usuario.roubosFeitos || 0,\n        investimentosFeitos: usuario.investimentosFeitos || 0,\n        // Cooldowns\n        ultimaPesca: usuario.ultimaPesca || 0,\n        ultimaMineracao: usuario.ultimaMineracao || 0,\n        ultimoTrabalho: usuario.ultimoTrabalho || 0,\n        ultimaCaca: usuario.ultimaCaca || 0,\n        ultimoRoubo: usuario.ultimoRoubo || 0,\n        ultimoEstudo: usuario.ultimoEstudo || 0,\n        ultimoInvestimento: usuario.ultimoInvestimento || 0,\n        ultimoYoutube: usuario.ultimoYoutube || 0,\n        ultimoTiktok: usuario.ultimoTiktok || 0,\n        ultimoTwitch: usuario.ultimoTwitch || 0,\n        // Estados especiais\n        morreu: usuario.morreu || false,\n        preso: usuario.preso || false,\n        tempo_prisao: usuario.tempo_prisao || 0,\n        causa_morte: usuario.causa_morte || null,\n        investimentos_ativos: usuario.investimentos_ativos || {},\n        // Totais\n        totalGanho: usuario.totalGanho || 0,\n        totalGasto: usuario.totalGasto || 0,\n        nivelInfluenciador: usuario.nivelInfluenciador || 1,\n        seguidores: usuario.seguidores || 0\n    };\n}\n\n// Encontra item em qualquer categoria\nfunction encontrarItem(itemId) {\n    for (const categoria of Object.values(loja)) {\n        if (categoria[itemId]) {\n            return categoria[itemId];\n        }\n    }\n    return null;\n}\n\n// Verifica se usu√°rio tem item\nfunction temItem(usuario, itemId) {\n    return usuario.inventario[itemId] && usuario.inventario[itemId].quantidade > 0;\n}\n\n// Usa item (reduz durabilidade)\nfunction usarItem(usuario, itemId) {\n    if (!usuario.inventario[itemId] || usuario.inventario[itemId].quantidade <= 0) {\n        return { erro: 'Item n√£o encontrado no invent√°rio' };\n    }\n\n    const item = encontrarItem(itemId);\n    if (!item) return { erro: 'Item n√£o existe' };\n\n    // Reduz durabilidade\n    usuario.inventario[itemId].durabilidade -= 1;\n    \n    // Remove item se durabilidade chegou a 0\n    if (usuario.inventario[itemId].durabilidade <= 0) {\n        delete usuario.inventario[itemId];\n        return { quebrou: true, item: item };\n    }\n    \n    return { quebrou: false, item: item };\n}\n\n// Adiciona item ao invent√°rio\nfunction adicionarItem(usuario, itemId, quantidade = 1) {\n    const item = encontrarItem(itemId);\n    if (!item) return false;\n\n    if (!usuario.inventario[itemId]) {\n        usuario.inventario[itemId] = {\n            quantidade: 0,\n            durabilidade: item.durabilidade_max\n        };\n    }\n    \n    usuario.inventario[itemId].quantidade += quantidade;\n    return true;\n}\n\n// Verifica cooldown\nfunction verificarCooldown(ultimaVez, cooldownMs) {\n    const agora = Date.now();\n    const tempoRestante = cooldownMs - (agora - ultimaVez);\n    return tempoRestante > 0 ? tempoRestante : 0;\n}\n\n// Formatar tempo\nfunction formatarTempo(ms) {\n    const minutos = Math.ceil(ms / 60000);\n    if (minutos >= 60) {\n        const horas = Math.floor(minutos / 60);\n        const minutosRestantes = minutos % 60;\n        return `${horas}h ${minutosRestantes}min`;\n    }\n    return `${minutos} minutos`;\n}\n\n// ==================== FUN√á√ïES PRINCIPAIS ====================\n\n// Verifica se RPG est√° ativo no grupo\nfunction isRPGAtivo(groupId) {\n    const dados = carregarDadosRPG();\n    return dados.grupos[groupId]?.ativo || false;\n}\n\n// Ativa/desativa RPG no grupo\nfunction toggleRPG(groupId, ativo) {\n    const dados = carregarDadosRPG();\n    if (!dados.grupos[groupId]) {\n        dados.grupos[groupId] = { ativo: false, jogadores: [] };\n    }\n    dados.grupos[groupId].ativo = ativo;\n    return salvarDadosRPG(dados);\n}\n\n// Verifica se usu√°rio est√° registrado\nfunction isUsuarioRegistrado(userId) {\n    const dados = carregarDadosRPG();\n    return !!dados.jogadores[userId];\n}\n\n// Registra novo usu√°rio\nfunction registrarUsuario(userId, nome, bancoId) {\n    const dados = carregarDadosRPG();\n    const banco = bancos.find(b => b.id === bancoId);\n    if (!banco) return false;\n\n    dados.jogadores[userId] = garantirEstruturaUsuario({\n        nome: nome,\n        banco: banco,\n        saldo: 1000, // Saldo inicial\n        inventario: {\n            // Itens iniciais\n            vara_bambu: { quantidade: 1, durabilidade: 30 },\n            picareta_ferro: { quantidade: 1, durabilidade: 50 },\n            rifle_caca: { quantidade: 1, durabilidade: 80 },\n            enxada: { quantidade: 1, durabilidade: 40 }\n        }\n    });\n\n    return salvarDadosRPG(dados);\n}\n\n// Obt√©m dados do usu√°rio\nfunction obterDadosUsuario(userId) {\n    const dados = carregarDadosRPG();\n    let usuario = dados.jogadores[userId];\n    if (!usuario) return null;\n    return garantirEstruturaUsuario(usuario);\n}\n\n// ==================== SISTEMA DE PESCA ====================\nasync function pescar(userId) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (usuario.morreu) return { erro: 'Voc√™ est√° morto! Use .reviver' };\n        if (usuario.preso) return { erro: `Voc√™ est√° preso por mais ${Math.ceil(usuario.tempo_prisao / 60)} minutos!` };\n\n        const cooldown = verificarCooldown(usuario.ultimaPesca, 15 * 60 * 1000); // 15 min\n        if (cooldown > 0) {\n            return { erro: 'Cooldown', mensagem: `üé£ Aguarde **${formatarTempo(cooldown)}** para pescar novamente!` };\n        }\n\n        // Verifica se tem vara\n        const varas = ['vara_bambu', 'vara_carbono', 'rede_pesca'];\n        let varaUsada = null;\n        let bonusPesca = 0;\n\n        for (const vara of varas) {\n            if (temItem(usuario, vara)) {\n                varaUsada = vara;\n                const item = encontrarItem(vara);\n                bonusPesca = item.bonus_pesca || 0;\n                break;\n            }\n        }\n\n        if (!varaUsada) {\n            return { erro: 'Voc√™ precisa comprar uma vara de pescar na loja!' };\n        }\n\n        // Usa a vara\n        const resultadoUso = usarItem(usuario, varaUsada);\n        let mensagemQuebra = '';\n        if (resultadoUso.quebrou) {\n            mensagemQuebra = `\\nüí• Sua ${resultadoUso.item.nome} quebrou!`;\n        }\n\n        // Calcula chance de sucesso (50% base + b√¥nus)\n        const chanceBase = 50;\n        const chanceTotal = Math.min(90, chanceBase + bonusPesca);\n        const sucesso = Math.random() * 100 < chanceTotal;\n\n        usuario.ultimaPesca = Date.now();\n        usuario.pescasFeitas++;\n\n        if (!sucesso) {\n            dados.jogadores[userId] = usuario;\n            salvarDadosRPG(dados);\n            return { \n                sucesso: false, \n                mensagem: `üé£ **PESCA SEM SUCESSO**\\n\\nOs peixes n√£o morderam a isca!${mensagemQuebra}\\n\\n‚è∞ Cooldown: 15 minutos` \n            };\n        }\n\n        // Peixes dispon√≠veis\n        const peixes = [\n            { nome: 'Peixe Dourado Lend√°rio', valor: 1000, chance: 5, emoji: 'üê†' },\n            { nome: 'Salm√£o Grande', valor: 500, chance: 15, emoji: 'üêü' },\n            { nome: 'Truta Prateada', valor: 300, chance: 25, emoji: 'üêü' },\n            { nome: 'Sardinha', valor: 150, chance: 30, emoji: 'üêü' },\n            { nome: 'Peixe Comum', valor: 80, chance: 25, emoji: 'üêü' }\n        ];\n\n        // Seleciona peixe baseado na chance\n        const sorte = Math.random() * 100;\n        let chanceAcumulada = 0;\n        let peixePescado = null;\n\n        for (const peixe of peixes) {\n            chanceAcumulada += peixe.chance;\n            if (sorte <= chanceAcumulada) {\n                peixePescado = peixe;\n                break;\n            }\n        }\n\n        if (!peixePescado) peixePescado = peixes[peixes.length - 1];\n\n        usuario.saldo += peixePescado.valor;\n        usuario.totalGanho += peixePescado.valor;\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        return { \n            sucesso: true, \n            peixe: peixePescado,\n            mensagem: `üé£ **PESCA BEM-SUCEDIDA!** ${peixePescado.emoji}\\n\\n${peixePescado.nome} pescado!\\nüí∞ **Ganhou:** ${peixePescado.valor.toLocaleString()} Gold\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold${mensagemQuebra}\\n\\n‚è∞ Cooldown: 15 minutos`\n        };\n    });\n}\n\n// ==================== SISTEMA DE MINERA√á√ÉO ====================\nasync function minerar(userId) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (usuario.morreu) return { erro: 'Voc√™ est√° morto! Use .reviver' };\n        if (usuario.preso) return { erro: `Voc√™ est√° preso por mais ${Math.ceil(usuario.tempo_prisao / 60)} minutos!` };\n\n        const cooldown = verificarCooldown(usuario.ultimaMineracao, 20 * 60 * 1000); // 20 min\n        if (cooldown > 0) {\n            return { erro: 'Cooldown', mensagem: `‚õèÔ∏è Aguarde **${formatarTempo(cooldown)}** para minerar novamente!` };\n        }\n\n        // Verifica se tem picareta\n        const picaretas = ['picareta_ferro', 'picareta_diamante', 'britadeira'];\n        let picaretaUsada = null;\n        let bonusMineracao = 0;\n\n        for (const picareta of picaretas) {\n            if (temItem(usuario, picareta)) {\n                picaretaUsada = picareta;\n                const item = encontrarItem(picareta);\n                bonusMineracao = item.bonus_mineracao || 0;\n                break;\n            }\n        }\n\n        if (!picaretaUsada) {\n            return { erro: 'Voc√™ precisa comprar uma picareta na loja!' };\n        }\n\n        // Risco de acidente (morte) - 15% base\n        let riscoAcidente = 15;\n        if (temItem(usuario, 'capacete_seguranca')) riscoAcidente -= 10;\n        if (temItem(usuario, 'colete_kevlar')) riscoAcidente -= 5;\n\n        if (Math.random() * 100 < riscoAcidente) {\n            usuario.vida = 0;\n            usuario.morreu = true;\n            usuario.causa_morte = 'Acidente de minera√ß√£o';\n            usuario.saldo = Math.floor(usuario.saldo * 0.6); // Perde 40%\n\n            dados.jogadores[userId] = usuario;\n            salvarDadosRPG(dados);\n\n            return {\n                sucesso: false,\n                mensagem: `üíÄ **ACIDENTE FATAL NA MINERA√á√ÉO!**\\n\\nDesabamento na mina!\\nüí∞ Perdeu 40% do dinheiro (${Math.floor(usuario.saldo * 0.4).toLocaleString()} Gold)\\n‚ö∞Ô∏è Use **.reviver** para voltar ao jogo`\n            };\n        }\n\n        // Usa a picareta\n        const resultadoUso = usarItem(usuario, picaretaUsada);\n        let mensagemQuebra = '';\n        if (resultadoUso.quebrou) {\n            mensagemQuebra = `\\nüí• Sua ${resultadoUso.item.nome} quebrou!`;\n        }\n\n        // Calcula sucesso (40% base + b√¥nus)\n        const chanceBase = 40;\n        const chanceTotal = Math.min(85, chanceBase + bonusMineracao);\n        const sucesso = Math.random() * 100 < chanceTotal;\n\n        usuario.ultimaMineracao = Date.now();\n        usuario.mineracoesFeitas++;\n\n        if (!sucesso) {\n            dados.jogadores[userId] = usuario;\n            salvarDadosRPG(dados);\n            return { \n                sucesso: false, \n                mensagem: `‚õèÔ∏è **MINERA√á√ÉO SEM SUCESSO**\\n\\nApenas pedras sem valor!${mensagemQuebra}\\n\\n‚è∞ Cooldown: 20 minutos` \n            };\n        }\n\n        // Min√©rios dispon√≠veis\n        const minerais = [\n            { nome: 'Diamante Puro', valor: 2000, chance: 3, emoji: 'üíé' },\n            { nome: 'Ouro Bruto', valor: 1200, chance: 8, emoji: 'ü•á' },\n            { nome: 'Prata', valor: 600, chance: 15, emoji: 'ü•à' },\n            { nome: 'Ferro', valor: 300, chance: 30, emoji: '‚ö°' },\n            { nome: 'Carv√£o', valor: 150, chance: 44, emoji: '‚ö´' }\n        ];\n\n        const sorte = Math.random() * 100;\n        let chanceAcumulada = 0;\n        let mineralEncontrado = null;\n\n        for (const mineral of minerais) {\n            chanceAcumulada += mineral.chance;\n            if (sorte <= chanceAcumulada) {\n                mineralEncontrado = mineral;\n                break;\n            }\n        }\n\n        if (!mineralEncontrado) mineralEncontrado = minerais[minerais.length - 1];\n\n        usuario.saldo += mineralEncontrado.valor;\n        usuario.totalGanho += mineralEncontrado.valor;\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        return { \n            sucesso: true, \n            mineral: mineralEncontrado,\n            mensagem: `‚õèÔ∏è **MINERA√á√ÉO BEM-SUCEDIDA!** ${mineralEncontrado.emoji}\\n\\n${mineralEncontrado.nome} extra√≠do!\\nüí∞ **Ganhou:** ${mineralEncontrado.valor.toLocaleString()} Gold\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold${mensagemQuebra}\\n\\n‚è∞ Cooldown: 20 minutos`\n        };\n    });\n}\n\n// ==================== SISTEMA DE CA√áA ====================\nasync function cacar(userId) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (usuario.morreu) return { erro: 'Voc√™ est√° morto! Use .reviver' };\n        if (usuario.preso) return { erro: `Voc√™ est√° preso por mais ${Math.ceil(usuario.tempo_prisao / 60)} minutos!` };\n\n        const cooldown = verificarCooldown(usuario.ultimaCaca, 25 * 60 * 1000); // 25 min\n        if (cooldown > 0) {\n            return { erro: 'Cooldown', mensagem: `üî´ Aguarde **${formatarTempo(cooldown)}** para ca√ßar novamente!` };\n        }\n\n        // Verifica se tem arma\n        const armas = ['rifle_caca', 'espingarda', 'rifle_sniper'];\n        let armaUsada = null;\n        let bonusCaca = 0;\n\n        for (const arma of armas) {\n            if (temItem(usuario, arma)) {\n                armaUsada = arma;\n                const item = encontrarItem(arma);\n                bonusCaca = item.bonus_caca || 0;\n                break;\n            }\n        }\n\n        if (!armaUsada) {\n            return { erro: 'Voc√™ precisa comprar uma arma de ca√ßa na loja!' };\n        }\n\n        // Usa a arma\n        const resultadoUso = usarItem(usuario, armaUsada);\n        let mensagemQuebra = '';\n        if (resultadoUso.quebrou) {\n            mensagemQuebra = `\\nüí• Sua ${resultadoUso.item.nome} quebrou!`;\n        }\n\n        // Animais dispon√≠veis com diferentes riscos\n        const animais = [\n            { nome: 'Coelho', valor: 120, chance: 35, perigo: 0, emoji: 'üê∞' },\n            { nome: 'Veado', valor: 350, chance: 30, perigo: 5, emoji: 'ü¶å' },\n            { nome: 'Javali', valor: 600, chance: 20, perigo: 25, emoji: 'üêó' },\n            { nome: 'Urso', valor: 1200, chance: 10, perigo: 60, emoji: 'üêª' },\n            { nome: 'Le√£o da Montanha', valor: 2000, chance: 5, perigo: 80, emoji: 'ü¶Å' }\n        ];\n\n        const sorte = Math.random() * 100;\n        let chanceAcumulada = 0;\n        let animalEncontrado = null;\n\n        for (const animal of animais) {\n            chanceAcumulada += animal.chance;\n            if (sorte <= chanceAcumulada) {\n                animalEncontrado = animal;\n                break;\n            }\n        }\n\n        if (!animalEncontrado) animalEncontrado = animais[0];\n\n        // Verifica se consegue abater\n        const chanceAbate = Math.max(30, 70 + bonusCaca - animalEncontrado.perigo);\n        const abateu = Math.random() * 100 < chanceAbate;\n\n        // Se n√£o abateu e o animal √© perigoso, pode atacar\n        if (!abateu && animalEncontrado.perigo > 0) {\n            const chanceAtaque = animalEncontrado.perigo;\n            if (Math.random() * 100 < chanceAtaque) {\n                let protecao = 0;\n                if (temItem(usuario, 'colete_kevlar')) protecao += 60;\n                if (temItem(usuario, 'capacete_seguranca')) protecao += 30;\n\n                const danoRecebido = Math.floor(animalEncontrado.perigo * (1 - protecao / 100));\n                usuario.vida -= danoRecebido;\n\n                if (usuario.vida <= 0) {\n                    usuario.vida = 0;\n                    usuario.morreu = true;\n                    usuario.causa_morte = `Atacado por ${animalEncontrado.nome}`;\n                    usuario.saldo = Math.floor(usuario.saldo * 0.7);\n\n                    dados.jogadores[userId] = usuario;\n                    salvarDadosRPG(dados);\n\n                    return {\n                        sucesso: false,\n                        mensagem: `üíÄ **MORTO POR ${animalEncontrado.nome.toUpperCase()}!** ${animalEncontrado.emoji}\\n\\nO animal te atacou fatalmente!\\nüí∞ Perdeu 30% do dinheiro\\n‚ö∞Ô∏è Use **.reviver** para voltar`\n                    };\n                }\n\n                dados.jogadores[userId] = usuario;\n                salvarDadosRPG(dados);\n\n                return {\n                    sucesso: false,\n                    mensagem: `ü©∏ **ATACADO!** ${animalEncontrado.emoji}\\n\\n${animalEncontrado.nome} te feriu!\\n‚ù§Ô∏è **Vida:** ${usuario.vida}/${usuario.vida_max}\\nüí° Use kit m√©dico para se curar!${mensagemQuebra}`\n                };\n            }\n        }\n\n        usuario.ultimaCaca = Date.now();\n        usuario.cacadasFeitas++;\n\n        if (!abateu) {\n            dados.jogadores[userId] = usuario;\n            salvarDadosRPG(dados);\n            return { \n                sucesso: false, \n                mensagem: `üî´ **CA√áA FRACASSOU**\\n\\nVoc√™ errou o tiro!${mensagemQuebra}\\n\\n‚è∞ Cooldown: 25 minutos` \n            };\n        }\n\n        usuario.saldo += animalEncontrado.valor;\n        usuario.totalGanho += animalEncontrado.valor;\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        return { \n            sucesso: true, \n            animal: animalEncontrado,\n            mensagem: `üî´ **CA√áA BEM-SUCEDIDA!** ${animalEncontrado.emoji}\\n\\n${animalEncontrado.nome} abatido!\\nüí∞ **Ganhou:** ${animalEncontrado.valor.toLocaleString()} Gold\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold${mensagemQuebra}\\n\\n‚è∞ Cooldown: 25 minutos`\n        };\n    });\n}\n\n// ==================== SISTEMA DE TRABALHO ====================\nasync function trabalhar(userId) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (usuario.morreu) return { erro: 'Voc√™ est√° morto! Use .reviver' };\n        if (usuario.preso) return { erro: `Voc√™ est√° preso por mais ${Math.ceil(usuario.tempo_prisao / 60)} minutos!` };\n\n        const cooldown = verificarCooldown(usuario.ultimoTrabalho, 30 * 60 * 1000); // 30 min\n        if (cooldown > 0) {\n            return { erro: 'Cooldown', mensagem: `üíº Aguarde **${formatarTempo(cooldown)}** para trabalhar novamente!` };\n        }\n\n        // Calcula sal√°rio base pela educa√ß√£o\n        const nivelEducacao = usuario.educacao_nivel || 1;\n        const salarioBase = educacao[nivelEducacao]?.salarioMin || 50;\n        let salarioFinal = salarioBase + Math.floor(Math.random() * salarioBase);\n\n        // B√¥nus por itens\n        let bonusTotal = 0;\n        let itensUsados = [];\n\n        // Ve√≠culos\n        if (temItem(usuario, 'ferrari')) { bonusTotal += 100; itensUsados.push('Ferrari'); }\n        else if (temItem(usuario, 'lamborghini')) { bonusTotal += 120; itensUsados.push('Lamborghini'); }\n        else if (temItem(usuario, 'carro_luxo')) { bonusTotal += 60; itensUsados.push('Carro de Luxo'); }\n        else if (temItem(usuario, 'carro_popular')) { bonusTotal += 25; itensUsados.push('Carro Popular'); }\n        else if (temItem(usuario, 'motocicleta')) { bonusTotal += 30; itensUsados.push('Motocicleta'); }\n        else if (temItem(usuario, 'bicicleta')) { bonusTotal += 15; itensUsados.push('Bicicleta'); }\n\n        // Tecnologia\n        if (temItem(usuario, 'laptop')) { bonusTotal += 50; itensUsados.push('Laptop'); }\n        if (temItem(usuario, 'celular')) { bonusTotal += 20; itensUsados.push('Smartphone'); }\n\n        // Faculdades completas\n        let bonusFaculdade = 0;\n        if (usuario.faculdades_completas && usuario.faculdades_completas.length > 0) {\n            const melhorFaculdade = usuario.faculdades_completas.reduce((melhor, faculdadeId) => {\n                const faculdade = faculdades[faculdadeId];\n                return (faculdade && faculdade.salario > melhor) ? faculdade.salario : melhor;\n            }, 0);\n            bonusFaculdade = melhorFaculdade;\n        }\n\n        salarioFinal = Math.floor(salarioFinal * (1 + bonusTotal / 100)) + bonusFaculdade;\n\n        usuario.saldo += salarioFinal;\n        usuario.totalGanho += salarioFinal;\n        usuario.ultimoTrabalho = Date.now();\n        usuario.trabalhosFeitos++;\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        let trabalhoDescricao = '';\n        if (bonusFaculdade > 0) {\n            trabalhoDescricao = `Trabalho especializado (forma√ß√£o superior)`;\n        } else if (nivelEducacao >= 4) {\n            trabalhoDescricao = `Trabalho de n√≠vel superior`;\n        } else if (nivelEducacao >= 3) {\n            trabalhoDescricao = `Trabalho t√©cnico`;\n        } else {\n            trabalhoDescricao = `Trabalho b√°sico`;\n        }\n\n        return { \n            sucesso: true,\n            mensagem: `üíº **TRABALHO CONCLU√çDO!**\\n\\nüìã **Tipo:** ${trabalhoDescricao}\\nüí∞ **Sal√°rio:** ${salarioFinal.toLocaleString()} Gold\\nüìä **B√¥nus:** +${bonusTotal}%\\nüéì **N√≠vel Educa√ß√£o:** ${nivelEducacao}\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold\\n\\n‚è∞ Cooldown: 30 minutos`\n        };\n    });\n}\n\n// ==================== SISTEMA DE ROUBO ====================\nasync function roubar(userId, local) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (usuario.morreu) return { erro: 'Voc√™ est√° morto! Use .reviver' };\n        if (usuario.preso) return { erro: `Voc√™ est√° preso por mais ${Math.ceil(usuario.tempo_prisao / 60)} minutos!` };\n\n        const cooldown = verificarCooldown(usuario.ultimoRoubo, 60 * 60 * 1000); // 1 hora\n        if (cooldown > 0) {\n            return { erro: 'Cooldown', mensagem: `üè¥‚Äç‚ò†Ô∏è Aguarde **${formatarTempo(cooldown)}** para roubar novamente!` };\n        }\n\n        if (!local) {\n            let lista = 'üè¥‚Äç‚ò†Ô∏è **LOCAIS PARA ROUBAR**\\n\\n';\n            Object.entries(locaisRoubo).forEach(([id, dados]) => {\n                lista += `üéØ **${dados.nome}**\\n`;\n                lista += `   üí∞ ${dados.min.toLocaleString()} - ${dados.max.toLocaleString()} Gold\\n`;\n                lista += `   ‚ö†Ô∏è Risco: ${dados.risco}%\\n`;\n                lista += `   ‚è±Ô∏è Tempo: ${dados.tempo} min\\n\\n`;\n            });\n            lista += 'üí° **Use:** `.roubar [local]`';\n            return { mensagem: lista };\n        }\n\n        const localRoubo = locaisRoubo[local.toLowerCase()];\n        if (!localRoubo) {\n            return { erro: 'Local inv√°lido! Use .roubar para ver os locais dispon√≠veis.' };\n        }\n\n        // Redu√ß√£o de risco por itens\n        let riscoFinal = localRoubo.risco;\n        if (temItem(usuario, 'colete_kevlar')) riscoFinal -= 20;\n        if (temItem(usuario, 'carro_luxo') || temItem(usuario, 'ferrari')) riscoFinal -= 10;\n\n        riscoFinal = Math.max(5, riscoFinal); // M√≠nimo 5% de risco\n\n        // Verifica se foi pego\n        if (Math.random() * 100 < riscoFinal) {\n            // Foi preso\n            usuario.preso = true;\n            usuario.tempo_prisao = localRoubo.tempo * 60 * 1000; // Converte para ms\n            usuario.ultimoRoubo = Date.now();\n\n            dados.jogadores[userId] = usuario;\n            salvarDadosRPG(dados);\n\n            return {\n                sucesso: false,\n                mensagem: `üö® **PRESO EM FLAGRANTE!**\\n\\nüëÆ‚Äç‚ôÇÔ∏è Voc√™ foi pego tentando roubar **${localRoubo.nome}**!\\n‚õìÔ∏è **Tempo de pris√£o:** ${localRoubo.tempo} minutos\\nüì± Pode usar outros comandos ap√≥s sair da pris√£o`\n            };\n        }\n\n        // Roubo bem-sucedido\n        const valorRoubado = Math.floor(Math.random() * (localRoubo.max - localRoubo.min + 1)) + localRoubo.min;\n        \n        usuario.saldo += valorRoubado;\n        usuario.totalGanho += valorRoubado;\n        usuario.ultimoRoubo = Date.now();\n        usuario.roubosFeitos++;\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        return {\n            sucesso: true,\n            mensagem: `üè¥‚Äç‚ò†Ô∏è **ROUBO BEM-SUCEDIDO!** üí∞\\n\\nüéØ **Local:** ${localRoubo.nome}\\nüí∞ **Valor roubado:** ${valorRoubado.toLocaleString()} Gold\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold\\n\\n‚ö†Ô∏è **Risco assumido:** ${riscoFinal}%\\n‚è∞ Cooldown: 1 hora`\n        };\n    });\n}\n\n// ==================== SISTEMA DE EDUCA√á√ÉO ====================\nasync function estudar(userId, nivel) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (usuario.morreu) return { erro: 'Voc√™ est√° morto! Use .reviver' };\n\n        const cooldown = verificarCooldown(usuario.ultimoEstudo, 2 * 60 * 60 * 1000); // 2 horas\n        if (cooldown > 0) {\n            return { erro: 'Cooldown', mensagem: `üìö Aguarde **${formatarTempo(cooldown)}** para estudar novamente!` };\n        }\n\n        if (!nivel) {\n            let lista = 'üéì **SISTEMA DE EDUCA√á√ÉO**\\n\\n';\n            lista += `üìä **Seu n√≠vel atual:** ${usuario.educacao_nivel || 1}\\n\\n`;\n            \n            lista += '**üìö EDUCA√á√ÉO B√ÅSICA:**\\n';\n            Object.entries(educacao).forEach(([num, dados]) => {\n                const status = (usuario.educacao_nivel >= num) ? '‚úÖ' : 'üìñ';\n                lista += `${status} **${dados.nome}** (N√≠vel ${num})\\n`;\n                lista += `   üí∞ Custo: ${dados.custo.toLocaleString()} Gold\\n`;\n                lista += `   üíº Sal√°rio m√≠nimo: ${dados.salarioMin.toLocaleString()} Gold/trabalho\\n\\n`;\n            });\n\n            lista += '**üéì FACULDADES ESPECIALIZADAS:**\\n';\n            Object.entries(faculdades).forEach(([id, dados]) => {\n                const completa = usuario.faculdades_completas?.includes(id) ? '‚úÖ' : 'üéì';\n                lista += `${completa} **${dados.nome}**\\n`;\n                lista += `   üí∞ Custo: ${dados.custo.toLocaleString()} Gold\\n`;\n                lista += `   üíº Sal√°rio: +${dados.salario.toLocaleString()} Gold/trabalho\\n\\n`;\n            });\n\n            lista += 'üí° **Use:** `.estudar [n√≠vel]` ou `.estudar [faculdade]`';\n            return { mensagem: lista };\n        }\n\n        // Verifica se √© n√≠vel b√°sico de educa√ß√£o\n        const nivelNum = parseInt(nivel);\n        if (nivelNum && educacao[nivelNum]) {\n            const cursoEducacao = educacao[nivelNum];\n            \n            if (usuario.educacao_nivel >= nivelNum) {\n                return { erro: 'Voc√™ j√° completou este n√≠vel de educa√ß√£o!' };\n            }\n\n            if (usuario.educacao_nivel < nivelNum - 1) {\n                return { erro: `Voc√™ precisa completar o n√≠vel ${nivelNum - 1} primeiro!` };\n            }\n\n            if (usuario.saldo < cursoEducacao.custo) {\n                return { erro: `Voc√™ precisa de ${cursoEducacao.custo.toLocaleString()} Gold para este curso!` };\n            }\n\n            usuario.saldo -= cursoEducacao.custo;\n            usuario.totalGasto += cursoEducacao.custo;\n            usuario.educacao_nivel = nivelNum;\n            usuario.ultimoEstudo = Date.now();\n\n            dados.jogadores[userId] = usuario;\n            salvarDadosRPG(dados);\n\n            return {\n                sucesso: true,\n                mensagem: `üéì **EDUCA√á√ÉO CONCLU√çDA!**\\n\\nüìö **${cursoEducacao.nome}** completado!\\nüí∞ **Custo:** ${cursoEducacao.custo.toLocaleString()} Gold\\nüéØ **Novo n√≠vel:** ${nivelNum}\\nüíº **Novo sal√°rio m√≠nimo:** ${cursoEducacao.salarioMin.toLocaleString()} Gold\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold\\n\\n‚ú® Novos trabalhos desbloqueados!`\n            };\n        }\n\n        // Verifica se √© faculdade\n        const faculdade = faculdades[nivel.toLowerCase()];\n        if (faculdade) {\n            if (usuario.faculdades_completas?.includes(nivel.toLowerCase())) {\n                return { erro: 'Voc√™ j√° completou esta faculdade!' };\n            }\n\n            if (usuario.educacao_nivel < 4) {\n                return { erro: 'Voc√™ precisa ter pelo menos gradua√ß√£o (n√≠vel 4) para fazer faculdade!' };\n            }\n\n            if (usuario.saldo < faculdade.custo) {\n                return { erro: `Voc√™ precisa de ${faculdade.custo.toLocaleString()} Gold para esta faculdade!` };\n            }\n\n            usuario.saldo -= faculdade.custo;\n            usuario.totalGasto += faculdade.custo;\n            if (!usuario.faculdades_completas) usuario.faculdades_completas = [];\n            usuario.faculdades_completas.push(nivel.toLowerCase());\n            usuario.ultimoEstudo = Date.now();\n\n            dados.jogadores[userId] = usuario;\n            salvarDadosRPG(dados);\n\n            return {\n                sucesso: true,\n                mensagem: `üéì **FACULDADE CONCLU√çDA!**\\n\\nüéØ **${faculdade.nome}** completado!\\nüí∞ **Custo:** ${faculdade.custo.toLocaleString()} Gold\\nüíº **B√¥nus salarial:** +${faculdade.salario.toLocaleString()} Gold/trabalho\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold\\n\\n‚ú® Trabalho especializado desbloqueado!`\n            };\n        }\n\n        return { erro: 'Curso n√£o encontrado! Use .estudar para ver as op√ß√µes.' };\n    });\n}\n\n// ==================== SISTEMA DE INVESTIMENTOS ====================\nasync function investir(userId, tipo, valor) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (usuario.morreu) return { erro: 'Voc√™ est√° morto! Use .reviver' };\n\n        if (!tipo || !valor) {\n            let lista = 'üíπ **TIPOS DE INVESTIMENTOS**\\n\\n';\n            Object.entries(investimentos).forEach(([id, dados]) => {\n                lista += `üìà **${dados.nome}**\\n`;\n                lista += `   üí∞ Rendimento: ${dados.rendimento}%\\n`;\n                lista += `   ‚ö†Ô∏è Risco: ${dados.risco}%\\n`;\n                lista += `   ‚è±Ô∏è Tempo: ${dados.tempo}h\\n\\n`;\n            });\n            lista += 'üí° **Use:** `.investir [tipo] [valor]`\\n';\n            lista += 'üìä **Exemplo:** `.investir bitcoin 5000`';\n            return { mensagem: lista };\n        }\n\n        const tipoInvestimento = investimentos[tipo.toLowerCase()];\n        if (!tipoInvestimento) {\n            return { erro: 'Tipo de investimento inv√°lido! Use .investir para ver as op√ß√µes.' };\n        }\n\n        const valorInvestir = parseInt(valor);\n        if (isNaN(valorInvestir) || valorInvestir < 100) {\n            return { erro: 'Valor m√≠nimo para investir: 100 Gold' };\n        }\n\n        if (usuario.saldo < valorInvestir) {\n            return { erro: 'Saldo insuficiente!' };\n        }\n\n        // Verifica se j√° tem investimento ativo do mesmo tipo\n        if (usuario.investimentos_ativos[tipo.toLowerCase()]) {\n            return { erro: 'Voc√™ j√° tem um investimento ativo deste tipo!' };\n        }\n\n        usuario.saldo -= valorInvestir;\n        usuario.totalGasto += valorInvestir;\n        usuario.investimentosFeitos++;\n\n        // Cria o investimento\n        const tempoVencimento = Date.now() + (tipoInvestimento.tempo * 60 * 60 * 1000);\n        usuario.investimentos_ativos[tipo.toLowerCase()] = {\n            valor_investido: valorInvestir,\n            tipo: tipo.toLowerCase(),\n            vencimento: tempoVencimento,\n            rendimento_esperado: tipoInvestimento.rendimento,\n            risco: tipoInvestimento.risco\n        };\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        return {\n            sucesso: true,\n            mensagem: `üíπ **INVESTIMENTO REALIZADO!**\\n\\nüìà **Tipo:** ${tipoInvestimento.nome}\\nüí∞ **Valor investido:** ${valorInvestir.toLocaleString()} Gold\\nüìä **Rendimento esperado:** ${tipoInvestimento.rendimento}%\\n‚ö†Ô∏è **Risco:** ${tipoInvestimento.risco}%\\n‚è∞ **Vencimento:** ${tipoInvestimento.tempo} horas\\n\\nüí≥ **Saldo restante:** ${usuario.saldo.toLocaleString()} Gold`\n        };\n    });\n}\n\n// ==================== SISTEMA DE LOJA ====================\nfunction listarLoja(categoria) {\n    if (!categoria) {\n        return {\n            mensagem: 'üõçÔ∏è **LOJA NEEXTCITY - MEGA STORE**\\n\\n' +\n                     '**üì¶ CATEGORIAS (100+ ITENS):**\\n\\n' +\n                     'üè† `propriedades` - Casas, fazendas, ilhas (15 itens)\\n' +\n                     'üêæ `animais` - Pets, gado, drag√µes (15 itens)\\n' +\n                     'üîß `ferramentas` - Varas, picaretas, armas (20 itens)\\n' +\n                     'üöó `veiculos` - Carros, avi√µes, foguetes (20 itens)\\n' +\n                     'üè¢ `negocios` - Lojas, empresas, bancos (15 itens)\\n' +\n                     'üíª `tecnologia` - PCs, servidores, IA (15 itens)\\n\\n' +\n                     'üí° **Use:** `.loja [categoria]`\\n' +\n                     'üõí **Comprar:** `.comprar [id_item] [quantidade]`'\n        };\n    }\n\n    const itens = loja[categoria.toLowerCase()];\n    if (!itens) return { erro: 'Categoria n√£o encontrada!' };\n\n    let mensagem = `üõçÔ∏è **LOJA - ${categoria.toUpperCase()}**\\n\\n`;\n\n    Object.values(itens).forEach(item => {\n        mensagem += `${item.emoji} **${item.nome}**\\n`;\n        mensagem += `   üí∞ ${item.preco.toLocaleString()} Gold\\n`;\n        mensagem += `   üîß ${item.durabilidade_max || 'Permanente'} usos\\n`;\n        mensagem += `   üìù ${item.beneficio}\\n`;\n        mensagem += `   üÜî \\`${item.id}\\`\\n\\n`;\n    });\n\n    mensagem += 'üí° **Use:** `.comprar [id] [quantidade]`';\n    return { mensagem: mensagem };\n}\n\n// Fun√ß√£o comprar\nfunction comprarItem(userId, itemId, quantidade = 1) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        const item = encontrarItem(itemId);\n        if (!item) return { erro: 'Item n√£o encontrado!' };\n\n        const qtd = Math.max(1, Math.min(10, quantidade)); // M√°ximo 10 por compra\n        const custoTotal = item.preco * qtd;\n\n        if (usuario.saldo < custoTotal) {\n            return { erro: `Saldo insuficiente! Voc√™ precisa de ${custoTotal.toLocaleString()} Gold` };\n        }\n\n        usuario.saldo -= custoTotal;\n        usuario.totalGasto += custoTotal;\n        \n        for (let i = 0; i < qtd; i++) {\n            adicionarItem(usuario, itemId, 1);\n        }\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        return {\n            sucesso: true,\n            mensagem: `üõí **COMPRA REALIZADA!**\\n\\n${item.emoji} **${item.nome}** x${qtd}\\nüí∞ **Custo total:** ${custoTotal.toLocaleString()} Gold\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold\\n\\nüí° **Benef√≠cio:** ${item.beneficio}`\n        };\n    });\n}\n\n// ==================== OUTRAS FUN√á√ïES ====================\n\n// Fun√ß√£o reviver\nfunction reviver(userId) {\n    return withLock(async () => {\n        const dados = carregarDadosRPG();\n        let usuario = dados.jogadores[userId];\n        if (!usuario) return { erro: 'Usu√°rio n√£o registrado' };\n\n        usuario = garantirEstruturaUsuario(usuario);\n\n        if (!usuario.morreu) {\n            return { erro: 'Voc√™ n√£o est√° morto!' };\n        }\n\n        const custoReviver = 2000;\n        if (usuario.saldo < custoReviver) {\n            return { erro: `Voc√™ precisa de ${custoReviver.toLocaleString()} Gold para reviver!` };\n        }\n\n        usuario.saldo -= custoReviver;\n        usuario.totalGasto += custoReviver;\n        usuario.vida = usuario.vida_max;\n        usuario.morreu = false;\n        usuario.causa_morte = null;\n\n        dados.jogadores[userId] = usuario;\n        salvarDadosRPG(dados);\n\n        return {\n            sucesso: true,\n            mensagem: `‚ö° **REVIVIDO COM SUCESSO!**\\n\\nVoc√™ voltou √† vida!\\nüí∞ **Custo:** ${custoReviver.toLocaleString()} Gold\\n‚ù§Ô∏è **Vida:** ${usuario.vida}/${usuario.vida_max}\\nüí≥ **Saldo:** ${usuario.saldo.toLocaleString()} Gold\\n\\n‚ú® Bem-vindo de volta √† NeextCity!`\n        };\n    });\n}\n\n// Fun√ß√£o perfil\nfunction obterPerfil(userId) {\n    const dados = carregarDadosRPG();\n    let usuario = dados.jogadores[userId];\n    if (!usuario) return null;\n\n    usuario = garantirEstruturaUsuario(usuario);\n\n    // Calcula valor do invent√°rio\n    let valorInventario = 0;\n    let totalItens = 0;\n    Object.entries(usuario.inventario).forEach(([itemId, dados]) => {\n        const item = encontrarItem(itemId);\n        if (item) {\n            valorInventario += item.preco * dados.quantidade;\n            totalItens += dados.quantidade;\n        }\n    });\n\n    // Status do usu√°rio\n    let status = '‚úÖ Vivo';\n    if (usuario.morreu) status = `üíÄ Morto (${usuario.causa_morte})`;\n    else if (usuario.preso) status = `‚õìÔ∏è Preso (${Math.ceil(usuario.tempo_prisao / 60000)} min)`;\n\n    // Investimentos ativos\n    let investimentosAtivos = 0;\n    Object.keys(usuario.investimentos_ativos || {}).forEach(tipo => {\n        investimentosAtivos++;\n    });\n\n    const perfil = `üë§ **PERFIL - ${usuario.nome.toUpperCase()}**\\n\\n` +\n                  `${usuario.banco.emoji} **Banco:** ${usuario.banco.nome}\\n` +\n                  `üí∞ **Saldo:** ${usuario.saldo.toLocaleString()} Gold\\n` +\n                  `‚ù§Ô∏è **Vida:** ${usuario.vida}/${usuario.vida_max}\\n` +\n                  `üéØ **Status:** ${status}\\n` +\n                  `üéì **Educa√ß√£o:** N√≠vel ${usuario.educacao_nivel}\\n` +\n                  `üéì **Faculdades:** ${usuario.faculdades_completas?.length || 0}\\n\\n` +\n                  \n                  `üìä **ESTAT√çSTICAS:**\\n` +\n                  `üé£ Pescas: ${usuario.pescasFeitas}\\n` +\n                  `‚õèÔ∏è Minera√ß√µes: ${usuario.mineracoesFeitas}\\n` +\n                  `üíº Trabalhos: ${usuario.trabalhosFeitos}\\n` +\n                  `üî´ Ca√ßadas: ${usuario.cacadasFeitas}\\n` +\n                  `üè¥‚Äç‚ò†Ô∏è Roubos: ${usuario.roubosFeitos || 0}\\n` +\n                  `üíπ Investimentos: ${usuario.investimentosFeitos || 0}\\n\\n` +\n                  \n                  `üíº **PATRIM√îNIO:**\\n` +\n                  `üéí Itens no invent√°rio: ${totalItens}\\n` +\n                  `üíé Valor do invent√°rio: ${valorInventario.toLocaleString()} Gold\\n` +\n                  `üíπ Investimentos ativos: ${investimentosAtivos}\\n` +\n                  `üìà Total ganho: ${usuario.totalGanho.toLocaleString()} Gold\\n` +\n                  `üìâ Total gasto: ${usuario.totalGasto.toLocaleString()} Gold\\n\\n` +\n                  \n                  `üìÖ **Registro:** ${new Date(usuario.registrado).toLocaleDateString('pt-BR')}`;\n\n    return {\n        usuario: usuario,\n        mensagem: perfil,\n        totalItens: totalItens,\n        valorInventario: valorInventario\n    };\n}\n\n// Fun√ß√£o ranking\nfunction obterRanking() {\n    const dados = carregarDadosRPG();\n    const jogadores = Object.entries(dados.jogadores)\n        .map(([id, dados]) => ({ id, ...dados }))\n        .sort((a, b) => b.saldo - a.saldo)\n        .slice(0, 10);\n\n    if (jogadores.length === 0) {\n        return { mensagem: 'üìä Nenhum jogador registrado ainda!' };\n    }\n\n    let ranking = 'üèÜ **RANKING NEEXTCITY - TOP 10**\\n\\n';\n\n    jogadores.forEach((jogador, index) => {\n        const posicao = index + 1;\n        const medal = posicao === 1 ? 'ü•á' : posicao === 2 ? 'ü•à' : posicao === 3 ? 'ü•â' : `${posicao}¬∞`;\n        const status = jogador.morreu ? 'üíÄ' : jogador.preso ? '‚õìÔ∏è' : '‚úÖ';\n\n        ranking += `${medal} **${jogador.nome}** ${status}\\n`;\n        ranking += `   ${jogador.banco.emoji} ${jogador.saldo.toLocaleString()} Gold\\n`;\n        ranking += `   üéì Educa√ß√£o: N√≠vel ${jogador.educacao_nivel || 1}\\n`;\n        ranking += `   üíº Trabalhos: ${jogador.trabalhosFeitos || 0}\\n\\n`;\n    });\n\n    return { mensagem: ranking };\n}\n\n// ==================== EXPORTA√á√ïES ====================\nmodule.exports = {\n    // Dados base\n    carregarDadosRPG,\n    salvarDadosRPG,\n    bancos,\n    loja,\n    educacao,\n    faculdades,\n    investimentos,\n    locaisRoubo,\n\n    // Controle b√°sico\n    isRPGAtivo,\n    toggleRPG,\n    isUsuarioRegistrado,\n    registrarUsuario,\n    obterDadosUsuario,\n\n    // A√ß√µes principais\n    pescar,\n    minerar,\n    cacar,\n    trabalhar,\n    roubar,\n    estudar,\n    investir,\n\n    // Loja e itens\n    listarLoja,\n    comprarItem,\n    encontrarItem,\n    temItem,\n    usarItem,\n    adicionarItem,\n\n    // Perfil e ranking\n    obterPerfil,\n    obterRanking,\n    reviver,\n\n    // Utilit√°rios\n    verificarCooldown,\n    formatarTempo,\n    garantirEstruturaUsuario\n};\n","size_bytes":90091},"arquivos/registros.js":{"content":"// arquivos/registros.js - Sistema de Registros do Bot\nconst fs = require('fs');\nconst path = require('path');\n\nconst registrosFile = path.join(__dirname, '../database/registros/registros.json');\n\n// Carrega dados dos registros\nfunction carregarRegistros() {\n    try {\n        if (!fs.existsSync(registrosFile)) {\n            const dir = path.dirname(registrosFile);\n            if (!fs.existsSync(dir)) fs.mkdirSync(dir, { recursive: true });\n            fs.writeFileSync(registrosFile, \"[]\");\n        }\n        const data = fs.readFileSync(registrosFile, \"utf-8\");\n        return JSON.parse(data);\n    } catch (err) {\n        console.error(\"‚ùå Erro ao carregar registros.json:\", err);\n        return [];\n    }\n}\n\n// Salva dados dos registros\nfunction salvarRegistros(registros) {\n    try {\n        fs.writeFileSync(registrosFile, JSON.stringify(registros, null, 2));\n        return true;\n    } catch (err) {\n        console.error(\"‚ùå Erro ao salvar registros.json:\", err);\n        return false;\n    }\n}\n\n// Verifica se usu√°rio est√° registrado\nfunction usuarioRegistrado(numeroUsuario) {\n    const registros = carregarRegistros();\n    return registros.some(registro => registro.numero === numeroUsuario);\n}\n\n// Registra novo usu√°rio\nfunction registrarUsuario(numeroUsuario, nomeUsuario) {\n    try {\n        const registros = carregarRegistros();\n        \n        // Verifica se j√° est√° registrado\n        if (usuarioRegistrado(numeroUsuario)) {\n            return { sucesso: false, motivo: \"j√°_registrado\" };\n        }\n\n        // Cria novo registro\n        const novoRegistro = {\n            numero: numeroUsuario,\n            nome: nomeUsuario || \"Usu√°rio\",\n            dataRegistro: new Date().toISOString(),\n            dataRegistroFormatada: new Date().toLocaleString('pt-BR'),\n            numeroRegistro: registros.length + 1\n        };\n\n        registros.push(novoRegistro);\n        \n        if (salvarRegistros(registros)) {\n            return { \n                sucesso: true, \n                registro: novoRegistro,\n                totalRegistros: registros.length\n            };\n        } else {\n            return { sucesso: false, motivo: \"erro_salvar\" };\n        }\n    } catch (err) {\n        console.error(\"‚ùå Erro ao registrar usu√°rio:\", err);\n        return { sucesso: false, motivo: \"erro_tecnico\" };\n    }\n}\n\n// Obter estat√≠sticas dos registros\nfunction obterEstatisticas() {\n    const registros = carregarRegistros();\n    return {\n        totalRegistros: registros.length,\n        ultimoRegistro: registros.length > 0 ? registros[registros.length - 1] : null\n    };\n}\n\n// Obter informa√ß√µes de um usu√°rio registrado\nfunction obterInfoUsuario(numeroUsuario) {\n    const registros = carregarRegistros();\n    return registros.find(registro => registro.numero === numeroUsuario);\n}\n\nmodule.exports = {\n    carregarRegistros,\n    salvarRegistros,\n    usuarioRegistrado,\n    registrarUsuario,\n    obterEstatisticas,\n    obterInfoUsuario\n};","size_bytes":2969},"config/environment.js":{"content":"// Environment Configuration Module\n// Centralizes all environment variables and provides secure defaults\n\nrequire('dotenv').config();\n\nconst config = {\n    // Bot Owner Configuration\n    botOwner: {\n        number: process.env.BOT_OWNER_NUMBER || '553176011100',\n        nickname: process.env.BOT_OWNER_NICKNAME || 'Flash',\n        name: process.env.BOT_NAME || 'NEEXT LTDA',\n        prefix: process.env.BOT_PREFIX || '.'\n    },\n\n    // External API Endpoints\n    apis: {\n        instagram: process.env.INSTAGRAM_API_URL || 'https://api.siputzx.my.id/api/d/igdl',\n        youtube: process.env.YOUTUBE_API_URL || 'https://api.nekolabs.my.id/downloader/youtube/play/v1',\n        googleSheets: process.env.GOOGLE_SHEETS_API_URL || 'https://script.google.com/macros/s/AKfycbz7OnN6kyMY5tXuEgcx-M_G_Ox1fUERV6M6GwXc2fuaeE-2MZHwvLeTFuk6QoioP4aPzg/exec'\n    },\n\n    // Business Contact Numbers\n    contacts: {\n        neext: process.env.CONTACT_NEEXT || '553176011100',\n        mercadoPago: process.env.CONTACT_MERCADOPAGO || '5511988032872',\n        nubank: process.env.CONTACT_NUBANK || '551151807064',\n        serasa: process.env.CONTACT_SERASA || '551128475131'\n    },\n\n    // Database Configuration\n    database: {\n        type: process.env.DB_TYPE || 'file',\n        url: process.env.DATABASE_URL || null\n    },\n\n    // Security Settings\n    security: {\n        enableAntiSpam: process.env.ENABLE_ANTI_SPAM === 'true',\n        enableAntiLink: process.env.ENABLE_ANTI_LINK === 'true',\n        enableAdminCommands: process.env.ENABLE_ADMIN_COMMANDS !== 'false' // defaults to true\n    },\n\n    // Bot Media\n    media: {\n        botPhotoUrl: process.env.BOT_PHOTO_URL || 'https://i.ibb.co/nqgG6z6w/IMG-20250720-WA0041-2.jpg'\n    },\n\n    // Development settings\n    isDevelopment: process.env.NODE_ENV !== 'production',\n    \n    // Helper functions\n    getBotOwnerJid() {\n        return this.botOwner.number + '@s.whatsapp.net';\n    },\n\n    getContactJid(contactType) {\n        const number = this.contacts[contactType];\n        return number ? number + '@s.whatsapp.net' : null;\n    },\n\n    // Legacy compatibility for existing settings.json format\n    toLegacyFormat() {\n        return {\n            prefix: this.botOwner.prefix,\n            nomeDoBot: this.botOwner.name,\n            nickDoDono: this.botOwner.nickname,\n            numeroDoDono: this.botOwner.number,\n            fotoDoBot: this.media.botPhotoUrl\n        };\n    }\n};\n\nmodule.exports = config;","size_bytes":2455},"arquivos/rankativo.js":{"content":"// Sistema de Rank de Ativos para WhatsApp Bot\nconst fs = require('fs');\nconst path = require('path');\n\n// Diret√≥rios do sistema\nconst ATIVIDADES_DIR = path.join(__dirname, '../database/grupos/atividades');\n\n// Utilit√°rios\nfunction formatGroupId(groupId) {\n    return groupId.replace('@g.us', '').replace('@lid', '').replace(/[^a-zA-Z0-9]/g, '_');\n}\n\nfunction getAtividadesPath(groupId) {\n    const formattedId = formatGroupId(groupId);\n    return path.join(ATIVIDADES_DIR, `${formattedId}.json`);\n}\n\n// Carrega atividades de um grupo\nfunction carregarAtividades(groupId) {\n    try {\n        const ativPath = getAtividadesPath(groupId);\n        if (!fs.existsSync(ativPath)) {\n            return {};\n        }\n        const data = fs.readFileSync(ativPath, 'utf-8');\n        return JSON.parse(data);\n    } catch (err) {\n        console.error(`‚ùå Erro ao carregar atividades do grupo ${groupId}:`, err);\n        return {};\n    }\n}\n\n// Salva atividades de um grupo\nfunction salvarAtividades(groupId, atividades) {\n    try {\n        // Garante que o diret√≥rio existe\n        if (!fs.existsSync(ATIVIDADES_DIR)) {\n            fs.mkdirSync(ATIVIDADES_DIR, { recursive: true });\n        }\n        \n        const ativPath = getAtividadesPath(groupId);\n        fs.writeFileSync(ativPath, JSON.stringify(atividades, null, 2));\n        return true;\n    } catch (err) {\n        console.error(`‚ùå Erro ao salvar atividades do grupo ${groupId}:`, err);\n        return false;\n    }\n}\n\n// Inicializa dados de um usu√°rio\nfunction inicializarUsuario(userId) {\n    return {\n        mensagens: 0,\n        comandos: 0,\n        stickers: 0,\n        midias: 0,\n        ultimaAtividade: Date.now(),\n        primeiraAtividade: Date.now()\n    };\n}\n\n// Registra atividade de um usu√°rio\nfunction registrarAtividade(groupId, userId, tipo) {\n    const atividades = carregarAtividades(groupId);\n    \n    if (!atividades[userId]) {\n        atividades[userId] = inicializarUsuario(userId);\n    }\n    \n    const usuario = atividades[userId];\n    usuario.ultimaAtividade = Date.now();\n    \n    switch (tipo) {\n        case 'mensagem':\n            usuario.mensagens++;\n            break;\n        case 'comando':\n            usuario.comandos++;\n            break;\n        case 'sticker':\n            usuario.stickers++;\n            break;\n        case 'midia':\n            usuario.midias++;\n            break;\n    }\n    \n    return salvarAtividades(groupId, atividades);\n}\n\n// Obter ranking dos usu√°rios mais ativos\nfunction obterRanking(groupId, limite = 6) {\n    const atividades = carregarAtividades(groupId);\n    \n    // Converte objeto em array e calcula total de atividades\n    const usuarios = Object.entries(atividades).map(([userId, dados]) => {\n        const total = dados.mensagens + dados.comandos + dados.stickers + dados.midias;\n        return {\n            userId,\n            ...dados,\n            total\n        };\n    });\n    \n    // Ordena por total de atividades (decrescente)\n    usuarios.sort((a, b) => b.total - a.total);\n    \n    // Retorna apenas o limite especificado\n    return usuarios.slice(0, limite);\n}\n\n// Formatar nome de usu√°rio\nfunction formatarNomeUsuario(userId) {\n    // Remove @s.whatsapp.net e formata n√∫mero\n    const numero = userId.replace('@s.whatsapp.net', '');\n    \n    // Se for n√∫mero brasileiro, formata como +55 XX XXXXX-XXXX\n    if (numero.startsWith('55') && numero.length >= 12) {\n        const dd = numero.substring(2, 4);\n        const prefixo = numero.substring(4, 9);\n        const sufixo = numero.substring(9);\n        return `+55 ${dd} ${prefixo}-${sufixo}`;\n    }\n    \n    // Para outros pa√≠ses ou formatos, retorna apenas o n√∫mero\n    return numero;\n}\n\n// Gerar ranking formatado\nasync function gerarRankingFormatado(sock, groupId) {\n    try {\n        const ranking = obterRanking(groupId, 6);\n        \n        if (ranking.length === 0) {\n            return `‚ö†Ô∏è *RANK DE ATIVOS*\\n\\nNenhuma atividade registrada ainda.\\nComece a interagir no grupo para aparecer no ranking! üöÄ`;\n        }\n        \n        const posicoes = ['üèÜ', 'ü•à', 'ü•â', '', '', ''];\n        const numeros = ['1¬∞', '2¬∞', '3¬∞', '4¬∞', '5¬∞', '6¬∞'];\n        \n        let mensagem = `‚ï≠‚ïê‚ïê‚ïê‚ïê ‚Ä¢‚ä∞‚úø‚ä±‚Ä¢ ‚ïê‚ïê‚ïê‚ïê‚ïÆ\n  üî• ùêëùêÄùêçùêä ùêÉùêÑ ùêÄùêìùêàùêïùêéùêí ùêÉùêé ùêÜùêëùêîùêèùêé üî•\n‚ï∞‚ïê‚ïê‚ïê‚ïê ‚Ä¢‚ä∞‚úø‚ä±‚Ä¢ ‚ïê‚ïê‚ïê‚ïê‚ïØ\\n\\n`;\n\n        for (let i = 0; i < ranking.length; i++) {\n            const usuario = ranking[i];\n            const emoji = posicoes[i];\n            const numero = numeros[i];\n            \n            // Tenta obter o nome do usu√°rio atrav√©s do grupo\n            let nomeUsuario = '';\n            try {\n                const groupMetadata = await sock.groupMetadata(groupId);\n                const participant = groupMetadata.participants.find(p => p.id === usuario.userId);\n                \n                if (participant && participant.notify) {\n                    nomeUsuario = participant.notify;\n                } else {\n                    // Usa o n√∫mero formatado como fallback\n                    nomeUsuario = formatarNomeUsuario(usuario.userId);\n                }\n            } catch (err) {\n                nomeUsuario = formatarNomeUsuario(usuario.userId);\n            }\n            \n            mensagem += `„Äé ${numero} ${emoji} „Äè\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚îÉ üë§ Usu√°rio: @~${nomeUsuario}\n‚îÉ üí¨ Mensagens: ${usuario.mensagens}\n‚îÉ ‚å®Ô∏è Comandos: ${usuario.comandos}\n‚îÉ üì± Conectado: Android üóø\n‚îÉ üñºÔ∏è Stickers: ${usuario.stickers}\n‚îÉ üìä Total: ${usuario.total}\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\\n\\n`;\n        }\n        \n        return mensagem.trim();\n        \n    } catch (err) {\n        console.error('‚ùå Erro ao gerar ranking:', err);\n        return `‚ùå Erro ao gerar ranking de ativos.`;\n    }\n}\n\n// Limpar dados antigos (mais de 30 dias)\nfunction limparDadosAntigos(groupId) {\n    try {\n        const atividades = carregarAtividades(groupId);\n        const agora = Date.now();\n        const trintaDias = 30 * 24 * 60 * 60 * 1000;\n        \n        let removidos = 0;\n        for (const userId in atividades) {\n            const ultimaAtividade = atividades[userId].ultimaAtividade;\n            if (agora - ultimaAtividade > trintaDias) {\n                delete atividades[userId];\n                removidos++;\n            }\n        }\n        \n        if (removidos > 0) {\n            salvarAtividades(groupId, atividades);\n            console.log(`üßπ Removidos ${removidos} usu√°rios inativos do grupo ${groupId}`);\n        }\n        \n        return removidos;\n    } catch (err) {\n        console.error(`‚ùå Erro ao limpar dados antigos do grupo ${groupId}:`, err);\n        return 0;\n    }\n}\n\n// Limpeza autom√°tica executada uma vez por dia\nsetInterval(() => {\n    try {\n        if (fs.existsSync(ATIVIDADES_DIR)) {\n            const arquivos = fs.readdirSync(ATIVIDADES_DIR);\n            for (const arquivo of arquivos) {\n                if (arquivo.endsWith('.json')) {\n                    const groupId = arquivo.replace('.json', '').replace(/_/g, '');\n                    limparDadosAntigos(groupId);\n                }\n            }\n        }\n    } catch (err) {\n        console.error('‚ùå Erro na limpeza autom√°tica:', err);\n    }\n}, 24 * 60 * 60 * 1000); // 24 horas\n\n// Exporta todas as fun√ß√µes\nmodule.exports = {\n    registrarAtividade,\n    obterRanking,\n    gerarRankingFormatado,\n    carregarAtividades,\n    salvarAtividades,\n    limparDadosAntigos,\n    formatGroupId,\n    getAtividadesPath\n};","size_bytes":7597},"arquivos/welcome.js":{"content":"const fs = require('fs');\nconst path = require('path');\n\nclass WelcomeSystem {\n    constructor() {\n        this.configPath = path.join(__dirname, '..', 'database', 'grupos');\n        this.configFile = 'welcome_config.json';\n        this.ensureDirectoryExists();\n        this.welcomeConfigs = this.carregarConfiguracoes();\n        this.migrarConfiguracoesAntigas(); // Remove textos fixos antigos\n    }\n\n    ensureDirectoryExists() {\n        if (!fs.existsSync(this.configPath)) {\n            fs.mkdirSync(this.configPath, { recursive: true });\n        }\n    }\n\n    carregarConfiguracoes() {\n        try {\n            const configFilePath = path.join(this.configPath, this.configFile);\n            if (fs.existsSync(configFilePath)) {\n                const data = fs.readFileSync(configFilePath, 'utf8');\n                return JSON.parse(data);\n            }\n        } catch (error) {\n            console.log('‚ö†Ô∏è Erro ao carregar configura√ß√µes de welcome:', error);\n        }\n        return {};\n    }\n\n    // NOVA: Remove textos fixos antigos das configura√ß√µes\n    migrarConfiguracoesAntigas() {\n        let alterado = false;\n        \n        for (const [groupId, config] of Object.entries(this.welcomeConfigs)) {\n            // Remove mensagens com textos fixos antigos\n            if (config.mensagem && (\n                config.mensagem.includes('BEM-VINDO(A)') ||\n                config.mensagem.includes('üì± *Grupo:*') ||\n                config.mensagem.includes('üë• *Total de Membros:*') ||\n                config.mensagem.includes('üéâ *BEM-VINDO')\n            )) {\n                console.log(`üîß Removendo texto fixo antigo do grupo ${groupId}`);\n                // Remove texto fixo - deixa VAZIO para usu√°rio configurar\n                config.mensagem = \"\";\n                config.descricao = \"\";\n                alterado = true;\n            }\n        }\n        \n        if (alterado) {\n            this.salvarConfiguracoes();\n            console.log('‚úÖ Configura√ß√µes migradas - textos fixos removidos!');\n        }\n    }\n\n    salvarConfiguracoes() {\n        try {\n            const configFilePath = path.join(this.configPath, this.configFile);\n            fs.writeFileSync(configFilePath, JSON.stringify(this.welcomeConfigs, null, 2));\n        } catch (error) {\n            console.log('‚ùå Erro ao salvar configura√ß√µes de welcome:', error);\n        }\n    }\n\n    // Ativa/desativa welcome para um grupo - SEM texto padr√£o\n    toggleWelcome(groupId, action) {\n        if (!this.welcomeConfigs[groupId]) {\n            this.welcomeConfigs[groupId] = {\n                ativo: false,\n                mensagem: \"\", // VAZIO - usu√°rio deve configurar\n                descricao: \"\"\n            };\n        }\n\n        if (action === 'on') {\n            this.welcomeConfigs[groupId].ativo = true;\n            this.salvarConfiguracoes();\n            return true;\n        } else if (action === 'off') {\n            this.welcomeConfigs[groupId].ativo = false;\n            this.salvarConfiguracoes();\n            return false;\n        }\n\n        return this.welcomeConfigs[groupId].ativo;\n    }\n\n    // Verifica se welcome est√° ativo para um grupo\n    isWelcomeAtivo(groupId) {\n        return this.welcomeConfigs[groupId] && this.welcomeConfigs[groupId].ativo;\n    }\n\n    // NOVA: Configura a mensagem COMPLETA (n√£o apenas descri√ß√£o)\n    configurarMensagemCompleta(groupId, novaMensagem) {\n        if (!this.welcomeConfigs[groupId]) {\n            this.welcomeConfigs[groupId] = {\n                ativo: false,\n                mensagem: novaMensagem,\n                descricao: \"\"\n            };\n        } else {\n            this.welcomeConfigs[groupId].mensagem = novaMensagem;\n        }\n\n        this.salvarConfiguracoes();\n        console.log(`‚úÖ Mensagem welcome configurada para grupo ${groupId}: ${novaMensagem}`);\n        return true;\n    }\n\n    // LEGACY: Mant√©m por compatibilidade (apenas altera #descricao)\n    configurarMensagem(groupId, novaDescricao) {\n        if (!this.welcomeConfigs[groupId]) {\n            this.welcomeConfigs[groupId] = {\n                ativo: false,\n                mensagem: \"\",\n                descricao: novaDescricao\n            };\n        } else {\n            this.welcomeConfigs[groupId].descricao = novaDescricao;\n        }\n\n        this.salvarConfiguracoes();\n        return true;\n    }\n\n    // Obt√©m configura√ß√£o do grupo\n    obterConfig(groupId) {\n        return this.welcomeConfigs[groupId] || null;\n    }\n\n    // Obt√©m foto de perfil do usu√°rio OU usa imagem espec√≠fica\n    async obterFotoPerfil(sock, userId) {\n        try {\n            const profilePic = await sock.profilePictureUrl(userId, 'image');\n            console.log('‚úÖ [WELCOME] Foto de perfil obtida');\n            return profilePic;\n        } catch (error) {\n            console.log('‚ö†Ô∏è [WELCOME] Usando foto padr√£o (usu√°rio sem foto)');\n            return 'https://i.ibb.co/pvQpcbB2/37575a213755cad83bd408908623ba22.jpg';\n        }\n    }\n\n    // SISTEMA FINAL: Processa welcome com API de welcome card\n    async processarWelcome(sock, groupId, newMember) {\n        try {\n            console.log(`üéâ [WELCOME] Processando para ${newMember} no grupo ${groupId}`);\n\n            if (!this.isWelcomeAtivo(groupId)) {\n                console.log('‚ùå [WELCOME] Sistema n√£o est√° ativo para este grupo');\n                return false;\n            }\n\n            const config = this.welcomeConfigs[groupId];\n            if (!config || !config.mensagem || config.mensagem.trim() === '') {\n                console.log('‚ùå [WELCOME] Mensagem n√£o configurada pelo usu√°rio - n√£o enviando');\n                return false;\n            }\n\n            // Obt√©m informa√ß√µes do grupo\n            const groupMetadata = await sock.groupMetadata(groupId);\n            const nomeGrupo = groupMetadata.subject;\n            const totalMembros = groupMetadata.participants.length;\n\n            // Limpa o n√∫mero (remove @s.whatsapp.net, @lid, e sufixos :xx)\n            const numeroLimpo = newMember.replace(/@s\\.whatsapp\\.net|@lid|:[^@]+/g, '');\n\n            // Processa APENAS a mensagem que o usu√°rio configurou\n            let mensagemFinal = config.mensagem;\n\n            // Substitui TODOS os placeholders (sem deixar # literal)\n            mensagemFinal = mensagemFinal.replace(/#numerodele#?/g, `@${numeroLimpo}`);\n            mensagemFinal = mensagemFinal.replace(/#nomedogrupo#?/g, nomeGrupo);\n            mensagemFinal = mensagemFinal.replace(/#totalmembros#?/g, totalMembros.toString());\n            mensagemFinal = mensagemFinal.replace(/#descricao#?/g, config.descricao || '');\n\n            console.log(`üìù [WELCOME] Mensagem final: \"${mensagemFinal}\"`);\n\n            // Obt√©m foto do usu√°rio ou usa a espec√≠fica como AVATAR\n            const avatarUrl = await this.obterFotoPerfil(sock, newMember);\n\n            // Gera welcome card com a API\n            const welcomeCardUrl = `https://api.erdwpe.com/api/maker/welcome1?profile=${encodeURIComponent(avatarUrl)}&name=${encodeURIComponent(numeroLimpo)}&groupname=${encodeURIComponent(nomeGrupo)}&member=${totalMembros}&background=https://i.ibb.co/pvQpcbB2/37575a213755cad83bd408908623ba22.jpg`;\n\n            // Verifica se deve mencionar (s√≥ se tiver @ na mensagem)\n            const mentions = mensagemFinal.includes(`@${numeroLimpo}`) ? [newMember] : [];\n\n            // ENVIA welcome card + texto do usu√°rio\n            await sock.sendMessage(groupId, {\n                image: { url: welcomeCardUrl },\n                caption: mensagemFinal,\n                mentions: mentions\n            });\n\n            console.log(`‚úÖ [WELCOME] Welcome card enviado para ${numeroLimpo}: \"${mensagemFinal}\"`);\n            return true;\n\n        } catch (error) {\n            console.log('‚ùå [WELCOME] Erro ao processar:', error);\n            return false;\n        }\n    }\n\n    // Lista todos os grupos com welcome ativo\n    listarGruposAtivos() {\n        const gruposAtivos = [];\n        for (const [groupId, config] of Object.entries(this.welcomeConfigs)) {\n            if (config.ativo) {\n                gruposAtivos.push(groupId);\n            }\n        }\n        return gruposAtivos;\n    }\n\n    // Estat√≠sticas do sistema\n    obterEstatisticas() {\n        const total = Object.keys(this.welcomeConfigs).length;\n        const ativos = this.listarGruposAtivos().length;\n        const inativos = total - ativos;\n\n        return {\n            total,\n            ativos,\n            inativos\n        };\n    }\n}\n\nmodule.exports = new WelcomeSystem();","size_bytes":8550}},"version":1}